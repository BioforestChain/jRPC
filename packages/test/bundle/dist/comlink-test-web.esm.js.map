{"version":3,"file":"comlink-test-web.esm.js","sources":["../../../typings/build/esm/helper.js","../../../typings/build/esm/weakref.shim.js","../../../core/build/esm/helper.js","../../../core/build/esm/ExportStore.js","../../../core/build/esm/ImportStore.js","../../../core/build/esm/ComlinkCore.js","../../../protocol/build/esm/const.js","../../../protocol/build/esm/ModelTransfer.js","../../../sync/build/esm/helper.js","../../../sync/build/esm/const.js","../../../sync/build/esm/SyncModelTransfer.js","../../../sync/build/esm/ComlinkSync.js","../../../../node_modules/@bfchain/util-decorator/build/esm/bindThis.js","../../../../node_modules/@bfchain/util-decorator/build/esm/cacheGetter.js","../../../../node_modules/@bfchain/util-decorator/build/esm/PropArrayHelper.js","../../../../node_modules/@bfchain/util-decorator/build/esm/throttleWrap.js","../../../async/build/esm/Holder.js","../../../async/build/esm/helper.js","../../../async/build/esm/ReflectForbidenMethods.js","../../../async/build/esm/HolderReflect.js","../../../async/build/esm/AsyncModelTransfer.js","../../../async/build/esm/ComlinkAsync.js","../../../duplex-core/build/esm/AtomicsNotifyer.js","../../../duplex-core/build/esm/helper.js","../../../duplex-core/build/esm/DataPkg.js","../../../duplex-core/build/esm/u32.js","../../../duplex-core/build/esm/Duplex.js","../../../channel/build/esm/MagicBinaryPort.js","../../../channel/build/esm/MagicBinaryChannel.js","../../../comlink/build/esm/index.js","../../../duplex-browser/build/esm/Endpoint.js","../../../duplex-browser/build/esm/DuplexFactory.js","../../build/esm/envWrapper/TaskLog.js","../../build/esm/envWrapper/webEnv.js","../../build/esm/1-1.web.test.js"],"sourcesContent":["/**\n * 不能使用instanceof，会触发Proxy的getPrototypeOf\n * @param obj\n */\nexport const isObj = (obj) => {\n    const targetType = typeof obj;\n    return (targetType === \"object\" && obj !== null) || targetType === \"function\";\n};\n","import { isObj } from \"./helper\";\nconst checkUnregisterToken = (unregisterToken) => {\n    if (!isObj(unregisterToken)) {\n        throw new TypeError(`unregisterToken ('${unregisterToken}') must be an object`);\n    }\n};\nconst checkTarget = (target) => {\n    if (!isObj(target)) {\n        throw new TypeError(\"target must be an object\");\n    }\n};\nif (typeof WeakRef === \"undefined\") {\n    const wr = new WeakMap();\n    class WeakRef {\n        constructor(target) {\n            checkTarget(target);\n            wr.set(this, target);\n        }\n        deref() {\n            return wr.get(this);\n        }\n    }\n    Object.defineProperty(globalThis, \"WeakRef\", { value: WeakRef });\n    ///\n}\nif (typeof FinalizationRegistry === \"undefined\") {\n    if (typeof FinalizationGroup !== \"undefined\") {\n        class FinalizationRegistry {\n            constructor(cleanupCallback) {\n                this.fg = new FinalizationGroup((heldValueIter) => {\n                    for (const heldValue of heldValueIter) {\n                        cleanupCallback(heldValue);\n                    }\n                });\n            }\n            register(target, heldValue, unregisterToken) {\n                this.fg.register(target, heldValue, unregisterToken);\n            }\n            unregister(unregisterToken) {\n                this.fg.unregister(unregisterToken);\n            }\n        }\n        Object.defineProperty(globalThis, \"FinalizationRegistry\", {\n            value: FinalizationRegistry,\n        });\n    }\n    else {\n        class FinalizationRegistry {\n            constructor(cleanupCallback) { }\n            register(target, heldValue, unregisterToken) {\n                checkTarget(target);\n                if (unregisterToken !== undefined) {\n                    checkUnregisterToken(unregisterToken);\n                }\n            }\n            unregister(unregisterToken) {\n                checkUnregisterToken(unregisterToken);\n            }\n        }\n        Object.defineProperty(globalThis, \"FinalizationRegistry\", {\n            value: FinalizationRegistry,\n        });\n    }\n}\n","import \"@bfchain/comlink-typings\";\nexport const ESM_REFLECT_FUN_MAP = new Map([\n    [\n        0 /* GetPrototypeOf */,\n        _SyncToCallback((target) => Reflect.getPrototypeOf(target)),\n    ],\n    [\n        1 /* SetPrototypeOf */,\n        _SyncToCallback((target, [proto]) => Reflect.setPrototypeOf(target, proto)),\n    ],\n    [\n        2 /* IsExtensible */,\n        _SyncToCallback((target) => Reflect.isExtensible(target)),\n    ],\n    [\n        3 /* PreventExtensions */,\n        _SyncToCallback((target) => Reflect.preventExtensions(target)),\n    ],\n    [\n        4 /* GetOwnPropertyDescriptor */,\n        _SyncToCallback((target, [prop]) => Reflect.getOwnPropertyDescriptor(target, prop)),\n    ],\n    [\n        5 /* Has */,\n        _SyncToCallback((target, [prop]) => Reflect.has(target, prop)),\n    ],\n    [\n        6 /* Get */,\n        _SyncToCallback((target, [prop]) => Reflect.get(target, prop)),\n    ],\n    [\n        7 /* Set */,\n        _SyncToCallback((target, [prop, value]) => Reflect.set(target, prop, value)),\n    ],\n    [\n        8 /* DeleteProperty */,\n        _SyncToCallback((target, [prop]) => Reflect.deleteProperty(target, prop)),\n    ],\n    [\n        9 /* DefineProperty */,\n        _SyncToCallback((target, [prop, attr]) => Reflect.defineProperty(target, prop, attr)),\n    ],\n    [10 /* OwnKeys */, _SyncToCallback((target) => Reflect.ownKeys(target))],\n    [\n        11 /* Apply */,\n        _SyncToCallback((target, [ctx, ...args]) => Reflect.apply(target, ctx, args)),\n    ],\n    [\n        19 /* SyncApply */,\n        {\n            type: \"async\",\n            fun: (target, [ctx, ...args]) => Reflect.apply(target, ctx, args),\n        },\n    ],\n    [\n        20 /* AsyncApply */,\n        {\n            type: \"sync\",\n            fun: (target, [resolve, reject, ctx, ...args]) => queueMicrotask(async () => {\n                try {\n                    const res = await Reflect.apply(target, ctx, args);\n                    resolve(res);\n                }\n                catch (err) {\n                    reject(err);\n                }\n            }),\n        },\n    ],\n    [\n        12 /* Construct */,\n        _SyncToCallback((target, [newTarget, ...args]) => Reflect.construct(target, args, newTarget)),\n    ],\n    /// 运算符\n    [\n        13 /* Asset */,\n        _SyncToCallback((target, [prop]) => target[prop]),\n    ],\n    [14 /* Typeof */, _SyncToCallback((target) => typeof target)],\n    [\n        15 /* Instanceof */,\n        _SyncToCallback((target, [ctor]) => target instanceof ctor),\n    ],\n    [16 /* JsonStringify */, _SyncToCallback((target) => JSON.stringify(target))],\n    [17 /* JsonParse */, _SyncToCallback((target) => JSON.parse(target))],\n]);\nfunction _SyncToCallback(handler) {\n    return {\n        type: \"sync\",\n        fun: handler,\n    };\n}\nexport const SyncForCallback = (cb, handler) => {\n    try {\n        cb({ isError: false, data: handler() });\n    }\n    catch (error) {\n        cb({ isError: true, error });\n    }\n};\nexport function resolveCallback(cb, data) {\n    cb({ isError: false, data });\n}\nexport function rejectCallback(cb, error) {\n    cb({ isError: true, error });\n}\n/**\n * 生成一个回调函数，通过指定的处理函数，最终传输给cb风格的出口\n * @param output\n * @param transformer\n */\nexport const SyncPiperFactory = (output, transformer) => {\n    return (...args) => {\n        try {\n            output({ isError: false, data: transformer(...args) });\n        }\n        catch (error) {\n            output({ isError: true, error });\n        }\n    };\n};\n/**\n * @TODO 移除这些异步helper\n * 生成一个回调函数，通过指定的处理函数，最终传输给cb风格的出口\n * @param output\n * @param transformer\n */\nexport const AsyncPiperFactory = (output, transformer) => {\n    return async (...args) => {\n        try {\n            output({ isError: false, data: await transformer(...args) });\n        }\n        catch (error) {\n            output({ isError: true, error });\n        }\n    };\n};\nexport const OpenArg = (arg) => {\n    if (arg.isError) {\n        throw arg.error;\n    }\n    return arg.data;\n};\n// let _queueMicrotask: typeof queueMicrotask;\n// if (typeof queueMicrotask === \"function\") {\n//   /// globalThis和queueMicrotask是同个版本出现的\n//   _queueMicrotask = queueMicrotask.bind(globalThis);\n// } else {\n//   const p = Promise.resolve();\n//   _queueMicrotask = (cb) => {\n//     p.then(cb as any).catch((err) => setTimeout(() => {}, 0));\n//   };\n// }\n","export class ExportStore {\n    constructor(name) {\n        this.name = name;\n        /**\n         * 提供给远端的 refId|symId\n         * 远端可以使用 locId 来进行访问本地\n         */\n        this.accId = 0;\n        /**我所导出的引用对象与符号 */\n        this.objIdStore = new Map();\n    }\n    getObjById(id) {\n        const cache = this.objIdStore.get(id);\n        if (cache && cache.type === 0 /* Object */) {\n            return cache.obj;\n        }\n    }\n    getSymById(id) {\n        const cache = this.objIdStore.get(id);\n        if (cache && cache.type === 1 /* Symbol */) {\n            return cache.sym;\n        }\n    }\n    getId(obj) {\n        const cache = this.objIdStore.get(obj);\n        return cache === null || cache === void 0 ? void 0 : cache.id;\n    }\n    /**\n     * 保存对象的引用\n     */\n    saveObjId(obj, id = this.accId++) {\n        const cache = { type: 0 /* Object */, obj, id };\n        this.objIdStore.set(id, cache);\n        this.objIdStore.set(obj, cache);\n        return id;\n    }\n    /**\n     * 保存符号\n     */\n    saveSymId(sym, id = this.accId++) {\n        const cache = { type: 1 /* Symbol */, sym, id };\n        this.objIdStore.set(id, cache);\n        this.objIdStore.set(sym, cache);\n        return id;\n    }\n    /**\n     * 释放对象的引用\n     * @param id\n     */\n    releaseById(id) {\n        // console.log(\"release\", this.name, id);\n        const cache = this.objIdStore.get(id);\n        if (cache) {\n            if (cache.type === 0 /* Object */) {\n                this.objIdStore.delete(cache.obj);\n            }\n            else {\n                this.objIdStore.delete(cache.sym);\n            }\n            this.objIdStore.delete(id);\n            return true;\n        }\n        return false;\n    }\n    exportSymbol(source) {\n        var _a;\n        return (_a = this.getId(source)) !== null && _a !== void 0 ? _a : this.saveSymId(source);\n    }\n    exportObject(source) {\n        var _a;\n        return (_a = this.getId(source)) !== null && _a !== void 0 ? _a : this.saveObjId(source);\n    }\n}\n","export class ImportStore {\n    constructor(name) {\n        this.name = name;\n        /**存储协议扩展信息 */\n        this.idExtendsStore = new Map();\n        /**我所导入的引用对象与符号 */\n        this.proxyIdStore = new Map();\n        this.proxyIdWM = new WeakMap();\n        this._fr = new FinalizationRegistry((id) => this.releaseProxyId(id));\n    }\n    /**\n     * 获取代理对象背后真正的引用信息\n     */\n    getProxy(proxy) {\n        let cache;\n        switch (typeof proxy) {\n            case \"number\":\n            case \"symbol\":\n                cache = this.proxyIdStore.get(proxy);\n                break;\n            case \"object\":\n                if (proxy === null) {\n                    return;\n                }\n            case \"function\":\n                const id = this.proxyIdWM.get(proxy);\n                if (id !== undefined) {\n                    cache = this.proxyIdStore.get(id);\n                }\n                break;\n        }\n        return cache;\n    }\n    isProxy(proxy) {\n        switch (typeof proxy) {\n            case \"symbol\":\n                return this.proxyIdStore.has(proxy);\n            case \"object\":\n                if (proxy === null) {\n                    return false;\n                }\n            case \"function\":\n                return this.proxyIdWM.has(proxy);\n        }\n        return false;\n    }\n    getProxyById(id) {\n        const cache = this.proxyIdStore.get(id);\n        let res;\n        if (cache) {\n            if (cache.type === 0 /* Proxy */) {\n                res = cache.pwr.deref();\n            }\n            else {\n                res = cache.sym;\n            }\n        }\n        return res;\n    }\n    /**\n     * 保存导入引用\n     * @param proxy Proxy<object>|remote-symbol-placeholder\n     * @param id refId\n     */\n    saveProxyId(proxy, id) {\n        let cache;\n        if (typeof proxy === \"symbol\") {\n            cache = {\n                id,\n                type: 1 /* Symbol */,\n                sym: proxy,\n            };\n            this.proxyIdStore.set(proxy, cache);\n        }\n        else {\n            cache = {\n                id,\n                type: 0 /* Proxy */,\n                pwr: new WeakRef(proxy),\n            };\n            this._fr.register(proxy, id, cache.pwr);\n            this.proxyIdWM.set(proxy, id);\n        }\n        this.proxyIdStore.set(id, cache);\n    }\n    /**为某一个对象记录 refId */\n    backupProxyId(proxy, id) {\n        this.proxyIdWM.set(proxy, id);\n    }\n    /**\n     * 释放导入的引用\n     * @param id refId\n     */\n    releaseProxyId(id) {\n        // console.log(\"release\", this.name, id);\n        const cache = this.proxyIdStore.get(id);\n        if (cache) {\n            this.proxyIdStore.delete(id);\n            if (cache.type === 1 /* Symbol */) {\n                this.proxyIdStore.delete(cache.sym);\n            }\n            else {\n                //   this.proxyIdWM.delete(cache.)\n                this._fr.unregister(cache.pwr);\n            }\n            // 删除缓存的扩展信息\n            this.idExtendsStore.delete(id);\n            this._onReleaseCallback(id);\n            return true;\n        }\n        return false;\n    }\n    _onReleaseCallback(id) {\n        return;\n    }\n    /**监听一个引用被释放 */\n    onRelease(cb) {\n        this._onReleaseCallback = cb;\n    }\n}\n// export const importStore = new ImportStore();\n","import \"@bfchain/comlink-typings\";\nimport { ESM_REFLECT_FUN_MAP, OpenArg, resolveCallback, SyncPiperFactory } from \"./helper\";\nimport { ExportStore } from \"./ExportStore\";\nimport { ImportStore } from \"./ImportStore\";\nexport class ComlinkCore {\n    constructor(port, name) {\n        this.port = port;\n        this.name = name;\n        this.exportStore = new ExportStore(this.name);\n        this.importStore = new ImportStore(this.name);\n        /**用于存储导出的域 */\n        this._exportModule = { scope: Object.create(null), isExported: false };\n        this._listen();\n    }\n    $destroy() {\n        throw new Error(\"Method not implemented.\");\n    }\n    _getInitedExportScope() {\n        const { _exportModule } = this;\n        if (_exportModule.isExported === false) {\n            _exportModule.isExported = true;\n            this.exportStore.exportObject(_exportModule.scope);\n        }\n        return _exportModule.scope;\n    }\n    export(source, name = \"default\") {\n        Reflect.set(this._getInitedExportScope(), name, source);\n    }\n    $getEsmReflectHanlder(operator) {\n        const handler = ESM_REFLECT_FUN_MAP.get(operator);\n        if (!handler) {\n            throw new SyntaxError(\"no support operator:\" + operator);\n        }\n        return handler;\n    }\n    _listen() {\n        const { exportStore: exportStore, port } = this;\n        port.onMessage(async (cb, bin) => {\n            const out_void = () => resolveCallback(cb, undefined);\n            const linkObj = this.transfer.transferableBinary2LinkObj(bin);\n            if (linkObj.type === 2 /* In */) {\n                const obj = exportStore.getObjById(linkObj.targetId);\n                if (obj === undefined) {\n                    throw new ReferenceError(\"no found\");\n                }\n                /**预备好结果 */\n                const linkOut = {\n                    type: 3 /* Out */,\n                    // resId: linkObj.reqId,\n                    out: [],\n                    isThrow: false,\n                };\n                const out_linkOut = (anyRes) => {\n                    this.transfer.Any2InOutBinary((iobRet) => {\n                        if (iobRet.isError) {\n                            return cb(iobRet);\n                        }\n                        linkOut.out.push(iobRet.data);\n                        resolveCallback(cb, this.transfer.linkObj2TransferableBinary(linkOut));\n                    }, anyRes);\n                };\n                try {\n                    let res;\n                    /**JS语言中，this对象不用传输。\n                     * 但在Comlink协议中，它必须传输：\n                     * 因为我们使用call/apply模拟，所以所有所需的对象都需要传递进来\n                     */\n                    const operator = this.transfer.InOutBinary2Any(linkObj.in[0]);\n                    const paramList = linkObj.in.slice(1).map((iob) => this.transfer.InOutBinary2Any(iob));\n                    if (18 /* Multi */ === operator) {\n                        /// 批量操作\n                        res = obj;\n                        for (let i = 0; i < paramList.length;) {\n                            const len = paramList[i];\n                            const $operator = paramList[i + 1];\n                            const $paramList = paramList.slice(i + 2, i + 1 + len);\n                            const $handler = this.$getEsmReflectHanlder($operator);\n                            res = $handler.fun(res, $paramList);\n                            if ($handler.type === \"async\") {\n                                res = await res;\n                            }\n                            i += len + 1;\n                        }\n                    }\n                    else {\n                        /// 单项操作\n                        const handler = this.$getEsmReflectHanlder(operator);\n                        res = handler.fun(obj, paramList);\n                        if (handler.type === \"async\") {\n                            res = await res;\n                        }\n                    }\n                    /// 如果有返回结果的需要，那么就尝试进行返回\n                    if (linkObj.hasOut) {\n                        return out_linkOut(res);\n                    }\n                    else {\n                        return out_void();\n                    }\n                }\n                catch (err) {\n                    linkOut.isThrow = true;\n                    return out_linkOut(err);\n                }\n            }\n            else if (linkObj.type === 0 /* Import */) {\n                const scope = this._getInitedExportScope();\n                return this.transfer.Any2InOutBinary((scopeRet) => {\n                    if (scopeRet.isError) {\n                        return cb(scopeRet);\n                    }\n                    resolveCallback(cb, this.transfer.linkObj2TransferableBinary({\n                        type: 1 /* Export */,\n                        module: scopeRet.data,\n                    }));\n                }, scope);\n            }\n            else if (linkObj.type === 4 /* Release */) {\n                exportStore.releaseById(linkObj.locId);\n            }\n            out_void();\n        });\n        this.importStore.onRelease((refId) => {\n            // console.log(\"send release\", refId);\n            port.send(this.transfer.linkObj2TransferableBinary({\n                type: 4 /* Release */,\n                locId: refId,\n            }));\n        });\n    }\n    $getImportModule(output) {\n        const { port } = this;\n        /**\n         * 进行协商握手，取得对应的 refId\n         * @TODO 这里将会扩展出各类语言的传输协议\n         */\n        if (this._importModule === undefined) {\n            port.req(SyncPiperFactory(output, (ret) => {\n                const bin = OpenArg(ret);\n                const linkObj = this.transfer.transferableBinary2LinkObj(bin);\n                if (linkObj.type !== 1 /* Export */) {\n                    throw new TypeError();\n                }\n                /// 握手完成，转成代理对象\n                return (this._importModule = this.transfer.InOutBinary2Any(linkObj.module));\n            }), this.transfer.linkObj2TransferableBinary({ type: 0 /* Import */ }));\n            return;\n        }\n        output({\n            isError: false,\n            data: this._importModule,\n        });\n    }\n}\n","export const IOB_EFT_Factory_Map = new Map([\n    [\n        2 /* Sync */,\n        {\n            factory: Function,\n            toString: (refExtends) => `function ${refExtends.name}() { [remote code] }`,\n        },\n    ],\n]);\nfor (const [funType, { factoryCode, toString }] of [\n    [\n        3 /* SyncGenerator */,\n        {\n            factoryCode: \"return function* () {}.constructor\",\n            toString: (refExtends) => `function *${refExtends.name}() { [remote code] }`,\n        },\n    ],\n    [\n        4 /* Async */,\n        {\n            factoryCode: \"return async function () {}.constructor\",\n            toString: (refExtends) => `async function ${refExtends.name}() { [remote code] }`,\n        },\n    ],\n    [\n        5 /* AsyncGenerator */,\n        {\n            factoryCode: \"return async function* () {}.constructor\",\n            toString: (refExtends) => `async function *${refExtends.name}() { [remote code] }`,\n        },\n    ],\n    [\n        8 /* Class */,\n        {\n            factoryCode: \"return ()=>class {}\",\n            toString: (refExtends) => `class ${refExtends.name} { [remote code] }`,\n        },\n    ],\n]) {\n    let factory;\n    try {\n        factory = Function(factoryCode)();\n    }\n    catch {\n        factory = Function;\n    }\n    IOB_EFT_Factory_Map.set(funType, { factory, toString });\n}\nexport function getFunctionType(fun) {\n    const ctor = fun.constructor;\n    if (ctor) {\n        const ctorName = ctor.name;\n        if (ctorName === \"AsyncGeneratorFunction\") {\n            return 5 /* AsyncGenerator */;\n        }\n        if (ctorName === \"AsyncFunction\") {\n            return 4 /* Async */;\n        }\n        if (ctorName === \"GeneratorFunction\") {\n            return 3 /* SyncGenerator */;\n        }\n    }\n    const str = Object.toString.call(fun);\n    if (str.startsWith(\"class\")) {\n        return 8 /* Class */;\n    }\n    return 2 /* Sync */;\n}\n/**导出者 用于描述一个 function 的导出配置 */\nexport const EXPORT_FUN_DESCRIPTOR_SYMBOL = Symbol(\"function.export\");\n/**获取一个对象的描述信息 */\nexport function getFunctionExportDescription(fun) {\n    return (Reflect.get(fun, EXPORT_FUN_DESCRIPTOR_SYMBOL) ||\n        {});\n}\n/**导入者 缓存一个 function 的导入信息 */\nexport const IMPORT_FUN_EXTENDS_SYMBOL = Symbol(\"function.import\");\n/**\n * 用于替代 RefFunction 的 Function.property.toString\n * @param this\n */\nexport function refFunctionStaticToStringFactory() {\n    function toString() {\n        if (this === self) {\n            /**模拟远端获取到的 */\n            return \"function toString() { [remote code] }\";\n        }\n        const refExtends = Reflect.get(this, IMPORT_FUN_EXTENDS_SYMBOL);\n        const { toString } = refExtends;\n        if (toString.mode === 1 /* static */) {\n            return toString.code;\n        }\n        throw new TypeError();\n    }\n    const self = toString;\n    /**对自我进行源码保护 */\n    Object.defineProperty(self, \"toString\", {\n        configurable: false,\n        writable: false,\n        value: self,\n    });\n    return toString;\n}\nexport function getObjectStatus(obj) {\n    if (Object.isFrozen(obj)) {\n        return 0 /* frozen */;\n    }\n    if (Object.isSealed(obj)) {\n        return 2 /* sealed */;\n    }\n    if (Object.isExtensible(obj)) {\n        return 3 /* preventedExtensions */;\n    }\n    return 7 /* freedom */;\n}\n//#endregion\n//#region IOB_Extends::Symbol\nexport const globalSymbolStore = new Map();\n[\n    \"asyncIterator\",\n    \"hasInstance\",\n    \"isConcatSpreadable\",\n    \"iterator\",\n    \"match\",\n    \"matchAll\",\n    \"replace\",\n    \"search\",\n    \"species\",\n    \"split\",\n    \"toPrimitive\",\n    \"toStringTag\",\n    \"unscopables\",\n].forEach((name) => {\n    const sym = Reflect.get(Symbol, name);\n    if (typeof sym === \"symbol\") {\n        const cache = {\n            sym,\n            name,\n        };\n        globalSymbolStore.set(sym, cache);\n        globalSymbolStore.set(name, cache);\n    }\n});\n//#endregion\n","import { helper } from \"@bfchain/comlink-core\";\nimport { globalSymbolStore, IOB_EFT_Factory_Map, getFunctionType, getObjectStatus, getFunctionExportDescription, } from \"./const\";\nexport class ModelTransfer {\n    constructor(core) {\n        this.core = core;\n    }\n    canClone(obj) {\n        switch (typeof obj) {\n            case \"bigint\":\n            case \"boolean\":\n            case \"number\":\n            case \"string\":\n            case \"undefined\":\n                return true;\n            case \"symbol\":\n            // return Symbol.keyFor(obj) !== undefined;\n            case \"function\":\n                return false;\n            case \"object\":\n                return obj === null;\n        }\n        return false;\n    }\n    /**获取符号的扩展信息 */\n    _getRemoteSymbolItemExtends(sym) {\n        var _a, _b;\n        const globalSymInfo = globalSymbolStore.get(sym);\n        if (globalSymInfo) {\n            return {\n                type: 2 /* Symbol */,\n                global: true,\n                description: globalSymInfo.name,\n                unique: false,\n            };\n        }\n        return {\n            type: 2 /* Symbol */,\n            global: false,\n            description: (_b = (_a = Object.getOwnPropertyDescriptor(sym, \"description\")) === null || _a === void 0 ? void 0 : _a.value) !== null && _b !== void 0 ? _b : sym.toString().slice(7, -1),\n            unique: Symbol.keyFor(sym) !== undefined,\n        };\n    }\n    /**获取一个引用对象的扩展信息 */\n    _getRefItemExtends(obj) {\n        if (typeof obj === \"object\") {\n            return {\n                type: 1 /* Object */,\n                status: getObjectStatus(obj),\n            };\n        }\n        if (typeof obj === \"function\") {\n            const exportDescriptor = getFunctionExportDescription(obj);\n            const funType = getFunctionType(obj);\n            /**\n             * @FIXME 这种判断也是有风险的，因为虽然箭头函数等严格模式不允许执行 `fun.caller = 1`，但因为`caller`并不在属性里，而是在原型链上进行约束的，所以可能会使用`Reflect.set(fun,'caller',1)`从而达成混淆的效果\n             */\n            const isStatic = Object.getOwnPropertyDescriptor(obj, \"caller\") === undefined;\n            return {\n                type: 0 /* Function */,\n                funType,\n                name: obj.name,\n                length: obj.length,\n                isStatic,\n                status: getObjectStatus(obj),\n                instanceOfFunction: obj instanceof Function,\n                canConstruct: funType === 8 /* Class */ ||\n                    (funType === 2 /* Sync */ && isStatic === false),\n                toString: obj.toString === Function.prototype.toString\n                    ? {\n                        mode: 1 /* static */,\n                        code: exportDescriptor.showSourceCode\n                            ? obj.toString()\n                            : IOB_EFT_Factory_Map.get(funType).toString(obj),\n                    }\n                    : { mode: 0 /* dynamic */ },\n            };\n        }\n        throw new TypeError();\n    }\n    Any2InOutBinary(cb, obj) {\n        helper.SyncForCallback(cb, () => {\n            const needClone = this.canClone(obj);\n            let item;\n            /// 可直接通过赋值而克隆的对象\n            if (needClone) {\n                item = {\n                    type: 0 /* Clone */,\n                    data: obj,\n                };\n            }\n            else {\n                /// 对象是否是导入进来的\n                const imp = this.core.importStore.getProxy(obj);\n                if (imp) {\n                    item = {\n                        type: 3 /* Locale */,\n                        locId: imp.id,\n                    };\n                }\n                /// 符号对象需要在远端做一个克隆备份\n                else {\n                    switch (typeof obj) {\n                        case \"symbol\":\n                            item = {\n                                type: 1 /* RemoteSymbol */,\n                                refId: this.core.exportStore.exportSymbol(obj),\n                                extends: this._getRemoteSymbolItemExtends(obj),\n                            };\n                            break;\n                        case \"function\":\n                        case \"object\":\n                            if (obj !== null) {\n                                item = {\n                                    type: 2 /* Ref */,\n                                    refId: this.core.exportStore.exportObject(obj),\n                                    extends: this._getRefItemExtends(obj),\n                                };\n                            }\n                    }\n                }\n            }\n            if (!item) {\n                throw new TypeError(\"Cloud not transfer to IOB\");\n            }\n            return item;\n        });\n    }\n    linkObj2TransferableBinary(obj) {\n        return obj;\n    }\n    transferableBinary2LinkObj(bin) {\n        return bin;\n    }\n}\n","import { helper } from \"@bfchain/comlink-core\";\nconst CB_TO_SYNC_ERROR = new SyntaxError(\"could not transfrom to sync function\");\nexport function CallbackToSync(cbCaller, args, ctx) {\n    let ret = {\n        isError: true,\n        error: CB_TO_SYNC_ERROR,\n    };\n    cbCaller.call(ctx, (_ret) => (ret = _ret), ...args);\n    return helper.OpenArg(ret);\n}\n","export const IS_ASYNC_APPLY_FUN_MARKER = Symbol(\"asyncApplyFun\");\nexport const IS_SYNC_APPLY_FUN_MARKER = Symbol(\"syncApplyFun\");\nexport const PROTOCAL_SENDER = Symbol(\"protocalSender\");\n","import { globalSymbolStore, IMPORT_FUN_EXTENDS_SYMBOL, IOB_EFT_Factory_Map, ModelTransfer, refFunctionStaticToStringFactory, } from \"@bfchain/comlink-protocol\";\nimport \"@bfchain/comlink-typings\";\nimport { CallbackToSync } from \"./helper\";\nimport { PROTOCAL_SENDER } from \"./const\";\nconst SENDER_MARKER = Symbol(\"linkInSender\");\nexport class SyncModelTransfer extends ModelTransfer {\n    constructor(core) {\n        super(core);\n        /**\n         * ref fun statis toString\n         */\n        this._rfsts = refFunctionStaticToStringFactory();\n    }\n    _genLinkInSender(port, refId) {\n        const req = (linkIn) => this._reqLinkIn(port, refId, linkIn);\n        const send = (linkIn) => this._sendLinkIn(port, refId, linkIn);\n        return { __marker__: SENDER_MARKER, send, req };\n    }\n    _getDefaultProxyHanlder(sender) {\n        const proxyHandler = {\n            getPrototypeOf: (_target) => sender.req([0 /* GetPrototypeOf */]),\n            setPrototypeOf: (_target, proto) => sender.req([1 /* SetPrototypeOf */, proto]),\n            isExtensible: (target) => sender.req([2 /* IsExtensible */]),\n            preventExtensions: (_target) => sender.req([3 /* PreventExtensions */]),\n            getOwnPropertyDescriptor: (_target, prop) => sender.req([\n                4 /* GetOwnPropertyDescriptor */,\n                prop,\n            ]),\n            has: (_target, prop) => sender.req([5 /* Has */]),\n            /**导入子模块 */\n            get: (_target, prop, _reciver) => \n            // console.log(\"get\", prop),\n            sender.req([6 /* Get */, prop]),\n            /**发送 set 操作 */\n            set: (_target, prop, value, _receiver) => sender.req([7 /* Set */, prop, value]),\n            deleteProperty: (_target, prop) => sender.req([8 /* DeleteProperty */, prop]),\n            defineProperty: (_target, prop, attr) => sender.req([9 /* DefineProperty */, prop, attr]),\n            ownKeys: (_target) => sender.req([10 /* OwnKeys */]),\n            apply: (_target, thisArg, argArray) => sender.req([11 /* Apply */, thisArg, ...argArray]),\n            construct: (_target, argArray, newTarget) => sender.req([12 /* Construct */, newTarget, ...argArray]),\n        };\n        return proxyHandler;\n    }\n    /**打包指令 */\n    _pkgLinkIn(targetId, linkIn, hasOut) {\n        const { transfer } = this.core;\n        return transfer.linkObj2TransferableBinary({\n            type: 2 /* In */,\n            // reqId,\n            targetId,\n            in: linkIn.map((a) => CallbackToSync(transfer.Any2InOutBinary, [a], transfer)),\n            hasOut,\n        });\n    }\n    _reqLinkIn(port, targetId, linkIn) {\n        const { transfer } = this.core;\n        const tb = this._pkgLinkIn(targetId, linkIn, true);\n        /// 执行请求\n        const bin = CallbackToSync(port.req, [tb], port);\n        /// 处理请求\n        const linkObj = transfer.transferableBinary2LinkObj(bin);\n        if (linkObj.type !== 3 /* Out */) {\n            throw new TypeError();\n        }\n        if (linkObj.isThrow) {\n            const err_iob = linkObj.out.slice().pop();\n            const err = err_iob && transfer.InOutBinary2Any(err_iob);\n            throw err;\n        }\n        const res_iob = linkObj.out.slice().pop();\n        const res = res_iob && transfer.InOutBinary2Any(res_iob);\n        return res;\n    }\n    _sendLinkIn(port, targetId, linkIn) {\n        const { transfer } = this.core;\n        const tb = transfer.linkObj2TransferableBinary({\n            type: 2 /* In */,\n            // reqId,\n            targetId,\n            in: linkIn.map((a) => CallbackToSync(transfer.Any2InOutBinary, [a], transfer)),\n            hasOut: false,\n        });\n        port.send(tb);\n    }\n    /**\n     * 主动生成引用代理\n     * @param port\n     * @param refId\n     */\n    _createImportByRefId(port, refId) {\n        const refHook = this._createImportRefHook(port, refId);\n        const source = refHook.getSource();\n        if (refHook.type === \"object\") {\n            const proxyHanlder = refHook.getProxyHanlder();\n            const proxy = new Proxy(source, proxyHanlder);\n            return proxy;\n        }\n        return source;\n    }\n    getLinkInSenderByProxy(obj) {\n        if (obj) {\n            const sender = obj[PROTOCAL_SENDER];\n            if (sender.__marker__ === SENDER_MARKER) {\n                return sender;\n            }\n        }\n    }\n    _createImportRefHook(port, refId) {\n        const refExtends = this.core.importStore.idExtendsStore.get(refId);\n        if (!refExtends) {\n            throw new ReferenceError();\n        }\n        let ref;\n        if (refExtends.type === 0 /* Function */) {\n            const factory = IOB_EFT_Factory_Map.get(refExtends.funType);\n            if (!factory) {\n                throw new TypeError();\n            }\n            const sourceFun = factory.factory();\n            const funRef = {\n                type: \"object\",\n                getSource: () => sourceFun,\n                getProxyHanlder: () => {\n                    const sender = this._genLinkInSender(port, refId);\n                    const defaultProxyHanlder = this._getDefaultProxyHanlder(sender);\n                    const functionProxyHanlder = {\n                        ...defaultProxyHanlder,\n                        get: (target, prop, receiver) => {\n                            if (prop === \"name\") {\n                                return refExtends.name;\n                            }\n                            if (prop === \"length\") {\n                                return refExtends.length;\n                            }\n                            //#region 自定义属性\n                            if (prop === IMPORT_FUN_EXTENDS_SYMBOL) {\n                                return refExtends;\n                            }\n                            if (prop === PROTOCAL_SENDER) {\n                                return sender;\n                            }\n                            //#endregion\n                            //#region 静态的toString模式下的本地模拟\n                            /**\n                             * 本地模拟的toString，constructor和protoype等等属性都没有绑定远程\n                             * 这里纯粹是为了加速，模拟远端的返回，可以不用\n                             * @TODO 配置成可以可选模式\n                             */\n                            if (prop === \"toString\" &&\n                                refExtends.toString.mode === 1 /* static */) {\n                                return this._rfsts;\n                            }\n                            //#endregion\n                            return defaultProxyHanlder.get(target, prop, receiver);\n                        },\n                    };\n                    return functionProxyHanlder;\n                },\n            };\n            ref = funRef;\n        }\n        else if (refExtends.type === 1 /* Object */) {\n            const sourceObj = {};\n            const objRef = {\n                type: \"object\",\n                getSource: () => sourceObj,\n                getProxyHanlder: () => {\n                    const sender = this._genLinkInSender(port, refId);\n                    const defaultProxyHanlder = this._getDefaultProxyHanlder(sender);\n                    /**\n                     * 因为对象一旦被设置状态后，无法回退，所以这里可以直接根据现有的状态来判断对象的可操作性\n                     * @TODO 使用isExtensible isFrozen isSealed来改进\n                     */\n                    const functionProxyHanlder = {\n                        ...defaultProxyHanlder,\n                        get: (target, prop, receiver) => {\n                            //#region 自定义属性\n                            if (prop === PROTOCAL_SENDER) {\n                                return sender;\n                            }\n                            //#endregion\n                            return defaultProxyHanlder.get(target, prop, receiver);\n                        },\n                        set(target, prop, value, receiver) {\n                            /**目前如果要实现判断是insert还是update，就要基于已经知道有多少的属性来推断，这方面还需要考虑 ArrayLike 的优化\n                             * 这一切可能要做成缓存的模式，缓存被禁止的属性\n                             * @TODO 如果是 不能add 当 可以update 的模式，就要收集哪些是不能add的，之后就要直接在本地禁止\n                             */\n                            if ((refExtends.status & 2 /* update */) === 0) {\n                                return false;\n                            }\n                            return defaultProxyHanlder.set(target, prop, value, receiver);\n                        },\n                        deleteProperty(target, prop) {\n                            if ((refExtends.status & 4 /* delete */) !== 0) {\n                                return defaultProxyHanlder.deleteProperty(target, prop);\n                            }\n                            return false;\n                        },\n                    };\n                    return functionProxyHanlder;\n                },\n            };\n            ref = objRef;\n        }\n        else if (refExtends.type === 2 /* Symbol */) {\n            let sourceSym;\n            if (refExtends.global) {\n                const globalSymInfo = globalSymbolStore.get(refExtends.description);\n                if (!globalSymInfo) {\n                    throw new TypeError();\n                }\n                sourceSym = globalSymInfo.sym;\n            }\n            else {\n                sourceSym = refExtends.unique\n                    ? Symbol.for(refExtends.description)\n                    : Symbol(refExtends.description);\n            }\n            const symRef = {\n                type: \"primitive\",\n                getSource: () => sourceSym,\n            };\n            ref = symRef;\n        }\n        if (!ref) {\n            throw new TypeError();\n        }\n        return ref;\n    }\n    InOutBinary2Any(bin) {\n        const { port, importStore, exportStore } = this.core;\n        switch (bin.type) {\n            //   case LinkItemType.Default:\n            //     return defaultCtx;\n            case 3 /* Locale */:\n                const loc = exportStore.getObjById(bin.locId) || exportStore.getSymById(bin.locId);\n                if (!loc) {\n                    throw new ReferenceError();\n                }\n                return loc;\n            case 2 /* Ref */:\n            case 1 /* RemoteSymbol */:\n                /// 读取缓存中的应用对象\n                let cachedProxy = importStore.getProxyById(bin.refId);\n                if (cachedProxy === undefined) {\n                    // 保存引用信息\n                    importStore.idExtendsStore.set(bin.refId, bin.extends);\n                    /// 使用导入功能生成对象\n                    cachedProxy = this._createImportByRefId(port, bin.refId);\n                    /// 缓存对象\n                    importStore.saveProxyId(cachedProxy, bin.refId);\n                }\n                return cachedProxy;\n            case 0 /* Clone */:\n                return bin.data;\n        }\n        throw new TypeError();\n    }\n}\n","import { ComlinkCore } from \"@bfchain/comlink-core\";\nimport { getFunctionExportDescription, IOB_EFT_Factory_Map, getFunctionType, } from \"@bfchain/comlink-protocol\";\nimport \"@bfchain/comlink-typings\";\nimport { CallbackToSync } from \"./helper\";\nimport { IS_ASYNC_APPLY_FUN_MARKER, IS_SYNC_APPLY_FUN_MARKER } from \"./const\";\nimport { SyncModelTransfer } from \"./SyncModelTransfer\";\nexport class ComlinkSync extends ComlinkCore {\n    constructor(port, name) {\n        super(port, name);\n        this.transfer = new SyncModelTransfer(this);\n        this._syncWM = new WeakMap();\n        this._asyncWM = new WeakMap();\n    }\n    // /**\n    //  * ref fun statis toString\n    //  */\n    // private _rfsts = refFunctionStaticToStringFactory();\n    $getEsmReflectHanlder(opeartor) {\n        const hanlder = super.$getEsmReflectHanlder(opeartor);\n        if (opeartor === 11 /* Apply */ || opeartor === 19 /* SyncApply */) {\n            const applyHanlder = (target, args) => {\n                if (target === Function.prototype.toString) {\n                    const ctx = args[0];\n                    const exportDescriptor = getFunctionExportDescription(ctx);\n                    /// 保护源码\n                    if (!exportDescriptor.showSourceCode) {\n                        // console.log(\"get to string from remote\");\n                        return IOB_EFT_Factory_Map.get(getFunctionType(ctx)).toString({ name: ctx.name });\n                    }\n                }\n                return hanlder.fun(target, args);\n            };\n            return { type: hanlder.type, fun: applyHanlder };\n        }\n        return hanlder;\n    }\n    import(key = \"default\") {\n        const importModule = CallbackToSync(this.$getImportModule, [], this);\n        return Reflect.get(importModule, key);\n    }\n    importAsSync(key = \"default\") {\n        return this.asyncToSync(this.import(key));\n    }\n    asyncToSync(fun) {\n        if (typeof fun !== \"function\") {\n            throw new TypeError();\n        }\n        if (Reflect.get(fun, IS_ASYNC_APPLY_FUN_MARKER)) {\n            return fun;\n        }\n        let syncFun = this._syncWM.get(fun);\n        if (!syncFun) {\n            const sender = this.transfer.getLinkInSenderByProxy(fun);\n            if (!sender) {\n                throw new TypeError();\n            }\n            syncFun = new Proxy(fun, {\n                get(_target, prop, r) {\n                    if (prop === IS_ASYNC_APPLY_FUN_MARKER) {\n                        return true;\n                    }\n                    return Reflect.get(fun, prop, r);\n                },\n                apply: (_target, thisArg, argArray) => {\n                    return sender.req([19 /* SyncApply */, thisArg, ...argArray]);\n                },\n            });\n            this.importStore.backupProxyId(syncFun, this.importStore.getProxy(fun).id);\n            this._syncWM.set(fun, syncFun);\n        }\n        return syncFun;\n    }\n    importAsAsync(key = \"default\") {\n        return this.syncToAsync(this.import(key));\n    }\n    syncToAsync(fun) {\n        if (typeof fun !== \"function\") {\n            throw new TypeError();\n        }\n        if (Reflect.get(fun, IS_SYNC_APPLY_FUN_MARKER)) {\n            return fun;\n        }\n        let asyncFun = this._asyncWM.get(fun);\n        if (!asyncFun) {\n            const sender = this.transfer.getLinkInSenderByProxy(fun);\n            if (!sender) {\n                throw new TypeError();\n            }\n            asyncFun = new Proxy(fun, {\n                get(_target, prop, r) {\n                    if (prop === IS_SYNC_APPLY_FUN_MARKER) {\n                        return true;\n                    }\n                    return Reflect.get(fun, prop, r);\n                },\n                apply: (_target, thisArg, argArray) => {\n                    /// 要使用本地的promise对任务进行包裹，不然对方接下来会进入卡死状态。\n                    return new Promise((resolve, reject) => {\n                        /* 无需返回值，所以走 .send ，这个是异步的，不会造成阻塞 */\n                        sender.send([20 /* AsyncApply */, resolve, reject, thisArg, ...argArray]);\n                    });\n                },\n            });\n            this.importStore.backupProxyId(asyncFun, this.importStore.getProxy(fun).id);\n            this._asyncWM.set(fun, asyncFun);\n        }\n        return asyncFun;\n    }\n}\n","export function bindThis(target, propertyKey, descriptor) {\n    if (!descriptor || typeof descriptor.value !== \"function\") {\n        throw new TypeError(`Only methods can be decorated with @bind. <${propertyKey}> is not a method!`);\n    }\n    return {\n        configurable: true,\n        get() {\n            const bound = descriptor.value.bind(this);\n            Object.defineProperty(this, propertyKey, {\n                value: bound,\n                configurable: true,\n                writable: true,\n            });\n            return bound;\n        },\n    };\n}\n","const CACHE_KEYS_SYMBOL = Symbol(\"CACHE_GETTER_KEYS_STORE\");\nfunction getCacheKeys(protoTarget) {\n    let CACHE_KEYS = Reflect.get(protoTarget, CACHE_KEYS_SYMBOL);\n    if (!CACHE_KEYS) {\n        CACHE_KEYS = new Map();\n        Reflect.set(protoTarget, CACHE_KEYS_SYMBOL, CACHE_KEYS);\n    }\n    return CACHE_KEYS;\n}\nfunction keyGenerator(protoTarget, prop) {\n    const CACHE_KEYS = getCacheKeys(protoTarget);\n    let symbol = CACHE_KEYS.get(prop);\n    if (!symbol) {\n        symbol = Symbol(`[${typeof prop}]${String(prop)}`);\n        CACHE_KEYS.set(prop, symbol);\n    }\n    return symbol;\n}\nexport function cacheGetter(propTarget, prop, descriptor) {\n    if (typeof descriptor.get !== \"function\") {\n        throw new TypeError(`property ${String(prop)} must has an getter function.`);\n    }\n    const source_fun = descriptor.get;\n    const CACHE_VALUE_SYMBOL = keyGenerator(propTarget, prop);\n    const getter = function () {\n        if (CACHE_VALUE_SYMBOL in this) {\n            return this[CACHE_VALUE_SYMBOL].value;\n        }\n        else {\n            const value = source_fun.call(this);\n            const cacheValue = {\n                target: this,\n                value,\n                sourceFun: source_fun,\n            };\n            this[CACHE_VALUE_SYMBOL] = cacheValue;\n            if (descriptor.set === undefined) {\n                try {\n                    Object.defineProperty(this, prop, {\n                        value,\n                        writable: false,\n                        configurable: true,\n                        enumerable: descriptor.enumerable,\n                    });\n                }\n                catch (err) {\n                    console.error(err);\n                }\n            }\n            return value;\n        }\n    };\n    Reflect.set(getter, \"source_fun\", source_fun);\n    descriptor.get = getter;\n    return descriptor;\n}\nexport function cleanGetterCache(target, prop) {\n    const CACHE_KEYS = getCacheKeys(target);\n    if (CACHE_KEYS.has(prop) === false) {\n        return true;\n    }\n    const CACHE_VALUE_SYMBOL = CACHE_KEYS.get(prop);\n    return _cleanGetterCache(target, prop, CACHE_VALUE_SYMBOL);\n}\nexport function cleanAllGetterCache(target) {\n    const CACHE_KEYS = getCacheKeys(target);\n    for (const [prop, symbol] of CACHE_KEYS) {\n        _cleanGetterCache(target, prop, symbol);\n    }\n}\nfunction _cleanGetterCache(target, prop, CACHE_VALUE_SYMBOL) {\n    const cacheValue = Reflect.get(target, CACHE_VALUE_SYMBOL);\n    if (cacheValue === undefined) {\n        return true;\n    }\n    if (Reflect.deleteProperty(cacheValue.target, CACHE_VALUE_SYMBOL) === false) {\n        return false;\n    }\n    Reflect.deleteProperty(cacheValue.target, prop);\n    return true;\n}\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nimport { bindThis } from \"./bindThis\";\nexport class PropArrayHelper {\n    constructor(pid = Math.random()\n        .toString(36)\n        .substr(2)) {\n        this.pid = pid;\n        this.CLASS_PROTO_ARRAYDATA_POOL = new Map();\n        this.PA_ID_KEY = Symbol(`@PAID:${this.pid}`);\n        this.PA_ID_VALUE = 0;\n    }\n    get(target, key) {\n        var res = new Set();\n        const CLASS_PROTO_ARRAYDATA = this.CLASS_PROTO_ARRAYDATA_POOL.get(key);\n        if (CLASS_PROTO_ARRAYDATA) {\n            do {\n                if (target.hasOwnProperty(this.PA_ID_KEY)) {\n                    const arr_data = CLASS_PROTO_ARRAYDATA.get(target[this.PA_ID_KEY]);\n                    if (arr_data) {\n                        for (var item of arr_data) {\n                            res.add(item);\n                        }\n                    }\n                }\n            } while ((target = Object.getPrototypeOf(target)));\n        }\n        return res;\n    }\n    add(target, key, value) {\n        var CLASS_PROTO_ARRAYDATA = this.CLASS_PROTO_ARRAYDATA_POOL.get(key);\n        if (!CLASS_PROTO_ARRAYDATA) {\n            CLASS_PROTO_ARRAYDATA = new Map();\n            this.CLASS_PROTO_ARRAYDATA_POOL.set(key, CLASS_PROTO_ARRAYDATA);\n        }\n        const pa_id = target.hasOwnProperty(this.PA_ID_KEY)\n            ? target[this.PA_ID_KEY]\n            : (target[this.PA_ID_KEY] = Symbol(`@PAID:${this.pid}#${this.PA_ID_VALUE++}`));\n        var arr_data = CLASS_PROTO_ARRAYDATA.get(pa_id);\n        if (!arr_data) {\n            arr_data = [value];\n            CLASS_PROTO_ARRAYDATA.set(pa_id, arr_data);\n        }\n        else {\n            arr_data.push(value);\n        }\n    }\n    remove(target, key, value) {\n        const CLASS_PROTO_ARRAYDATA = this.CLASS_PROTO_ARRAYDATA_POOL.get(key);\n        if (!CLASS_PROTO_ARRAYDATA) {\n            return;\n        }\n        do {\n            if (!target.hasOwnProperty(this.PA_ID_KEY)) {\n                break;\n            }\n            const pa_id = target[this.PA_ID_KEY];\n            var arr_data = CLASS_PROTO_ARRAYDATA.get(pa_id);\n            if (!arr_data) {\n                return;\n            }\n            const index = arr_data.indexOf(value);\n            if (index !== -1) {\n                arr_data.splice(index, 1);\n                return;\n            }\n        } while ((target = Object.getPrototypeOf(target)));\n    }\n}\n__decorate([\n    bindThis,\n    __metadata(\"design:type\", Function),\n    __metadata(\"design:paramtypes\", [Object, Object]),\n    __metadata(\"design:returntype\", void 0)\n], PropArrayHelper.prototype, \"get\", null);\n__decorate([\n    bindThis,\n    __metadata(\"design:type\", Function),\n    __metadata(\"design:paramtypes\", [Object, Object, Object]),\n    __metadata(\"design:returntype\", void 0)\n], PropArrayHelper.prototype, \"add\", null);\n__decorate([\n    bindThis,\n    __metadata(\"design:type\", Function),\n    __metadata(\"design:paramtypes\", [Object, Object, Object]),\n    __metadata(\"design:returntype\", void 0)\n], PropArrayHelper.prototype, \"remove\", null);\n","export var THROTTLE_WRAP_PLOT;\n(function (THROTTLE_WRAP_PLOT) {\n    THROTTLE_WRAP_PLOT[THROTTLE_WRAP_PLOT[\"WAIT_RESULT_RETURN\"] = 0] = \"WAIT_RESULT_RETURN\";\n    THROTTLE_WRAP_PLOT[THROTTLE_WRAP_PLOT[\"NO_WAIT_EXEC_TIME\"] = 1] = \"NO_WAIT_EXEC_TIME\";\n})(THROTTLE_WRAP_PLOT || (THROTTLE_WRAP_PLOT = {}));\nexport function throttleWrap(ms = 1000, plot = THROTTLE_WRAP_PLOT.WAIT_RESULT_RETURN) {\n    return function (target, name, descriptor) {\n        const source_fun = descriptor.value;\n        let run_lock;\n        descriptor.value = async function lock(...args) {\n            if (run_lock) {\n                run_lock = new Promise((resolve, reject) => {\n                    setTimeout(() => {\n                        const res = source_fun.apply(this, args);\n                        if (plot === THROTTLE_WRAP_PLOT.WAIT_RESULT_RETURN) {\n                            res.then(resolve, reject).finally(() => {\n                                run_lock = undefined;\n                            });\n                        }\n                        else if (plot === THROTTLE_WRAP_PLOT.NO_WAIT_EXEC_TIME) {\n                            resolve(res);\n                            run_lock = undefined;\n                        }\n                        else {\n                            throw new SyntaxError(`No support throttleWrap plot:${THROTTLE_WRAP_PLOT.NO_WAIT_EXEC_TIME}`);\n                        }\n                    }, ms);\n                });\n            }\n            return run_lock;\n        };\n        descriptor.value.source_fun = source_fun;\n        return descriptor;\n    };\n}\n","const NO_ALLOW_PROP = new Set([\n    Symbol.toPrimitive,\n    Symbol.toStringTag,\n    Symbol.hasInstance,\n    Symbol.species,\n    /// 不能直接支持Symbol.iterator，只能用Symbol.asyncIterator来替代Symbol.iterator\n    Symbol.iterator,\n    // Symbol.asyncIterator,\n    Symbol.isConcatSpreadable,\n    Symbol.match,\n    Symbol.matchAll,\n    Symbol.replace,\n    Symbol.search,\n    Symbol.split,\n]);\nconst __THEN_DISABLED__ = new WeakSet();\nexport function createHolderProxyHanlder(holderReflect) {\n    const proxyHanlder = {\n        getPrototypeOf: () => {\n            return null;\n        },\n        setPrototypeOf: () => {\n            throw new Error(\"no support AsyncReflect.setPrototypeOf\");\n            // return false;\n        },\n        isExtensible: () => {\n            throw new Error(\"no support AsyncReflect.isExtensible\");\n        },\n        preventExtensions: () => {\n            throw new Error(\"no support AsyncReflect.preventExtensions\");\n        },\n        getOwnPropertyDescriptor: () => {\n            throw new Error(\"no support AsyncReflect.getOwnPropertyDescriptor\");\n        },\n        defineProperty: () => {\n            throw new Error(\"no support AsyncReflect.defineProperty\");\n        },\n        ownKeys: () => {\n            throw new Error(\"no support AsyncReflect.ownKeys\");\n        },\n        has: () => {\n            throw new Error(\"no support AsyncReflect.has\");\n        },\n        /**导入子模块 */\n        get: (_target, prop, r) => {\n            // 禁止支持一些特定的symbol\n            if (NO_ALLOW_PROP.has(prop)) {\n                return;\n            }\n            if (prop === \"then\") {\n                /// 一次性\n                if (__THEN_DISABLED__.delete(holderReflect)) {\n                    return;\n                }\n                return (resolve, reject) => {\n                    holderReflect.toValueSync((ret) => {\n                        if (ret.isError) {\n                            return reject(ret.error);\n                        }\n                        if (isHolder(ret.data)) {\n                            /// 如果是一个远端对象\n                            const thenFun = holderReflect.assetHolder(\"then\");\n                            thenFun.Operator_typeOfHolder().toValueSync((typeNameRet) => {\n                                if (typeNameRet.isError) {\n                                    return reject(typeNameRet.error);\n                                }\n                                if (typeNameRet.data === \"function\") {\n                                    thenFun\n                                        .applyHolder(holderReflect.toHolder(), [resolve, reject])\n                                        .toValueSync(() => {\n                                        // 这个promise没人捕捉，也不需要捕捉\n                                    });\n                                }\n                                else {\n                                    /// 下面的resolve会导致再次触发then，所以这里要一次性进行then禁用\n                                    __THEN_DISABLED__.add(holderReflect);\n                                    resolve(ret.data);\n                                }\n                            });\n                        }\n                        else {\n                            /// 如果是一个本地对象\n                            if (ret.data && typeof ret.data[\"then\"] === \"function\") {\n                                // 这个promise没人捕捉，也不需要捕捉\n                                ret.data.then(resolve, reject);\n                            }\n                            else {\n                                resolve(ret.data);\n                            }\n                        }\n                    });\n                };\n            }\n            /**迭代器的支持 */\n            if (prop === Symbol.asyncIterator) {\n                return async function* () {\n                    if (await holderReflect.has(Symbol.asyncIterator)) {\n                        yield* holderReflect.asyncIterator();\n                    }\n                    else {\n                        yield* holderReflect.iterator();\n                    }\n                };\n            }\n            return holderReflect.assetHolder(prop).toAsyncValue();\n        },\n        /**发送 set 操作 */\n        set: (_target, prop, value, receiver) => {\n            const setHolderReflect = holderReflect.setHolder(prop, value);\n            let res = true;\n            setHolderReflect.toValueSync((ret) => {\n                if (ret.isError === false) {\n                    res = ret.data;\n                }\n            });\n            return res;\n        },\n        deleteProperty: (target, prop) => {\n            const setHolderReflect = holderReflect.deletePropertyHolder(prop);\n            let res = true;\n            setHolderReflect.toValueSync((ret) => {\n                if (ret.isError === false) {\n                    res = ret.data;\n                }\n            });\n            return res;\n        },\n        apply: (_target, thisArg, argArray) => {\n            const applyHolderReflect = holderReflect.applyHolder(thisArg, argArray);\n            applyHolderReflect.toValueSync(() => {\n                ///强行调取触发指令发送\n            });\n            return applyHolderReflect.toAsyncValue();\n        },\n        construct: (_target, argArray, newTarget) => {\n            const constructHolderReflect = holderReflect.constructHolder(argArray, newTarget);\n            constructHolderReflect.toValueSync(() => {\n                ///强行调取触发指令发送\n            });\n            return constructHolderReflect.toAsyncValue();\n        },\n    };\n    return proxyHanlder;\n}\nconst __HOLDER_REFLECT_WM__ = new WeakMap();\nconst __REFLECT_HOLDER_WM__ = new WeakMap();\nexport function getHolder(holderReflect) {\n    let holder = __REFLECT_HOLDER_WM__.get(holderReflect);\n    if (holder === undefined) {\n        holder = new Proxy(Function(`return function ${holderReflect.name}(){}`)(), createHolderProxyHanlder(holderReflect));\n        __HOLDER_REFLECT_WM__.set(holder, holderReflect);\n        __REFLECT_HOLDER_WM__.set(holderReflect, holder);\n    }\n    return holder;\n}\nexport function isHolder(target) {\n    return __HOLDER_REFLECT_WM__.has(target);\n}\nexport function getHolderReflect(target) {\n    return __HOLDER_REFLECT_WM__.get(target);\n}\n","import { helper } from \"@bfchain/comlink-core\";\nexport function CallbackToAsync(cbCaller, args, ctx) {\n    let syncRet;\n    /// 默认是同步模式\n    let syncResolve = (data) => {\n        syncRet = {\n            isError: false,\n            data,\n        };\n    };\n    let syncReject = (error) => {\n        syncRet = {\n            isError: true,\n            error,\n        };\n    };\n    try {\n        /// 执行，并尝试同步\n        cbCaller.call(ctx, (ret) => {\n            if (ret.isError) {\n                syncReject(ret.error);\n            }\n            else {\n                syncResolve(ret.data);\n            }\n        }, ...args);\n    }\n    catch (err) {\n        syncReject(err);\n    }\n    /// 得到及时的响应，直接返回\n    if (syncRet !== undefined) {\n        return helper.OpenArg(syncRet);\n    }\n    /// 没有得到及时的响应，进入异步模式\n    return new Promise((resolve, reject) => {\n        syncResolve = resolve;\n        syncReject = reject;\n    });\n}\n/**\n * ## 强泛型定义的bind实现\n * 这种写法很骚，因为一共定义了两套泛型，一套是由传入的cbCaller提供，一套由返回后，外界的调用者提供\n * 而cbCaller因为被夹在中间，要用于满足外界调用者的类型定义，所以在内部不得不any化\n *\n * ---\n * 但是这种推导也是**有条件的**\n * 举个例子:\n * ```ts\n * cbCaller = <A1>(cb: BFChainComlink.Callback<Result<A1>>, arg1: A1) => void\n * type Result<T> = ...\n * ```\n * 在上面这个例子中,终点在于 `Result<T>`，\n * 在这里 `R = Result<T>`， 同时 `R2 extends R`。\n * 所以当我们要用R2推导出R的时候， T此时就是由外部输入。\n *\n * 此时如果我们是这样定义 `type Result<T extends ...>` 就会可能出现问题。\n * 比如：\n * ```ts\n * cbCaller = <A1 extends keyof T>(cb: BFChainComlink.Callback<Result<T, A1>>, arg1: A1) => void\n * type Result<T, K extends keyof T> = T[K]\n * ```\n * 因为我们把原本有关系的 `Result<T,A1>` 和 `A1`，分解成了`R`与`ARGS`两个没有关系的类型。\n * 也就是说此时`R`与`ARGS`分别独立携带了一份`A1`，而`R`的那份`A1`则是由`R2`继承过去，用于接收外界的输入。\n * 也就会导致，当我们使用`R2`来尝试推理`A1`时，就会与`ARGS`携带进来的`A1`发生冲突。\n * 编译器无法认证到底要使用哪一种。\n */\nexport function CallbackToAsyncBind(cbCaller, ctx) {\n    return (...args) => CallbackToAsync(cbCaller, args, ctx);\n}\nexport function isNil(value) {\n    return value === undefined || value === null;\n}\nexport function isNoNilPrimivite(value) {\n    switch (typeof value) {\n        case \"bigint\":\n        case \"boolean\":\n        case \"number\":\n        case \"string\":\n        case \"symbol\":\n            return true;\n    }\n    return false;\n}\n","export class ReflectForbidenMethods {\n    constructor() {\n        // nullOrUndefine: reflectForbidenFactory('')\n        this.deleteProperty = this._factory_NoObject(\"deleteProperty\");\n        this.defineProperty = this._factory_NoObject(\"defineProperty\");\n        this.ownKeys = this._factory_NoObject(\"ownKeys\");\n        this.has = this._factory_NoObject(\"has\");\n        this.set = this._factory_NoObject(\"set\");\n        this.get = this._factory_NoObject(\"get\");\n        this.getPrototypeOf = this._factory_NoObject(\"getPrototypeOf\");\n        this.isExtensible = this._factory_NoObject(\"isExtensible\");\n        this.preventExtensions = this._factory_NoObject(\"preventExtensions\");\n        this.setPrototypeOf = this._factory_NoObject(\"setPrototypeOf\");\n        this.apply = this._factory(\"apply\", \"[holder ${this.name}] is not a function\");\n        this.construct = this._factory(\"apply\", \"[holder ${this.name}] is not a constructor\");\n        //   nilConvert = this._factory(\n        //     \"deleteProperty\",\n        //     \"Cannot convert ${this.name}(undefined or null) to object\",\n        //   );\n        //   nilSet = this._factory(\n        //     \"defineProperty\",\n        //     \"Cannot set property '${arguments[0]}' of ${this.name}(undefined or null)\",\n        //   );\n        this.nilGet = this._factory(\"defineProperty\", \"Cannot read property '${arguments[0]}' of ${this.name}(undefined or null)\");\n        //   nilIn = this._factory(\n        //     \"has\",\n        //     \"Cannot use 'in' operator to search for '${arguments[0]}' in ${this.name}(undefined or null)\",\n        //   );\n    }\n    _factory(method, errorMessage) {\n        return Function(`return function ${method}Forbiden(){throw new TypeError(\\`${errorMessage}\\`)}`);\n    }\n    _factory_NoObject(method) {\n        return this._factory(method, `Reflect.${method} called on non-object(\\${this.name})`);\n    }\n}\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nimport { helper } from \"@bfchain/comlink-core\";\nimport { globalSymbolStore, IMPORT_FUN_EXTENDS_SYMBOL, refFunctionStaticToStringFactory, } from \"@bfchain/comlink-protocol\";\nimport { isObj } from \"@bfchain/comlink-typings\";\nimport { bindThis, cacheGetter, cleanAllGetterCache, cleanGetterCache, } from \"@bfchain/util-decorator\";\nimport { getHolder, getHolderReflect, isHolder } from \"./Holder\";\nimport { CallbackToAsync, CallbackToAsyncBind, isNil } from \"./helper\";\nimport { ReflectForbidenMethods } from \"./ReflectForbidenMethods\";\nimport \"./const\";\nlet ID_ACC = 0;\n//#region 一些辅助性函数\nconst reflectForbidenMethods = new ReflectForbidenMethods();\nconst refFunctionStaticToString = refFunctionStaticToStringFactory();\n/**要兼容Primitive值 */\nfunction alwaysTrueCallbackCaller(cb) {\n    return cb({ isError: false, data: true });\n}\nfunction alwaysFalseCallbackCaller(cb) {\n    return cb({ isError: false, data: false });\n}\nfunction alwaysUndefinedCallbackCaller(cb) {\n    return cb({ isError: false, data: undefined });\n}\nfunction end(iobCacher) {\n    throw new TypeError(`unknown iobCacher type: ${iobCacher}`);\n}\n//#endregion\nexport class HolderReflect {\n    constructor(linkSenderArgs, \n    // public linkInSender: <R>(\n    //   linkIn: readonly [EmscriptenReflect, ...unknown[]],\n    //   hasOut?: BFChainComlink.HolderReflect<R> | false,\n    // ) => unknown,\n    core) {\n        this.linkSenderArgs = linkSenderArgs;\n        this.core = core;\n        this.id = ID_ACC++;\n        this.name = `holder_${this.id}`;\n        this.staticMode = true;\n    }\n    toHolder() {\n        return getHolder(this);\n    }\n    //#region Holder特有接口\n    toValueSync(cb) {\n        let iobCacher = this._iobCacher;\n        let needSend = false;\n        if (iobCacher === undefined) {\n            needSend = true;\n            iobCacher = this._iobCacher = {\n                type: 0 /* WAITING */,\n                waitter: [],\n            };\n        }\n        if (iobCacher.type === 0 /* WAITING */) {\n            iobCacher.waitter.push((ret) => {\n                try {\n                    helper.OpenArg(ret);\n                    iobCacher = this._iobCacher;\n                    if (!iobCacher || iobCacher.type === 0 /* WAITING */) {\n                        throw new TypeError();\n                    }\n                    this.toValueSync(cb);\n                }\n                catch (error) {\n                    cb({ isError: true, error });\n                }\n            });\n            if (needSend) {\n                const { linkSenderArgs } = this;\n                if (linkSenderArgs.linkIn.length === 0) {\n                    throw new TypeError();\n                }\n                if (linkSenderArgs.refId === undefined) {\n                    throw new TypeError(\"no refId\");\n                }\n                this.core.transfer.sendLinkIn(linkSenderArgs.port, linkSenderArgs.refId, linkSenderArgs.linkIn, this);\n                // this.linkInSender(this.linkIn as readonly [EmscriptenReflect, ...unknown[]], this);\n            }\n            return;\n            // iobCacher = this._iobCacher;\n        }\n        if (iobCacher.type === 2 /* LOCAL */ ||\n            iobCacher.type === 4 /* REMOTE_SYMBOL */) {\n            cb({ isError: false, data: iobCacher.value });\n            return;\n        }\n        if (iobCacher.type === 3 /* REMOTE_REF */) {\n            cb({ isError: false, data: this.toHolder() });\n            return;\n        }\n        if (iobCacher.type === 1 /* THROW */) {\n            this._getCatchedReflect().toValueSync((ret) => {\n                const error = helper.OpenArg(ret);\n                cb({ isError: true, error: error });\n            });\n            return;\n        }\n        end(iobCacher);\n    }\n    get toValue() {\n        return CallbackToAsyncBind(this.toValueSync, this);\n    }\n    toAsyncValue() {\n        const iobCacher = this._iobCacher;\n        if (iobCacher &&\n            (iobCacher.type === 2 /* LOCAL */ ||\n                iobCacher.type === 4 /* REMOTE_SYMBOL */)) {\n            return iobCacher.value;\n        }\n        return this.toHolder();\n    }\n    _getCatchedReflect() {\n        let { _catchedReflect: _catched } = this;\n        if (!_catched) {\n            const { _iobCacher: iobCacher } = this;\n            if ((iobCacher === null || iobCacher === void 0 ? void 0 : iobCacher.type) !== 1 /* THROW */) {\n                throw new Error(\"no an error\");\n            }\n            _catched = new HolderReflect(this.linkSenderArgs, this.core);\n            _catched.bindIOB(iobCacher.cacher.iob);\n        }\n        return _catched;\n    }\n    // private _isError?\n    bindIOB(iob, isError = false, port = this.core.port) {\n        const { _iobCacher: iobCacher } = this;\n        /// 如果已经存在iobCacher，而且不是waiting的状态，那么重复绑定了。注意不能用`iobCacher?.type`\n        if (iobCacher !== undefined && iobCacher.type !== 0 /* WAITING */) {\n            throw new TypeError(\"already bind iob\");\n        }\n        const { exportStore, importStore } = this.core;\n        let remoteIob;\n        let newIobCacher;\n        /// 解析iob，将之定义成local或者remote两种模式\n        switch (iob.type) {\n            case 3 /* Locale */:\n                const loc = exportStore.getObjById(iob.locId) || exportStore.getSymById(iob.locId);\n                if (!loc) {\n                    throw new ReferenceError();\n                }\n                newIobCacher = {\n                    type: 2 /* LOCAL */,\n                    value: loc,\n                    iob,\n                };\n                break;\n            case 0 /* Clone */:\n                newIobCacher = { type: 2 /* LOCAL */, value: iob.data, iob };\n                break;\n            case 2 /* Ref */:\n                remoteIob = iob;\n                newIobCacher = { type: 3 /* REMOTE_REF */, port, iob };\n                break;\n            case 1 /* RemoteSymbol */:\n                remoteIob = iob;\n                let sourceSym;\n                const refExtends = iob.extends;\n                if (refExtends.global) {\n                    const globalSymInfo = globalSymbolStore.get(refExtends.description);\n                    if (!globalSymInfo) {\n                        throw new TypeError();\n                    }\n                    sourceSym = globalSymInfo.sym;\n                }\n                else {\n                    sourceSym = refExtends.unique\n                        ? Symbol.for(refExtends.description)\n                        : Symbol(refExtends.description);\n                }\n                newIobCacher = {\n                    type: 4 /* REMOTE_SYMBOL */,\n                    port,\n                    value: sourceSym,\n                    iob,\n                };\n                break;\n        }\n        if (isError) {\n            newIobCacher = {\n                type: 1 /* THROW */,\n                cacher: newIobCacher,\n            };\n        }\n        this._iobCacher = newIobCacher;\n        if (remoteIob === undefined) {\n            this.linkSenderArgs = {\n                ...this.linkSenderArgs,\n                refId: undefined,\n            };\n        }\n        else {\n            // 保存引用信息\n            importStore.idExtendsStore.set(remoteIob.refId, remoteIob.extends);\n            /// 缓存对象\n            importStore.saveProxyId((isError ? this._getCatchedReflect().toAsyncValue() : this.toAsyncValue()), remoteIob.refId);\n            /// 它是有指令长度的，那么清空指令；对应的，需要重新生成指令发送器\n            this.linkSenderArgs = {\n                ...this.linkSenderArgs,\n                refId: remoteIob.refId,\n                linkIn: [],\n            };\n        }\n        /// 核心属性变更，清理所有getter缓存\n        cleanAllGetterCache(this);\n        iobCacher === null || iobCacher === void 0 ? void 0 : iobCacher.waitter.forEach((cb) => {\n            // try {\n            cb({ isError: false, data: undefined });\n            // } catch (err) {\n            //   console.error(\"uncatch error\", err);\n            // }\n        });\n    }\n    getIOB() {\n        if (this._iobCacher && this._iobCacher.type !== 0 /* WAITING */) {\n            if (this._iobCacher.type === 1 /* THROW */) {\n                return this._iobCacher.cacher.iob;\n            }\n            return this._iobCacher.iob;\n        }\n    }\n    isBindedIOB() {\n        const { _iobCacher } = this;\n        if (_iobCacher && _iobCacher.type !== 0 /* WAITING */) {\n            return true;\n        }\n        return false;\n    }\n    waitIOB() {\n        throw new Error(\"Method not implemented.\");\n    }\n    createSubHolder(subHolderLinkIn) {\n        const { linkSenderArgs } = this;\n        /// 从空指令变成单指令\n        if (linkSenderArgs.linkIn.length === 0) {\n            return new HolderReflect({\n                ...linkSenderArgs,\n                linkIn: subHolderLinkIn,\n            }, this.core);\n        }\n        /// 单指令变成多指令\n        if (linkSenderArgs.linkIn[0] !== 18 /* Multi */) {\n            return new HolderReflect({\n                ...linkSenderArgs,\n                linkIn: [\n                    18 /* Multi */,\n                    /// 加入原有的单指令\n                    linkSenderArgs.linkIn.length,\n                    ...linkSenderArgs.linkIn,\n                    /// 加入新的单指令\n                    subHolderLinkIn.length,\n                    ...subHolderLinkIn,\n                ],\n            }, this.core);\n        }\n        /// 维持多指令\n        return new HolderReflect({\n            ...linkSenderArgs,\n            linkIn: [\n                ...linkSenderArgs.linkIn,\n                /// 加入新的单指令\n                subHolderLinkIn.length,\n                ...subHolderLinkIn,\n            ],\n        }, this.core);\n    }\n    _getSubHolderPrimitiveSync(linkIn, cb) {\n        this.createSubHolder(linkIn).toValueSync(cb);\n    }\n    //#endregion\n    //#region Reflect 接口\n    //#region throw\n    throw_binded(cb) {\n        const iobCacher = this._iobCacher;\n        if (iobCacher.type === 2 /* LOCAL */ ||\n            iobCacher.type === 4 /* REMOTE_SYMBOL */) {\n            helper.rejectCallback(cb, iobCacher.value);\n            return;\n        }\n        if (iobCacher.type === 3 /* REMOTE_REF */) {\n            helper.rejectCallback(cb, this._getCatchedReflect().toHolder());\n            return;\n        }\n        end(iobCacher);\n    }\n    // async throw() {\n    //   const err = await this.toValue();\n    //   throw err;\n    //   // throw await this.toHolder().toString();\n    //   // throw new Error(\"Method not implemented.\");\n    // }\n    //#endregion\n    //#region Reflect.apply\n    apply_local(cb, thisArgument, argumentsList) {\n        helper.resolveCallback(cb, Reflect.apply(this._iobCacher\n            .value, thisArgument, argumentsList));\n    }\n    applyHolder(thisArgument, argumentsList) {\n        return this.createSubHolder([\n            11 /* Apply */,\n            thisArgument,\n            ...argumentsList,\n        ]);\n    }\n    apply_remote(cb, thisArgument, argumentsList) {\n        this.applyHolder(thisArgument, argumentsList).toValueSync(cb);\n    }\n    get applyCallback() {\n        const { _iobCacher: iobCacher } = this;\n        if (\n        // 未知，未发送\n        !iobCacher ||\n            // 未知，未返回\n            iobCacher.type === 0 /* WAITING */ ||\n            /// 已知，远端是函数\n            (iobCacher.type === 3 /* REMOTE_REF */ &&\n                iobCacher.iob.type === 2 /* Ref */ &&\n                iobCacher.iob.extends.type === 0 /* Function */)) {\n            return this.apply_remote;\n        }\n        /// 已知，本地函数\n        if (iobCacher.type === 2 /* LOCAL */ && typeof iobCacher.value === \"function\") {\n            return this.apply_local;\n        }\n        /// 其它\n        if (iobCacher.type === 3 /* REMOTE_REF */ ||\n            iobCacher.type === 4 /* REMOTE_SYMBOL */ ||\n            iobCacher.type === 2 /* LOCAL */) {\n            return reflectForbidenMethods.apply;\n        }\n        if (iobCacher.type === 1 /* THROW */) {\n            return this.throw_binded;\n        }\n        /// 类型安全的非return结束\n        end(iobCacher);\n    }\n    get apply() {\n        return CallbackToAsyncBind(this.applyCallback, this);\n    }\n    //#endregion\n    //#region Reflect.construct\n    construct_local(cb, argumentsList, newTarget) {\n        helper.resolveCallback(cb, Reflect.construct(this._iobCacher\n            .value, argumentsList, newTarget));\n    }\n    constructHolder(argumentsList, newTarget) {\n        return this.createSubHolder([\n            12 /* Construct */,\n            newTarget,\n            ...argumentsList,\n        ]);\n    }\n    construct_remote(cb, argumentsList, newTarget) {\n        this.constructHolder(argumentsList, newTarget).toValueSync(cb);\n    }\n    get constructCallback() {\n        const { _iobCacher: iobCacher } = this;\n        if (\n        // 未知，未发送\n        !iobCacher ||\n            // 未知，未返回\n            iobCacher.type === 0 /* WAITING */) {\n            return this.construct_remote;\n        }\n        /// 已知，远端是函数\n        if (iobCacher.type === 3 /* REMOTE_REF */ &&\n            iobCacher.iob.type === 2 /* Ref */ &&\n            iobCacher.iob.extends.type === 0 /* Function */) {\n            if (iobCacher.iob.extends.canConstruct) {\n                return this.construct_remote;\n            }\n            return reflectForbidenMethods.construct;\n        }\n        /// 已知，本地是函数\n        if (iobCacher.type === 2 /* LOCAL */ && typeof iobCacher.value === \"function\") {\n            return this.construct_local;\n        }\n        /// 其它\n        if (iobCacher.type === 3 /* REMOTE_REF */ ||\n            iobCacher.type === 4 /* REMOTE_SYMBOL */ ||\n            iobCacher.type === 2 /* LOCAL */) {\n            return reflectForbidenMethods.apply;\n        }\n        if (iobCacher.type === 1 /* THROW */) {\n            return this.throw_binded;\n        }\n        /// 类型安全的非return结束\n        end(iobCacher);\n    }\n    get construct() {\n        return CallbackToAsyncBind(this.constructCallback, this);\n    }\n    //#endregion\n    //#region Reflect.defineProperty\n    defineProperty_local(cb, propertyKey, attributes) {\n        helper.resolveCallback(cb, Reflect.defineProperty(this._iobCacher.value, propertyKey, attributes));\n    }\n    definePropertyHolder(propertyKey, attributes) {\n        return this.createSubHolder([\n            9 /* DefineProperty */,\n            propertyKey,\n            attributes,\n        ]);\n    }\n    defineProperty_remote(cb, propertyKey, attributes) {\n        return this.definePropertyHolder(propertyKey, attributes).toValueSync(cb);\n    }\n    get definePropertyCallback() {\n        const { _iobCacher: iobCacher } = this;\n        if (\n        // 未知，未发送\n        !iobCacher ||\n            // 未知，未返回\n            iobCacher.type === 0 /* WAITING */) {\n            return this.defineProperty_remote;\n        }\n        /// 已知，本地\n        if (iobCacher.type === 2 /* LOCAL */) {\n            return this.defineProperty_local;\n        }\n        /// 已知，远端\n        /// 远端Symbol对象\n        if (iobCacher.type === 4 /* REMOTE_SYMBOL */) {\n            return reflectForbidenMethods.defineProperty;\n        }\n        /// 远端引用对象\n        if (iobCacher.type === 3 /* REMOTE_REF */) {\n            return this.defineProperty_remote;\n        }\n        if (iobCacher.type === 1 /* THROW */) {\n            return this.throw_binded;\n        }\n        /// 类型安全的非return结束\n        end(iobCacher);\n    }\n    get defineProperty() {\n        return CallbackToAsyncBind(this.definePropertyCallback, this);\n    }\n    //#endregion\n    //#region Reflect.deleteProperty\n    deleteProperty_localObject(cb, propertyKey) {\n        helper.resolveCallback(cb, Reflect.deleteProperty(this._iobCacher.value, propertyKey));\n    }\n    deletePropertyHolder(propertyKey) {\n        return this.createSubHolder([8 /* DeleteProperty */, propertyKey]);\n    }\n    deleteProperty_remote(cb, propertyKey) {\n        this.deletePropertyHolder(propertyKey).toValueSync(cb);\n    }\n    get deletePropertyCallback() {\n        const { _iobCacher: iobCacher } = this;\n        if (\n        // 未知，未发送\n        !iobCacher ||\n            // 未知，未返回\n            iobCacher.type === 0 /* WAITING */ ||\n            /// 已知，远端的非Symbol对象\n            iobCacher.type === 3 /* REMOTE_REF */) {\n            return this.deleteProperty_remote;\n        }\n        /// 已知，本地object\n        if (iobCacher.type === 2 /* LOCAL */) {\n            // object\n            if (isObj(iobCacher.value)) {\n                return this.deleteProperty_localObject;\n            }\n            // 本地 空值 原始值,\n            return reflectForbidenMethods.deleteProperty;\n        }\n        /// 已知，远端Symbol,\n        if (iobCacher.type === 4 /* REMOTE_SYMBOL */) {\n            return reflectForbidenMethods.deleteProperty;\n        }\n        if (iobCacher.type === 1 /* THROW */) {\n            return this.throw_binded;\n        }\n        /// 类型安全的非return结束\n        end(iobCacher);\n    }\n    get deleteProperty() {\n        return CallbackToAsyncBind(this.deletePropertyCallback, this);\n    }\n    //#endregion\n    //#region Reflect.get\n    get_remoteFunction(cb, propertyKey) {\n        const iobExtends = this._iobCacher.iob.extends;\n        /// 自定义属性\n        if (propertyKey === IMPORT_FUN_EXTENDS_SYMBOL) {\n            return helper.resolveCallback(cb, iobExtends);\n        }\n        if (propertyKey === \"name\") {\n            return helper.resolveCallback(cb, iobExtends.name);\n        }\n        if (propertyKey === \"length\") {\n            return helper.resolveCallback(cb, iobExtends.length);\n        }\n        if (propertyKey === \"arguments\" || propertyKey === \"callee\" || propertyKey === \"caller\") {\n            if (iobExtends.isStatic) {\n                return helper.rejectCallback(cb, new TypeError(\"'caller', 'callee', and 'arguments' properties may not be accessed on strict mode functions or the arguments objects for calls to them\"));\n            }\n            else {\n                /**\n                 * @TODO 这里的 arguments 和 caller 应该使用标准规范去实现\n                 * 无法用 await 来获取，需要调用者的堆栈信息来判定是否有权得到相关信息，\n                 */\n                return helper.resolveCallback(cb, null);\n            }\n        }\n        /**\n         * 静态的toString模式下的本地模拟\n         * 本地模拟的toString，constructor和protoype等等属性都没有绑定远程\n         * 这里纯粹是为了加速，模拟远端的返回，可以不用\n         * @TODO 配置成可以可选模式\n         */\n        if (propertyKey === \"toString\" &&\n            iobExtends.toString.mode === 1 /* static */) {\n            return helper.resolveCallback(cb, refFunctionStaticToString);\n        }\n        /**\n         * function.prototype 属性不是只读，所以跳过，使用远端获取\n         * @TODO 改进 BFChainComlink.AsyncUtil.Remote 的规则\n         */\n        return this.get_remote(cb, propertyKey);\n    }\n    get_local(cb, propertyKey) {\n        const iobCacher = this._iobCacher;\n        helper.resolveCallback(cb, Reflect.get(iobCacher.value, propertyKey));\n    }\n    getHolder(propertyKey) {\n        return this.createSubHolder([\n            6 /* Get */,\n            propertyKey,\n        ]);\n    }\n    get_remote(cb, propertyKey) {\n        this.getHolder(propertyKey).toValueSync(cb);\n    }\n    get getCallback() {\n        const { _iobCacher: iobCacher } = this;\n        if (\n        // 未知，未发送\n        !iobCacher ||\n            // 未知，未返回\n            iobCacher.type === 0 /* WAITING */) {\n            return this.get_remote;\n        }\n        /// 已知，远端\n        if (iobCacher.type === 3 /* REMOTE_REF */) {\n            // function对象\n            if (iobCacher.iob.type === 2 /* Ref */ &&\n                iobCacher.iob.extends.type === 0 /* Function */) {\n                return this.get_remoteFunction;\n            }\n            // object\n            return this.get_remote;\n        }\n        /// 已知, 远端Symbol、本地\n        if (iobCacher.type === 4 /* REMOTE_SYMBOL */) {\n            return reflectForbidenMethods.get;\n        }\n        if (iobCacher.type === 2 /* LOCAL */) {\n            if (isObj(iobCacher.value)) {\n                return this.get_local;\n            }\n            return reflectForbidenMethods.get;\n        }\n        if (iobCacher.type === 1 /* THROW */) {\n            return this.throw_binded;\n        }\n        /// 类型安全的非return结束\n        end(iobCacher);\n    }\n    get get() {\n        return CallbackToAsyncBind(this.getCallback, this);\n    }\n    //#endregion\n    //#region Reflect.getOwnPropertyDescriptor\n    getOwnPropertyDescriptor_remoteFunction(cb, propertyKey) {\n        const iobExtends = this._iobCacher.iob.extends;\n        if (propertyKey === \"name\") {\n            return helper.resolveCallback(cb, {\n                value: iobExtends.name,\n                writable: false,\n                enumerable: false,\n                /* 远端的函数名，暂时强制不支持改名 */\n                configurable: false,\n            });\n        }\n        if (propertyKey === \"length\") {\n            return helper.resolveCallback(cb, {\n                value: iobExtends.length,\n                writable: false,\n                enumerable: false,\n                /* 远端的函数名，暂时强制不支持length */\n                configurable: false,\n            });\n        }\n        if (propertyKey === \"arguments\" || propertyKey === \"callee\" || propertyKey === \"caller\") {\n            /**\n             * iobExtends.isStatic === any\n             * @TODO 这里的 arguments 和 caller 应该使用标准规范去实现\n             * 无法用 await 来获取，需要调用者的堆栈信息来判定是否有权得到相关信息\n             */\n            return helper.resolveCallback(cb, undefined);\n        }\n        /**\n         * 静态的toString模式下的本地模拟\n         * 本地模拟的toString，constructor和protoype等等属性都没有绑定远程\n         * 这里纯粹是为了加速，模拟远端的返回，可以不用\n         * @TODO 配置成可以可选模式\n         */\n        if (propertyKey === \"toString\" &&\n            iobExtends.toString.mode === 1 /* static */) {\n            return helper.resolveCallback(cb, {\n                value: refFunctionStaticToString,\n                writable: false,\n                enumerable: false,\n                /* 远端的函数名，强制修改了toString的实现 */\n                configurable: false,\n            });\n        }\n        /**\n         * function.prototype 属性不是只读，所以跳过，使用远端获取\n         * @TODO 改进 BFChainComlink.AsyncUtil.Remote 的规则\n         */\n        return this.getOwnPropertyDescriptor_remote(cb, propertyKey);\n    }\n    getOwnPropertyDescriptor_local(cb, propertyKey) {\n        const iobCacher = this._iobCacher;\n        helper.resolveCallback(cb, Reflect.getOwnPropertyDescriptor(iobCacher.value, propertyKey));\n    }\n    getOwnPropertyDescriptorHolder(propertyKey) {\n        return this.createSubHolder([\n            4 /* GetOwnPropertyDescriptor */,\n            propertyKey,\n        ]);\n    }\n    getOwnPropertyDescriptor_remote(cb, propertyKey) {\n        this.getOwnPropertyDescriptorHolder(propertyKey).toValueSync(cb);\n    }\n    get getOwnPropertyDescriptorCallback() {\n        const { _iobCacher: iobCacher } = this;\n        if (\n        // 未知，未发送\n        !iobCacher ||\n            // 未知，未返回\n            iobCacher.type === 0 /* WAITING */) {\n            return this.getOwnPropertyDescriptor_remote;\n        }\n        if (iobCacher.type === 2 /* LOCAL */) {\n            if (isObj(iobCacher.value)) {\n                return this.getOwnPropertyDescriptor_local;\n            }\n            return alwaysUndefinedCallbackCaller;\n        }\n        if (iobCacher.type === 3 /* REMOTE_REF */) {\n            if (iobCacher.iob.extends.type === 0 /* Function */) {\n                return this.getOwnPropertyDescriptor_remoteFunction;\n            }\n            return this.getOwnPropertyDescriptor_remote;\n        }\n        if (iobCacher.type === 4 /* REMOTE_SYMBOL */) {\n            return alwaysUndefinedCallbackCaller;\n        }\n        if (iobCacher.type === 1 /* THROW */) {\n            return this.throw_binded;\n        }\n        /// 类型安全的非return结束\n        end(iobCacher);\n    }\n    getOwnPropertyDescriptor(propertyKey) {\n        return CallbackToAsync(this.getOwnPropertyDescriptorCallback, [propertyKey], this);\n    }\n    //#endregion\n    //#region getPrototypeOf\n    getPrototypeOf_local(cb) {\n        const iobCacher = this._iobCacher;\n        helper.resolveCallback(cb, Reflect.getPrototypeOf(iobCacher.value));\n    }\n    getPrototypeOfHolder() {\n        return this.createSubHolder([0 /* GetPrototypeOf */]);\n    }\n    getPrototypeOf_remote(cb) {\n        this.getPrototypeOfHolder().toValueSync(cb);\n    }\n    get getPrototypeOfCallback() {\n        const { _iobCacher: iobCacher } = this;\n        if (\n        // 未知，未发送\n        !iobCacher ||\n            // 未知，未返回\n            iobCacher.type === 0 /* WAITING */) {\n            return this.getPrototypeOf_remote;\n        }\n        if (iobCacher.type === 2 /* LOCAL */) {\n            if (isObj(iobCacher.value)) {\n                return this.getPrototypeOf_local;\n            }\n            return reflectForbidenMethods.getPrototypeOf;\n        }\n        if (iobCacher.type === 3 /* REMOTE_REF */ ||\n            /**\n             * 对于远端symbol，虽然本地有一个影子值，但还是要走远端获取\n             */\n            iobCacher.type === 4 /* REMOTE_SYMBOL */) {\n            return this.getPrototypeOf_remote;\n        }\n        if (iobCacher.type === 1 /* THROW */) {\n            return this.throw_binded;\n        }\n        /// 类型安全的非return结束\n        end(iobCacher);\n    }\n    get getPrototypeOf() {\n        return CallbackToAsyncBind(this.getPrototypeOfCallback, this);\n    }\n    //#endregion\n    //#region Reflect.has\n    has_remoteFunction(cb, propertyKey) {\n        /**\n         * 只要是函数（不论是否是箭头函数），就必然有这些属性\n         */\n        if (\n        /// T1 自身属性\n        propertyKey === \"name\" ||\n            propertyKey === \"length\") {\n            return helper.resolveCallback(cb, true);\n        }\n        const iobExtends = this._iobCacher.iob.extends;\n        /**\n         * 被优化过的模式\n         * @TODO 可以提供性能模式，来对export的函数统一进行Object.seal操作\n         */\n        if ((iobExtends.status & 2 /* update */ && iobExtends.instanceOfFunction) !== 0) {\n            if (\n            /// T2 自身属性 / 原型链\n            propertyKey === \"arguments\" ||\n                propertyKey === \"callee\" ||\n                propertyKey === \"caller\" ||\n                /// T3 Function.原型链\n                propertyKey === \"toString\" ||\n                propertyKey === \"constructor\" ||\n                propertyKey === \"apply\" ||\n                propertyKey === \"bind\" ||\n                propertyKey === \"call\" ||\n                propertyKey === Symbol.hasInstance ||\n                /// T3 Object.原型链\n                propertyKey === \"toLocaleString\" ||\n                propertyKey === \"valueOf\" ||\n                propertyKey === \"isPrototypeOf\" ||\n                propertyKey === \"propertyIsEnumerable\" ||\n                propertyKey === \"hasOwnProperty\"\n            /// T4 非标准属性，v8引擎特有\n            // __proto__,__defineGetter__,__defineSetter__,__lookupGetter__,__lookupSetter__\n            ) {\n                return true;\n            }\n        }\n        /// T2 自身属性 / 原型链\n        if (propertyKey === \"arguments\" || propertyKey === \"callee\" || propertyKey === \"caller\") {\n            /// 非严格函数，属于旧版函数，必然有这些属性\n            if (iobExtends.isStatic === false) {\n                return helper.resolveCallback(cb, true);\n            }\n            /// 严格函数，可能被修改过原型链，所以也说不定\n        }\n        return this.has_remote(cb, propertyKey);\n    }\n    has_local(cb, propertyKey) {\n        const iobCacher = this._iobCacher;\n        helper.resolveCallback(cb, Reflect.has(iobCacher.value, propertyKey));\n    }\n    hasHolder(propertyKey) {\n        return this.createSubHolder([5 /* Has */, propertyKey]);\n    }\n    has_remote(cb, propertyKey) {\n        return this.hasHolder(propertyKey).toValueSync(cb);\n    }\n    get hasCallback() {\n        const { _iobCacher: iobCacher } = this;\n        if (\n        // 未知，未发送\n        !iobCacher ||\n            // 未知，未返回\n            iobCacher.type === 0 /* WAITING */) {\n            return this.has_remote;\n        }\n        if (iobCacher.type === 2 /* LOCAL */) {\n            if (isObj(iobCacher.value)) {\n                return this.has_local;\n            }\n            return reflectForbidenMethods.has;\n        }\n        if (iobCacher.type === 3 /* REMOTE_REF */) {\n            if (iobCacher.iob.extends.type === 0 /* Function */) {\n                return this.has_remoteFunction;\n            }\n            return this.has_remote;\n        }\n        if (iobCacher.type === 4 /* REMOTE_SYMBOL */) {\n            /// 远端的symbol和本地symbol行为是一样的，所以使用本地\n            return this.has_local;\n        }\n        if (iobCacher.type === 1 /* THROW */) {\n            return this.throw_binded;\n        }\n        /// 类型安全的非return结束\n        end(iobCacher);\n    }\n    get has() {\n        return CallbackToAsyncBind(this.hasCallback, this);\n    }\n    //#endregion\n    //#region Reflect.isExtensible\n    isExtensible_local(cb) {\n        const iobCacher = this._iobCacher;\n        helper.resolveCallback(cb, Reflect.isExtensible(iobCacher.value));\n    }\n    isExtensibleHolder() {\n        return this.createSubHolder([2 /* IsExtensible */]);\n    }\n    isExtensible_remote(cb) {\n        this.isExtensibleHolder().toValueSync(cb);\n    }\n    get isExtensibleCallback() {\n        const { _iobCacher: iobCacher } = this;\n        if (\n        // 未知，未发送\n        !iobCacher ||\n            // 未知，未返回\n            iobCacher.type === 0 /* WAITING */) {\n            return this.isExtensible_remote;\n        }\n        if (iobCacher.type === 2 /* LOCAL */) {\n            if (isObj(iobCacher.value)) {\n                return this.isExtensible_local;\n            }\n            return reflectForbidenMethods.isExtensible;\n        }\n        if (iobCacher.type === 3 /* REMOTE_REF */) {\n            if (iobCacher.iob.extends.status & 3 /* preventedExtensions */) {\n                return alwaysFalseCallbackCaller;\n            }\n            return this.isExtensible_remote;\n        }\n        if (iobCacher.type === 4 /* REMOTE_SYMBOL */) {\n            /// 远端的symbol和本地symbol行为是一样的，所以使用本地\n            return reflectForbidenMethods.isExtensible;\n        }\n        if (iobCacher.type === 1 /* THROW */) {\n            return this.throw_binded;\n        }\n        /// 类型安全的非return结束\n        end(iobCacher);\n    }\n    get isExtensible() {\n        return CallbackToAsyncBind(this.isExtensibleCallback, this);\n    }\n    //#endregion\n    //#region Reflect.ownKeys\n    ownKeys_local(cb) {\n        const iobCacher = this._iobCacher;\n        helper.resolveCallback(cb, Reflect.ownKeys(iobCacher.value));\n    }\n    ownKeysHolder() {\n        return this.createSubHolder([\n            10 /* OwnKeys */,\n        ]);\n    }\n    ownKeys_remote(cb) {\n        this.ownKeysHolder().toValueSync(cb);\n    }\n    get ownKeysCallback() {\n        const { _iobCacher: iobCacher } = this;\n        if (\n        // 未知，未发送\n        !iobCacher ||\n            // 未知，未返回\n            iobCacher.type === 0 /* WAITING */ ||\n            iobCacher.type === 3 /* REMOTE_REF */) {\n            return this.ownKeys_remote;\n        }\n        if (iobCacher.type === 2 /* LOCAL */) {\n            if (isObj(iobCacher.value)) {\n                return this.ownKeys_local;\n            }\n            return reflectForbidenMethods.ownKeys;\n        }\n        if (iobCacher.type === 4 /* REMOTE_SYMBOL */) {\n            /// 远端的symbol和本地symbol行为是一样的，所以使用本地\n            return reflectForbidenMethods.ownKeys;\n        }\n        if (iobCacher.type === 1 /* THROW */) {\n            return this.throw_binded;\n        }\n        /// 类型安全的非return结束\n        end(iobCacher);\n    }\n    get ownKeys() {\n        return CallbackToAsyncBind(this.ownKeysCallback, this);\n    }\n    //#endregion\n    //#region Reflect.preventExtensions\n    preventExtensions_local(cb) {\n        const iobCacher = this._iobCacher;\n        helper.resolveCallback(cb, Reflect.preventExtensions(iobCacher.value));\n    }\n    preventExtensionsHolder() {\n        return this.createSubHolder([3 /* PreventExtensions */]);\n    }\n    preventExtensions_remote(cb) {\n        this.preventExtensionsHolder().toValueSync(cb);\n    }\n    preventExtensions_onceRemote(cb) {\n        const iobCacher = this._iobCacher;\n        iobCacher.iob.extends.status &= 3 /* preventedExtensions */;\n        cleanGetterCache(this, \"preventExtensionsCallback\");\n        cleanGetterCache(this, \"preventExtensions\");\n        return this.preventExtensions_remote(cb);\n    }\n    get preventExtensionsCallback() {\n        const { _iobCacher: iobCacher } = this;\n        if (\n        // 未知，未发送\n        !iobCacher ||\n            // 未知，未返回\n            iobCacher.type === 0 /* WAITING */) {\n            return this.preventExtensions_remote;\n        }\n        if (iobCacher.type === 3 /* REMOTE_REF */) {\n            /// 严格模式能满足遵守规则的代码\n            if (this.staticMode) {\n                if ((iobCacher.iob.extends.status & 3 /* preventedExtensions */) !== 0) {\n                    /// 如果已经是冻结状态，那么直接返回\n                    return alwaysTrueCallbackCaller;\n                }\n                /// 非冻结状态，那么只需要触发一次也就不需要再触发，也是永久返回true\n                return this.preventExtensions_onceRemote;\n            }\n            /**\n             * 非严格模式，要考虑对方可能是Proxy对象，所以不能以当前的属性状态做判定\n             */\n            return this.preventExtensions_remote;\n        }\n        if (iobCacher.type === 2 /* LOCAL */) {\n            if (isObj(iobCacher.value)) {\n                return this.preventExtensions_local;\n            }\n            return reflectForbidenMethods.preventExtensions;\n        }\n        if (iobCacher.type === 4 /* REMOTE_SYMBOL */) {\n            /// 远端的symbol和本地symbol行为是一样的，所以使用本地\n            return reflectForbidenMethods.preventExtensions;\n        }\n        if (iobCacher.type === 1 /* THROW */) {\n            return this.throw_binded;\n        }\n        /// 类型安全的非return结束\n        end(iobCacher);\n    }\n    get preventExtensions() {\n        return CallbackToAsyncBind(this.preventExtensionsCallback, this);\n    }\n    //#endregion\n    //#region Reflect.set\n    set_local(cb, propertyKey, value) {\n        const iobCacher = this._iobCacher;\n        helper.resolveCallback(cb, Reflect.set(iobCacher.value, propertyKey, value));\n    }\n    setHolder(propertyKey, value) {\n        return this.createSubHolder([7 /* Set */, propertyKey, value]);\n    }\n    set_remote(cb, propertyKey, value) {\n        return this.setHolder(propertyKey, value).toValueSync(cb);\n    }\n    get setCallback() {\n        const { _iobCacher: iobCacher } = this;\n        if (\n        // 未知，未发送\n        !iobCacher ||\n            // 未知，未返回\n            iobCacher.type === 0 /* WAITING */) {\n            return this.set_remote;\n        }\n        if (iobCacher.type === 3 /* REMOTE_REF */) {\n            /// 严格模式能满足遵守规则的代码，如果已经是冻结状态，那么直接返回\n            if (this.staticMode &&\n                (iobCacher.iob.extends.status & 2 /* update */) !== 0) {\n                /// 如果已经是冻结状态，那么直接返回\n                return alwaysFalseCallbackCaller;\n            }\n            return this.set_remote;\n        }\n        if (iobCacher.type === 2 /* LOCAL */) {\n            if (isObj(iobCacher.value)) {\n                return this.set_local;\n            }\n            return reflectForbidenMethods.set;\n        }\n        if (iobCacher.type === 4 /* REMOTE_SYMBOL */) {\n            /// 远端的symbol和本地symbol行为是一样的，所以使用本地\n            return reflectForbidenMethods.set;\n        }\n        if (iobCacher.type === 1 /* THROW */) {\n            return this.throw_binded;\n        }\n        /// 类型安全的非return结束\n        end(iobCacher);\n    }\n    get set() {\n        return CallbackToAsyncBind(this.setCallback, this);\n    }\n    //#endregion\n    setPrototypeOf_local(cb, proto) {\n        const iobCacher = this._iobCacher;\n        helper.resolveCallback(cb, Reflect.setPrototypeOf(iobCacher.value, proto));\n    }\n    setPrototypeOfHolder(proto) {\n        return this.createSubHolder([1 /* SetPrototypeOf */, proto]);\n    }\n    setPrototypeOf_remote(cb, proto) {\n        return this.setPrototypeOfHolder(proto).toValueSync(cb);\n    }\n    get setPrototypeOfCallback() {\n        const { _iobCacher: iobCacher } = this;\n        if (\n        // 未知，未发送\n        !iobCacher ||\n            // 未知，未返回\n            iobCacher.type === 0 /* WAITING */) {\n            return this.setPrototypeOf_remote;\n        }\n        if (iobCacher.type === 3 /* REMOTE_REF */) {\n            /// 严格模式能满足遵守规则的代码，如果已经是冻结状态，那么直接返回\n            if (this.staticMode &&\n                (iobCacher.iob.extends.status & 3 /* preventedExtensions */) !== 0) {\n                /// 如果已经是冻结状态，那么直接返回\n                return alwaysFalseCallbackCaller;\n            }\n            return this.setPrototypeOf_remote;\n        }\n        if (iobCacher.type === 2 /* LOCAL */) {\n            if (isObj(iobCacher.value)) {\n                return this.setPrototypeOf_local;\n            }\n            return reflectForbidenMethods.setPrototypeOf;\n        }\n        if (iobCacher.type === 4 /* REMOTE_SYMBOL */) {\n            /// 远端的symbol和本地symbol行为是一样的，所以使用本地\n            return reflectForbidenMethods.setPrototypeOf;\n        }\n        if (iobCacher.type === 1 /* THROW */) {\n            return this.throw_binded;\n        }\n        /// 类型安全的非return结束\n        end(iobCacher);\n    }\n    get setPrototypeOf() {\n        return CallbackToAsyncBind(this.setPrototypeOfCallback, this);\n    }\n    //#endregion\n    //#region Reflect 拓展接口\n    /**\n     * @WARN 不支持 with 操作符与对应的 Symbol.unscopables\n     */\n    asset_value(cb, propertyKey) {\n        const iobCacher = this._iobCacher;\n        helper.resolveCallback(cb, iobCacher.value[propertyKey]);\n    }\n    assetHolder(propertyKey) {\n        return this.createSubHolder([\n            13 /* Asset */,\n            propertyKey,\n        ]);\n    }\n    asset_remote(cb, propertyKey) {\n        this.assetHolder(propertyKey).toValueSync(cb);\n    }\n    get assetCallback() {\n        const { _iobCacher: iobCacher } = this;\n        if (\n        // 未知，未发送\n        !iobCacher ||\n            // 未知，未返回\n            iobCacher.type === 0 /* WAITING */) {\n            return this.asset_remote;\n        }\n        /// 已知，远端\n        if (iobCacher.type === 3 /* REMOTE_REF */) {\n            // function对象\n            if (iobCacher.iob.type === 2 /* Ref */ &&\n                iobCacher.iob.extends.type === 0 /* Function */) {\n                return this.get_remoteFunction;\n            }\n            // object\n            return this.get_remote;\n        }\n        /// 已知, 远端Symbol、本地\n        if (iobCacher.type === 4 /* REMOTE_SYMBOL */) {\n            return this.asset_value;\n        }\n        if (iobCacher.type === 2 /* LOCAL */) {\n            if (isNil(iobCacher.value)) {\n                return reflectForbidenMethods.nilGet;\n            }\n            return this.asset_value;\n        }\n        if (iobCacher.type === 1 /* THROW */) {\n            return this.throw_binded;\n        }\n        /// 类型安全的非return结束\n        end(iobCacher);\n    }\n    /**\n     * 访问表达式，类似Reflect.get，但支持primitive\n     * @param cb\n     * @param propertyKey\n     */\n    get asset() {\n        return CallbackToAsyncBind(this.assetCallback, this);\n    }\n    /**支持自定义的Symbol.toPrimitive以及Symbol.toStringTag，前者优先级更高 */\n    toPrimitive(hint) { }\n    /**instanceof 的操作符，支持自定义的Symbol.hasInstance */\n    Operator_instanceOf(Ctor) { }\n    Operator_instanceOfHolder(Ctor) {\n        return this.createSubHolder([15 /* Instanceof */, Ctor]);\n    }\n    /**typeof 的操作符*/\n    Operator_typeOf() { }\n    Operator_typeOfHolder() {\n        const typeName = typeof this;\n        return this.createSubHolder([14 /* Typeof */]);\n    }\n    /**delete 的操作符，支持primitive*/\n    Operator_delete() { }\n    /**... 的操作符*/\n    Operator_spread() { }\n    /**in 的操作符，支持自定义的Symbol.species*/\n    Operator_in() { }\n    /**\n     * @TIP 如果未来Emscripten支持《自定义运算符》，那么这里就需要扩展出更多的操作符了，因为这些操作都是只支持同步的。\n     */\n    /**支持自定义的Symbol.iterator，本地可用for await来进行迭代 */\n    async *iterator() {\n        const iterable = (await this.assetHolder(Symbol.iterator).apply(this.toAsyncValue(), []));\n        do {\n            const item = await iterable.next();\n            if (await item.done) {\n                break;\n            }\n            yield item.value;\n        } while (true);\n    }\n    /**支持自定义的Symbol.asyncIterator，本地可用for await来进行迭代 */\n    async *asyncIterator() {\n        const iterable = (await this.assetHolder(Symbol.asyncIterator).apply(this.toAsyncValue(), []));\n        do {\n            const item = await iterable.next();\n            if (await item.done) {\n                break;\n            }\n            yield item.value;\n        } while (true);\n    }\n    /**支持自定义的Symbol.isConcatSpreadable */\n    Array_concat() { }\n    /**支持自定义的Symbol.match */\n    String_match() { }\n    /**支持自定义的Symbol.matchAll */\n    String_matchAll() { }\n    /**支持自定义的Symbol.replace */\n    String_replace() { }\n    /**支持自定义的Symbol.search */\n    String_search() { }\n    /**支持自定义的Symbol.split */\n    String_split() { }\n    Object_assign() { }\n    Object_create() { }\n    Object_defineProperties() { }\n    Object_defineProperty() { }\n    Object_entries() { }\n    Object_freeze() { }\n    Object_fromEntries() { }\n    Object_getOwnPropertyDescriptor() { }\n    Object_getOwnPropertyDescriptors() { }\n    Object_getOwnPropertyNames() { }\n    Object_getOwnPropertySymbols() { }\n    Object_getPrototypeOf() { }\n    Object_is() { }\n    Object_isExtensible() { }\n    Object_isFrozen() { }\n    Object_isSealed() { }\n    Object_keys() { }\n    Object_preventExtensions() { }\n    Object_seal() { }\n    Object_setPrototypeOf() { }\n    Object_values() { }\n    JSON_stringify() {\n        return this.createSubHolder([16 /* JsonStringify */]);\n    }\n    JSON_parse() {\n        return this.createSubHolder([17 /* JsonParse */]);\n    }\n}\nHolderReflect.isHolder = isHolder;\nHolderReflect.getHolderReflect = getHolderReflect;\n__decorate([\n    cacheGetter,\n    __metadata(\"design:type\", Object),\n    __metadata(\"design:paramtypes\", [])\n], HolderReflect.prototype, \"toValue\", null);\n__decorate([\n    cacheGetter,\n    __metadata(\"design:type\", Object),\n    __metadata(\"design:paramtypes\", [])\n], HolderReflect.prototype, \"applyCallback\", null);\n__decorate([\n    cacheGetter,\n    __metadata(\"design:type\", Object),\n    __metadata(\"design:paramtypes\", [])\n], HolderReflect.prototype, \"apply\", null);\n__decorate([\n    cacheGetter,\n    __metadata(\"design:type\", Object),\n    __metadata(\"design:paramtypes\", [])\n], HolderReflect.prototype, \"constructCallback\", null);\n__decorate([\n    cacheGetter,\n    __metadata(\"design:type\", Object),\n    __metadata(\"design:paramtypes\", [])\n], HolderReflect.prototype, \"construct\", null);\n__decorate([\n    cacheGetter,\n    __metadata(\"design:type\", Object),\n    __metadata(\"design:paramtypes\", [])\n], HolderReflect.prototype, \"defineProperty\", null);\n__decorate([\n    cacheGetter,\n    __metadata(\"design:type\", Object),\n    __metadata(\"design:paramtypes\", [])\n], HolderReflect.prototype, \"deleteProperty\", null);\n__decorate([\n    cacheGetter,\n    __metadata(\"design:type\", Object),\n    __metadata(\"design:paramtypes\", [])\n], HolderReflect.prototype, \"get\", null);\n__decorate([\n    cacheGetter,\n    __metadata(\"design:type\", Object),\n    __metadata(\"design:paramtypes\", [])\n], HolderReflect.prototype, \"getPrototypeOf\", null);\n__decorate([\n    cacheGetter,\n    __metadata(\"design:type\", Object),\n    __metadata(\"design:paramtypes\", [])\n], HolderReflect.prototype, \"has\", null);\n__decorate([\n    cacheGetter,\n    __metadata(\"design:type\", Object),\n    __metadata(\"design:paramtypes\", [])\n], HolderReflect.prototype, \"isExtensible\", null);\n__decorate([\n    cacheGetter,\n    __metadata(\"design:type\", Object),\n    __metadata(\"design:paramtypes\", [])\n], HolderReflect.prototype, \"ownKeys\", null);\n__decorate([\n    cacheGetter,\n    __metadata(\"design:type\", Object),\n    __metadata(\"design:paramtypes\", [])\n], HolderReflect.prototype, \"preventExtensionsCallback\", null);\n__decorate([\n    cacheGetter,\n    __metadata(\"design:type\", Object),\n    __metadata(\"design:paramtypes\", [])\n], HolderReflect.prototype, \"preventExtensions\", null);\n__decorate([\n    cacheGetter,\n    __metadata(\"design:type\", Object),\n    __metadata(\"design:paramtypes\", [])\n], HolderReflect.prototype, \"set\", null);\n__decorate([\n    cacheGetter,\n    __metadata(\"design:type\", Object),\n    __metadata(\"design:paramtypes\", [])\n], HolderReflect.prototype, \"setPrototypeOf\", null);\n__decorate([\n    cacheGetter,\n    __metadata(\"design:type\", Object),\n    __metadata(\"design:paramtypes\", [])\n], HolderReflect.prototype, \"asset\", null);\n__decorate([\n    bindThis,\n    __metadata(\"design:type\", Function),\n    __metadata(\"design:paramtypes\", []),\n    __metadata(\"design:returntype\", void 0)\n], HolderReflect.prototype, \"iterator\", null);\n__decorate([\n    bindThis,\n    __metadata(\"design:type\", Function),\n    __metadata(\"design:paramtypes\", []),\n    __metadata(\"design:returntype\", void 0)\n], HolderReflect.prototype, \"asyncIterator\", null);\n","import { ModelTransfer, refFunctionStaticToStringFactory, } from \"@bfchain/comlink-protocol\";\nimport \"@bfchain/comlink-typings\";\nimport { helper } from \"@bfchain/comlink-core\";\nimport { HolderReflect } from \"./HolderReflect\";\nimport { getHolderReflect } from \"./Holder\";\nimport \"./const\";\nexport class AsyncModelTransfer extends ModelTransfer {\n    constructor(core) {\n        super(core);\n        /**\n         * ref fun statis toString\n         */\n        this._rfsts = refFunctionStaticToStringFactory();\n    }\n    /**这里保持使用cb风格，可以确保更好的性能\n     * @TODO 内部的函数也应该尽可能使用cb风格来实现\n     */\n    sendLinkIn(port, targetId, linkIn, hasOut) {\n        const { transfer } = this.core;\n        const doReq = (linkInIob) => {\n            port.req(async (ret) => {\n                const bin = helper.OpenArg(ret);\n                const linkObj = transfer.transferableBinary2LinkObj(bin);\n                if (linkObj.type !== 3 /* Out */) {\n                    throw new TypeError();\n                }\n                if (linkObj.isThrow) {\n                    const err_iob = linkObj.out.slice().pop();\n                    if (!err_iob) {\n                        throw new TypeError();\n                    }\n                    if (hasOut) {\n                        hasOut.bindIOB(err_iob, true);\n                    }\n                    else {\n                        /// 远端传来的异常，本地却没有可以捕捉的对象，协议不对称！\n                        throw err_iob;\n                    }\n                }\n                else if (hasOut) {\n                    const res_iob = linkObj.out.slice().pop();\n                    if (!res_iob) {\n                        throw new TypeError();\n                    }\n                    hasOut.bindIOB(res_iob);\n                }\n            }, transfer.linkObj2TransferableBinary({\n                type: 2 /* In */,\n                // reqId,\n                targetId,\n                in: linkInIob,\n                hasOut: hasOut !== undefined,\n            }));\n        };\n        /// 无参数需要解析，那么直接发送指令\n        if (linkIn.length === 0) {\n            doReq(linkIn);\n        }\n        else {\n            /**结果列表 */\n            const linkInIOB = [];\n            /**结果列表的实际长度 */\n            let linkInIOBLength = 0;\n            /**是否已经完成中断 */\n            let isRejected = false;\n            /// 解析所有的参数\n            for (let index = 0; index < linkIn.length; index++) {\n                const item = linkIn[index];\n                transfer.Any2InOutBinary((ret) => {\n                    if (isRejected) {\n                        return;\n                    }\n                    if (ret.isError) {\n                        isRejected = true;\n                        if (hasOut) {\n                            hasOut.bindIOB({\n                                type: 0 /* Clone */,\n                                data: ret.error,\n                            }, true);\n                        }\n                        else {\n                            throw ret.error;\n                            // console.error(\"uncatch error:\", ret.error);\n                        }\n                        return;\n                    }\n                    /// 保存解析结果\n                    linkInIOB[index] = ret.data;\n                    linkInIOBLength += 1;\n                    /// 完成所有任务，执行指令发送\n                    if (linkInIOBLength === linkIn.length) {\n                        doReq(linkInIOB);\n                    }\n                }, item);\n            }\n        }\n    }\n    /**\n     * 主动生成引用代理\n     * @param port\n     * @param refId\n     */\n    _createHolderByRefId(port, refId, iob) {\n        const holder = this._getHolder(port, refId, iob);\n        return holder.toAsyncValue();\n    }\n    _getHolder(port, refId, iob) {\n        const holder = new HolderReflect({\n            port,\n            refId,\n            linkIn: [],\n        }, this.core);\n        holder.bindIOB(iob);\n        return holder;\n    }\n    // linkInSenderFactory(port: ComlinkProtocol.BinaryPort, refId: number) {\n    //   return <R>(\n    //     linkIn: readonly [EmscriptenReflect, ...unknown[]],\n    //     hasOut?: BFChainComlink.HolderReflect<R> | false,\n    //   ) => this.sendLinkIn(port, refId, linkIn, hasOut);\n    // }\n    Any2InOutBinary(cb, obj) {\n        const reflectHolder = getHolderReflect(obj);\n        if (reflectHolder !== undefined) {\n            const iob = reflectHolder.getIOB();\n            if (!iob) {\n                /// 还没有绑定，那么就等待其绑定完成\n                return reflectHolder.toValueSync((valRet) => {\n                    if (valRet.isError) {\n                        return cb(valRet);\n                    }\n                    this.Any2InOutBinary(cb, obj);\n                });\n                // throw new TypeError(`reflectHolder ${reflectHolder.name} no bind iob`);\n            }\n            if (iob.type === 0 /* Clone */) {\n                obj = iob.data;\n            }\n        }\n        return super.Any2InOutBinary(cb, obj);\n    }\n    InOutBinary2Any(bin) {\n        const { port, importStore, exportStore } = this.core;\n        switch (bin.type) {\n            //   case LinkItemType.Default:\n            //     return defaultCtx;\n            case 3 /* Locale */:\n                const loc = exportStore.getObjById(bin.locId) || exportStore.getSymById(bin.locId);\n                if (!loc) {\n                    throw new ReferenceError();\n                }\n                return loc;\n            case 2 /* Ref */:\n            case 1 /* RemoteSymbol */:\n                /// 读取缓存中的应用对象\n                let cachedHolder = importStore.getProxyById(bin.refId);\n                if (cachedHolder === undefined) {\n                    /// 使用导入功能生成对象\n                    cachedHolder = this._createHolderByRefId(port, bin.refId, bin);\n                }\n                return cachedHolder;\n            case 0 /* Clone */:\n                return bin.data;\n        }\n        throw new TypeError();\n    }\n}\n","import { ComlinkCore } from \"@bfchain/comlink-core\";\nimport \"@bfchain/comlink-typings\";\nimport \"./HolderReflect\";\nimport { CallbackToAsync } from \"./helper\";\nimport { IOB_EFT_Factory_Map, getFunctionType, getFunctionExportDescription, } from \"@bfchain/comlink-protocol\";\nimport { AsyncModelTransfer } from \"./AsyncModelTransfer\";\nexport class ComlinkAsync extends ComlinkCore {\n    constructor(port, name) {\n        super(port, name);\n        this.transfer = new AsyncModelTransfer(this);\n    }\n    wrap(val) {\n        throw new Error(\"Method not implemented.\");\n    }\n    // readonly holderStore = new HolderStore(this.name);\n    $getEsmReflectHanlder(opeartor) {\n        const hanlder = super.$getEsmReflectHanlder(opeartor);\n        if (opeartor === 11 /* Apply */ || opeartor === 19 /* SyncApply */) {\n            const applyHanlder = (target, args) => {\n                if (target === Function.prototype.toString) {\n                    const ctx = args[0];\n                    const exportDescriptor = getFunctionExportDescription(ctx);\n                    /// 保护源码\n                    if (!exportDescriptor.showSourceCode) {\n                        // console.log(\"get to string from remote\");\n                        return IOB_EFT_Factory_Map.get(getFunctionType(ctx)).toString({ name: ctx.name });\n                    }\n                }\n                return hanlder.fun(target, args);\n            };\n            return { type: hanlder.type, fun: applyHanlder };\n        }\n        return hanlder;\n    }\n    async import(key = \"default\") {\n        const importModule = await CallbackToAsync(this.$getImportModule, [], this);\n        return Reflect.get(importModule, key);\n    }\n}\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nimport { cacheGetter, cleanGetterCache } from \"@bfchain/util-decorator\";\nimport \"./const\";\nexport class AtomicsNotifyer {\n    constructor(_port) {\n        this._port = _port;\n        this._icbs = new Map();\n        this._remoteMode = 3 /* UNKNOWN */;\n        this._port.onMessage((data) => {\n            if (data instanceof Array) {\n                for (const index of data) {\n                    const cbs = this._icbs.get(index);\n                    if (cbs !== undefined) {\n                        this._icbs.delete(index);\n                        for (const cb of cbs) {\n                            cb();\n                        }\n                    }\n                }\n            }\n        });\n    }\n    waitAsync(si32, index, value) {\n        return new Promise((resolve) => {\n            this.waitCallback(si32, index, value, resolve);\n        });\n    }\n    waitCallback(si32, index, value, cb) {\n        if (Atomics.load(si32, index) !== value) {\n            return cb();\n        }\n        let cbs = this._icbs.get(index);\n        if (cbs === undefined) {\n            cbs = [cb];\n            this._icbs.set(index, cbs);\n        }\n        else {\n            cbs.push(cb);\n        }\n    }\n    set remoteMode(mode) {\n        if (this._remoteMode !== mode) {\n            this._remoteMode = mode;\n            cleanGetterCache(this, \"notify\");\n        }\n    }\n    get remoteMode() {\n        return this._remoteMode;\n    }\n    get notify() {\n        if (this._remoteMode === 2 /* ASYNC */) {\n            return this._notify_async;\n        }\n        if (this._remoteMode === 1 /* SYNC */) {\n            return this._notify_sync;\n        }\n        return this._notify_unknow;\n    }\n    _notify_unknow(si32, indexs) {\n        this._notify_async(si32, indexs);\n        this._notify_sync(si32, indexs);\n    }\n    _notify_async(si32, indexs) {\n        this._port.postMessage(indexs);\n    }\n    _notify_sync(si32, indexs) {\n        for (const index of indexs) {\n            Atomics.notify(si32, index);\n        }\n    }\n}\n__decorate([\n    cacheGetter,\n    __metadata(\"design:type\", Object),\n    __metadata(\"design:paramtypes\", [])\n], AtomicsNotifyer.prototype, \"notify\", null);\n","export function u8Concat(ABC, u8s) {\n    let totalLen = 0;\n    for (const u8 of u8s) {\n        totalLen += u8.length;\n    }\n    const u8a = new Uint8Array(new ABC(totalLen));\n    let offsetLen = 0;\n    for (const u8 of u8s) {\n        u8a.set(u8, offsetLen);\n        offsetLen += u8.length;\n    }\n    return u8a;\n}\n","export class DataPkg {\n    constructor(name, sab) {\n        this.name = name;\n        this.sab = sab;\n        this.si32 = new Int32Array(this.sab);\n        this.su8 = new Uint8Array(this.sab);\n        this.su16 = new Uint16Array(this.sab);\n    }\n}\n","class U32Reader {\n    constructor() {\n        this._u32 = new Uint32Array(1);\n        this._u8 = new Uint8Array(this._u32.buffer);\n    }\n    setByU8(u8) {\n        this._u8.set(u8);\n        return this;\n    }\n    getU32() {\n        return this._u32[0];\n    }\n}\nexport const u32 = new U32Reader();\n","import \"./const\";\n// import { serialize, deserialize } from \"v8\";\nconst serialize = (data) => {\n    const json = JSON.stringify(data);\n    const u8 = new Uint8Array(json.length);\n    for (let i = 0; i < json.length; i++) {\n        const code = json.charCodeAt(i);\n        if (code > 256) {\n            throw new RangeError(\"\");\n        }\n        u8[i] = code;\n    }\n    return u8;\n};\nconst deserialize = (u8) => {\n    let json = \"\";\n    for (const code of u8) {\n        json += String.fromCharCode(code);\n    }\n    return JSON.parse(json);\n};\nimport { AtomicsNotifyer } from \"./AtomicsNotifyer\";\nimport { u8Concat } from \"./helper\";\nimport { DataPkg } from \"./DataPkg\";\nimport { u32 } from \"./u32\";\nexport class Duplex {\n    constructor(_port, sabs) {\n        this._port = _port;\n        this._notifyer = new AtomicsNotifyer(this._port);\n        this._eventId = new Uint32Array(1);\n        this._chunkCollection = new Map();\n        this.supportModes = new Set();\n        this._cbs = [];\n        // Reflect.set(globalThis, \"duplex\", this);\n        this.supportModes.add(\"async\");\n        this.supportModes.add(\"sync\");\n        const localeDataPkg = new DataPkg(\"locale\", sabs.locale);\n        const remoteDataPkg = new DataPkg(\"remote\", sabs.remote);\n        this._sync = {\n            sabs,\n            localeDataPkg,\n            remoteDataPkg,\n        };\n        _port.onMessage((data) => {\n            if (data instanceof Array) {\n                this._checkRemote();\n            }\n        });\n    }\n    static getPort(duplex) {\n        return duplex._port;\n    }\n    /**发送异步消息 */\n    postAsyncMessage(msg) {\n        this._postMessageCallback((hook) => {\n            this._notifyer.waitCallback(hook.si32, 0 /* SI32_MSG_TYPE */, hook.curMsgType, hook.next);\n        }, (hook) => {\n            this._notifyer.waitCallback(hook.si32, 0 /* SI32_MSG_TYPE */, hook.msgType, hook.next);\n        }, msg);\n    }\n    postSyncMessage(msg) {\n        this._postMessageCallback((hook) => {\n            this._checkRemoteAtomics();\n            // console.debug(threadId, \"+openSAB\");\n            Atomics.wait(hook.si32, 0 /* SI32_MSG_TYPE */, hook.curMsgType);\n            // console.debug(threadId, \"-openSAB\");\n            hook.next();\n        }, (hook) => {\n            this._checkRemoteAtomics();\n            // console.debug(threadId, \"+waitSAB\");\n            // 进入等待\n            Atomics.wait(hook.si32, 0 /* SI32_MSG_TYPE */, hook.msgType);\n            // console.debug(threadId, \"-waitSAB\");\n            hook.next();\n        }, msg);\n    }\n    waitMessage() {\n        do {\n            // 等待对方开始响应\n            Atomics.wait(this._sync.remoteDataPkg.si32, 0 /* SI32_MSG_TYPE */, 0 /* FREE */);\n            // 处理响应的内容\n            const msg = this._checkRemoteAtomics();\n            if (msg) {\n                return msg;\n            }\n        } while (true);\n    }\n    _postMessageCallback(onApplyWrite, onChunkReady, msg) {\n        // console.debug(\"postMessage\", threadId, msg);\n        const msgBinary = this._serializeMsg(msg);\n        const sync = this._sync;\n        const { su8, si32, su16 } = sync.localeDataPkg;\n        // 数据id，用于将数据包和事件进行关联的ID\n        const eventId = this._eventId[0]++;\n        //#region 首先传输数据包\n        {\n            /// 自动分包模式\n            const MSG_MAX_BYTELENGTH = su8.byteLength - 20 /* U8_MSG_DATA_OFFSET */;\n            const chunkCount = Math.ceil(msgBinary.byteLength / MSG_MAX_BYTELENGTH);\n            let chunkId = 0;\n            let msgOffset = 0; // msgBinary.byteLength\n            /**尝试写入 */\n            const tryWriteChunk = () => {\n                if (chunkId >= chunkCount) {\n                    return;\n                }\n                // 申请写入权\n                checkAndApplyWrite();\n            };\n            /**申请写入权 */\n            const checkAndApplyWrite = () => {\n                // 直接申请\n                const cur_msg_type = Atomics.compareExchange(si32, 0 /* SI32_MSG_TYPE */, 0 /* FREE */, 1 /* EVENT */);\n                /// 申请成功\n                if (cur_msg_type === 0 /* FREE */) {\n                    // 开始写入状态\n                    Atomics.store(si32, 1 /* SI32_MSG_STATUS */, 0 /* WRITING */);\n                    doWriteChunk();\n                    return;\n                }\n                // 直接申请失败，转交给外部，让外部去申请\n                onApplyWrite({\n                    si32,\n                    msgType: 1 /* EVENT */,\n                    curMsgType: cur_msg_type,\n                    next: checkAndApplyWrite,\n                });\n            };\n            /**获取写入权后，写入数据 */\n            const doWriteChunk = () => {\n                // 写入消息ID\n                si32[2 /* U32_EVENT_ID_INDEX */] = eventId;\n                // 写入总包数\n                su16[5 /* U16_CHUNK_COUNT_INDEX */] = chunkCount;\n                // 写入包编号\n                su16[6 /* U16_CHUNK_ID_INDEX */] = chunkId;\n                // 取出可以用于发送的数据包\n                const msgChunk = msgBinary.subarray(msgOffset, \n                // 累加偏移量\n                Math.max(msgBinary.byteLength, (msgOffset += MSG_MAX_BYTELENGTH)));\n                // 写入数据包的大小\n                si32[4 /* U32_MSG_CHUNK_SIZE_INDEX */] = msgChunk.byteLength;\n                // 写入数据\n                su8.set(msgChunk, 20 /* U8_MSG_DATA_OFFSET */);\n                // 写入完成\n                Atomics.store(si32, 1 /* SI32_MSG_STATUS */, 1 /* FINISH */);\n                // 广播变更\n                this._notifyer.notify(si32, [0 /* SI32_MSG_TYPE */, 1 /* SI32_MSG_STATUS */]);\n                // 钩子参数\n                const hook = {\n                    msgType: 1 /* EVENT */,\n                    si32,\n                    chunkId,\n                    chunkCount,\n                    next: tryWriteChunk,\n                };\n                // 累加分包ID\n                chunkId++;\n                // 告知外部，写入完成了\n                onChunkReady(hook);\n            };\n            // 开始尝试写入\n            tryWriteChunk();\n        }\n        //#endregion\n    }\n    /**主动检测远端是否发来消息 */\n    _checkRemoteAtomics() {\n        const { remoteDataPkg } = this._sync;\n        /// 如果本地还未收到消息，而且远端的堆栈信息不为空，那么就可以开始处理\n        if (this._needOnMessageAtomics(remoteDataPkg)) {\n            return this._onMessage(remoteDataPkg);\n        }\n    }\n    _checkRemote() {\n        const { remoteDataPkg } = this._sync;\n        /// 如果本地还未收到消息，而且远端的堆栈信息不为空，那么就可以开始处理\n        if (this._needOnMessage(remoteDataPkg)) {\n            return this._onMessage(remoteDataPkg);\n        }\n    }\n    /**是否需要处理消息 */\n    _needOnMessageAtomics(dataPkg) {\n        if (dataPkg.si32[0 /* SI32_MSG_TYPE */] !== 0 /* FREE */) {\n            do {\n                const cur_msg_status = dataPkg.si32[1 /* SI32_MSG_STATUS */];\n                if (cur_msg_status === 1 /* FINISH */) {\n                    break;\n                }\n                // console.debug(threadId, \"+needOnMessage\");\n                Atomics.wait(dataPkg.si32, 1 /* SI32_MSG_STATUS */, cur_msg_status);\n                // console.debug(threadId, \"-needOnMessage\");\n            } while (true);\n            return true;\n        }\n        return false;\n    }\n    /**是否需要处理消息 */\n    _needOnMessage(dataPkg) {\n        return (dataPkg.si32[0 /* SI32_MSG_TYPE */] !== 0 /* FREE */ &&\n            dataPkg.si32[1 /* SI32_MSG_STATUS */] === 1 /* FINISH */);\n    }\n    /**处理消息指令 */\n    _onMessage(dataPkg) {\n        const { si32, su8, su16 } = dataPkg;\n        switch (si32[0 /* SI32_MSG_TYPE */]) {\n            case 1 /* EVENT */:\n                {\n                    /**事件ID */\n                    const eventId = si32[2 /* U32_EVENT_ID_INDEX */];\n                    /**分包的数量 */\n                    const chunkCount = su16[5 /* U16_CHUNK_COUNT_INDEX */];\n                    /**数据包编号*/\n                    const chunkId = su16[6 /* U16_CHUNK_ID_INDEX */];\n                    /**数据包大小 */\n                    const chunkSize = si32[4 /* U32_MSG_CHUNK_SIZE_INDEX */];\n                    /**数据包 */\n                    const chunk = su8.subarray(20 /* U8_MSG_DATA_OFFSET */, 20 /* U8_MSG_DATA_OFFSET */ + chunkSize);\n                    let cachedChunkInfo;\n                    let msgBinary;\n                    /// 单包\n                    if (1 === chunkCount) {\n                        msgBinary = new Uint8Array(chunk);\n                    }\n                    else {\n                        /// 分包\n                        cachedChunkInfo = this._chunkCollection.get(eventId);\n                        if (cachedChunkInfo) {\n                            cachedChunkInfo.set(chunkId, chunk);\n                            /// 如果数据包已经完整了，那么整理出完整的数据包\n                            if (cachedChunkInfo.size === chunkCount) {\n                                // 删除缓存\n                                this._chunkCollection.delete(eventId);\n                                /// 合并分包\n                                const chunkList = [];\n                                /**\n                                 * 这里支持无序传输，如果底层使用WebRTC，可以更节省设备资源\n                                 */\n                                for (const chunkItem of cachedChunkInfo) {\n                                    chunkList[chunkItem[0]] = chunkItem[1];\n                                }\n                                msgBinary = u8Concat(ArrayBuffer, chunkList);\n                            }\n                        }\n                        else {\n                            cachedChunkInfo = new Map();\n                            cachedChunkInfo.set(chunkId, new Uint8Array(chunk));\n                        }\n                    }\n                    // 释放调度\n                    // this._closeSAB(si32);\n                    Atomics.store(si32, 0 /* SI32_MSG_TYPE */, 0 /* FREE */);\n                    this._notifyer.notify(si32, [0 /* SI32_MSG_TYPE */]);\n                    /// 如果有完整的数据包，那么触发事件\n                    if (msgBinary) {\n                        // 触发事件\n                        return this._msgBinaryHandler(msgBinary);\n                    }\n                }\n                break;\n        }\n    }\n    _msgBinaryHandler(msgBinary) {\n        // console.debug(\"onMessage\", threadId, msgBinary);\n        let msg;\n        try {\n            switch (msgBinary[0]) {\n                case 1 /* REQ */:\n                    msg = {\n                        msgType: \"REQ\",\n                        msgId: u32\n                            .setByU8(msgBinary.subarray(1, 5 /* Uint32Array.BYTES_PER_ELEMENT+1 */))\n                            .getU32(),\n                        msgContent: deserialize(msgBinary.subarray(5)),\n                    };\n                    break;\n                case 2 /* RES */:\n                    msg = {\n                        msgType: \"RES\",\n                        msgId: u32\n                            .setByU8(msgBinary.subarray(1, 5 /* Uint32Array.BYTES_PER_ELEMENT+1 */))\n                            .getU32(),\n                        msgContent: deserialize(msgBinary.subarray(5)),\n                    };\n                    break;\n                case 0 /* SIM */:\n                    msg = {\n                        msgType: \"SIM\",\n                        msgId: undefined,\n                        msgContent: deserialize(msgBinary.subarray(1)),\n                    };\n                    break;\n                default:\n                    throw new TypeError(`unknown msgType:'${msgBinary[0]}'`);\n            }\n        }\n        catch (err) {\n            debugger;\n            throw err;\n        }\n        for (const cb of this._cbs) {\n            cb(msg);\n        }\n        return msg;\n    }\n    onMessage(cb) {\n        this._cbs.push(cb);\n    }\n    /// 消息序列化\n    // private _msg_ABC: typeof SharedArrayBuffer | typeof ArrayBuffer = ArrayBuffer;\n    _serializeMsg(msg) {\n        let msgBinary;\n        if (msg.msgType === \"SIM\") {\n            msgBinary = u8Concat(ArrayBuffer, [[0 /* SIM */], serialize(msg.msgContent)]);\n        }\n        else {\n            msgBinary = u8Concat(ArrayBuffer, [\n                [msg.msgType === \"REQ\" ? 1 /* REQ */ : 2 /* RES */],\n                new Uint8Array(new Uint32Array([msg.msgId]).buffer),\n                serialize(msg.msgContent),\n            ]);\n        }\n        return msgBinary;\n    }\n}\n","import { helper } from \"@bfchain/comlink-core\";\nexport class MagicBinaryPort {\n    constructor(_duplex) {\n        this._duplex = _duplex;\n        this._reqId = new Uint32Array(1);\n        this._resMap = new Map();\n        _duplex.onMessage((msg) => {\n            if (msg.msgType === \"RES\") {\n                const resId = msg.msgId;\n                const output = this._resMap.get(resId);\n                if (!output) {\n                    throw new TypeError(\"no found responser\");\n                    // return;\n                }\n                this._resMap.delete(resId);\n                const ret = msg.msgContent;\n                helper.SyncForCallback(output, () => {\n                    const resBin = helper.OpenArg(ret);\n                    if (!resBin) {\n                        throw new TypeError();\n                    }\n                    return resBin;\n                });\n            }\n            else {\n                const reqId = msg.msgId;\n                this._reqHandler((ret) => {\n                    if (reqId === undefined) {\n                        return;\n                    }\n                    this._postModeMessage({\n                        msgType: \"RES\",\n                        msgId: reqId,\n                        msgContent: ret,\n                    });\n                }, msg.msgContent);\n            }\n        });\n    }\n    onMessage(listener) {\n        this._reqHandler = listener;\n    }\n    send(bin) {\n        this._duplex.postAsyncMessage({\n            msgType: \"SIM\",\n            msgId: undefined,\n            msgContent: bin,\n        });\n    }\n}\nexport class SyncBinaryPort extends MagicBinaryPort {\n    _postModeMessage(msg) {\n        this._duplex.postSyncMessage(msg);\n    }\n    req(output, bin) {\n        const reqId = this._reqId[0]++;\n        let hasOutput = false;\n        const reqOutput = (ret) => {\n            hasOutput = true;\n            output(ret);\n        };\n        // 先存放回调\n        this._resMap.set(reqId, reqOutput);\n        // 发送，同步模式会直接触发回调\n        this._postModeMessage({\n            msgType: \"REQ\",\n            msgId: reqId,\n            msgContent: bin,\n        });\n        /// 同步模式：发送完成后，马上就需要对方有响应才意味着 postMessage 完成\n        while (hasOutput === false) {\n            this._duplex.waitMessage();\n        }\n    }\n}\nexport class AsyncBinaryPort extends MagicBinaryPort {\n    _postModeMessage(msg) {\n        this._duplex.postAsyncMessage(msg);\n    }\n    req(output, bin) {\n        const reqId = this._reqId[0]++;\n        this._resMap.set(reqId, output);\n        this._postModeMessage({\n            msgType: \"REQ\",\n            msgId: reqId,\n            msgContent: bin,\n        });\n    }\n}\n","import { AsyncBinaryPort, SyncBinaryPort } from \"./MagicBinaryPort\";\nclass MagicBinaryChannel {\n    constructor(_duplex, localSab = new SharedArrayBuffer(1024), remoteSab = new SharedArrayBuffer(1024)) {\n        this._duplex = _duplex;\n        this.localSab = localSab;\n        this.remoteSab = remoteSab;\n    }\n}\nexport class SyncBinaryChannel extends MagicBinaryChannel {\n    constructor() {\n        super(...arguments);\n        this.port = new SyncBinaryPort(this._duplex);\n    }\n}\nexport class AsyncBinaryChannel extends MagicBinaryChannel {\n    constructor() {\n        super(...arguments);\n        this.port = new AsyncBinaryPort(this._duplex);\n    }\n}\n","import \"./@types\";\nexport * from \"@bfchain/comlink-core\";\nexport * from \"@bfchain/comlink-protocol\";\nexport * from \"@bfchain/comlink-sync\";\nexport * from \"@bfchain/comlink-async\";\nexport * from \"@bfchain/comlink-duplex-core\";\nimport { AsyncBinaryChannel, SyncBinaryChannel } from \"@bfchain/comlink-channel\";\nimport { ComlinkAsync } from \"@bfchain/comlink-async\";\nimport { ComlinkSync } from \"@bfchain/comlink-sync\";\nexport class Comlink {\n    constructor(options) { }\n    asyncModule(moduleName, duplex) {\n        if (!duplex.supportModes.has(\"async\")) {\n            throw new TypeError(\"duplex no support async mode\");\n        }\n        const binaryChannel = new AsyncBinaryChannel(duplex);\n        return new ComlinkAsync(binaryChannel.port, moduleName);\n    }\n    syncModule(moduleName, duplex) {\n        if (!duplex.supportModes.has(\"sync\")) {\n            throw new TypeError(\"duplex no support sync mode\");\n        }\n        const binaryChannel = new SyncBinaryChannel(duplex);\n        return new ComlinkSync(binaryChannel.port, moduleName);\n    }\n}\n","export class Endpoint {\n    constructor(_port) {\n        this._port = _port;\n        this.postMessage = this._port.postMessage.bind(this._port);\n    }\n    onMessage(listener) {\n        this._port.start();\n        this._port.addEventListener(\"message\", (e) => listener(e.data));\n    }\n}\n// export const EndpointFactory: BFChainComlink.Duplex.EndpointFactory = (port: MessagePort) => {\n//   return new Endpoint(port);\n// };\n","import { Duplex } from \"@bfchain/comlink-duplex-core\";\nimport { Endpoint } from \"./Endpoint\";\nconst PORT_SABS_WM = new WeakMap();\nexport class DuplexFactory {\n    constructor(_mc = new MessageChannel()) {\n        this._mc = _mc;\n    }\n    /**作为子线程运作 */\n    static async asCluster(workerSelf) {\n        let sabs;\n        const port2 = await new Promise((resolve, reject) => {\n            const onMessage = (me) => {\n                const { data } = me;\n                if (data instanceof MessagePort) {\n                    resolve(data);\n                    workerSelf.removeEventListener(\"message\", onMessage);\n                }\n                else if (data instanceof Array &&\n                    data[0] instanceof SharedArrayBuffer &&\n                    data[1] instanceof SharedArrayBuffer) {\n                    sabs = { locale: data[0], remote: data[1] };\n                }\n            };\n            workerSelf.addEventListener(\"message\", onMessage);\n        });\n        if (!sabs) {\n            throw new TypeError();\n        }\n        PORT_SABS_WM.set(port2, sabs);\n        const duplex = new Duplex(new Endpoint(port2), sabs);\n        return duplex;\n    }\n    _getSabs(port) {\n        let sabs = PORT_SABS_WM.get(port);\n        if (undefined === sabs) {\n            try {\n                sabs = {\n                    locale: new SharedArrayBuffer(1024),\n                    remote: new SharedArrayBuffer(1024),\n                };\n                PORT_SABS_WM.set(port, sabs);\n            }\n            catch (err) {\n                console.error(err);\n                throw new SyntaxError(\"no support use SharedArrayBuffer\");\n            }\n        }\n        return sabs;\n    }\n    /**创建出专门用于传输协议数据的双工通道 */\n    getDuplex() {\n        let duplex = this._duplex;\n        if (!duplex) {\n            const sabs = this._getSabs(this._mc.port1);\n            duplex = new Duplex(new Endpoint(this._mc.port1), sabs);\n            this._duplex = duplex;\n        }\n        return duplex;\n    }\n    /**作为主线程运作 */\n    asMain(workerIns) {\n        const sabs = this._getSabs(this._mc.port1);\n        try {\n            workerIns.postMessage([sabs.remote, sabs.locale]);\n        }\n        catch (err) {\n            console.error(err);\n            throw new SyntaxError(\"no support use transfer SharedArrayBuffer in channel\");\n        }\n        workerIns.postMessage(this._mc.port2, [this._mc.port2]);\n    }\n}\n","export class TaskLog {\n    constructor(groupName) {\n        this.groupName = groupName;\n        this._fails = [];\n        this.log = console.log;\n        this.warn = console.warn;\n        this.error = console.error;\n        this.info = console.info;\n        this.debug = console.debug;\n    }\n    assert(isTrue, msg) {\n        if (!isTrue) {\n            this._fails.push(msg);\n        }\n        console.assert(isTrue, msg);\n    }\n    finish() {\n        if (this._fails.length === 0) {\n            console.log(`✅ ~ all [${this.groupName}] test passed!`);\n        }\n        else {\n            console.error(`⛔ [${this.groupName}] has ${this._fails.length} test failed.`);\n        }\n    }\n}\n","import { Comlink } from \"@bfchain/comlink\";\nimport { DuplexFactory } from \"@bfchain/comlink-duplex-browser\";\n// import {} from \"../innerComlink/index\";\nimport { TaskLog } from \"./TaskLog\";\nconst comlink = new Comlink();\nexport async function installWebEnv(scriptUrl, mainThreadCallback, workerThreadCallback, workerThreadCallback2) {\n    var _a, _b;\n    if (scriptUrl) {\n        console.log(\"main started\");\n        /// 模拟A模块作为服务模块\n        try {\n            {\n                const duplexFactory = new DuplexFactory();\n                /**模块控制器 */\n                const moduleA = comlink.asyncModule(\"A\", duplexFactory.getDuplex());\n                // 执行回调\n                await mainThreadCallback(moduleA);\n                {\n                    /// 启动子线程，并将messagechannel发送给子线程\n                    const worker = new Worker(scriptUrl, {\n                        name: \"async\",\n                    });\n                    worker.onmessage = (e) => e.data === \"exit\" && worker.terminate();\n                    // 执行发送\n                    duplexFactory.asMain(worker);\n                }\n            }\n            {\n                const duplexFactory2 = new DuplexFactory();\n                const moduleA2 = comlink.asyncModule(\"A\", duplexFactory2.getDuplex());\n                // 执行回调\n                await mainThreadCallback(moduleA2);\n                {\n                    /// 启动子线程，并将messagechannel发送给子线程\n                    const worker = new Worker(scriptUrl, {\n                        name: \"sync\",\n                    });\n                    worker.onmessage = (e) => e.data === \"exit\" && worker.terminate();\n                    // 执行发送\n                    duplexFactory2.asMain(worker);\n                }\n            }\n        }\n        catch (err) {\n            console.error(\"❌ Main Error\", (_a = err === null || err === void 0 ? void 0 : err.stack) !== null && _a !== void 0 ? _a : err);\n            return;\n        }\n    }\n    else {\n        const mode = self.name;\n        const console = new TaskLog(`mix-${mode}`);\n        console.log(`worker ${mode} started`);\n        try {\n            /// 等待通道连接到位\n            const duplex = await DuplexFactory.asCluster(self);\n            if (mode === \"async\") {\n                /// 模拟B模块作为调用模块\n                /**模块控制器 */\n                const moduleB = comlink.asyncModule(\"B\", duplex);\n                // 回调\n                await workerThreadCallback(moduleB, console);\n            }\n            else {\n                /**模块控制器 */\n                const moduleB2 = comlink.syncModule(\"B2\", duplex);\n                // 回调\n                await workerThreadCallback2(moduleB2, console);\n            }\n            console.finish();\n        }\n        catch (err) {\n            console.error(\"❌ Worker Error\", (_b = err === null || err === void 0 ? void 0 : err.stack) !== null && _b !== void 0 ? _b : err);\n        }\n        // 退出子线程\n        setTimeout(() => {\n            self.postMessage(\"exit\");\n        }, 10);\n    }\n}\n","import { HolderReflect } from \"@bfchain/comlink\";\nimport { installWebEnv } from \"./envWrapper/webEnv\";\nfunction testRunner(scriptUrl) {\n    const A = \"~aAa~\";\n    installWebEnv(scriptUrl, (moduleA) => {\n        /**随便一个常量 */\n        const a = A;\n        moduleA.export(a, \"a\");\n        moduleA.export(document, \"document\");\n    }, async (moduleB, console) => {\n        const a = await moduleB.import(\"a\");\n        Reflect.set(globalThis, \"a\", a);\n        console.assert(a === A, \"import\");\n        const document = await moduleB.import(\"document\");\n        Reflect.set(globalThis, \"document\", document);\n        const div = await document.createElement(\"div\");\n        const id = `id-${self.name}-${Math.random().toString(36).slice(2)}`;\n        const textContent = `T~${self.name}~#${id}~T`;\n        div.id = id;\n        div.textContent = textContent;\n        document.body.appendChild(div);\n        console.log(await div.textContent);\n        console.assert((await div.textContent) === textContent, \"textContent\");\n        const div2 = await document.querySelector(\"#\" + id);\n        console.assert(JSON.stringify(HolderReflect.getHolderReflect(div).getIOB()) ===\n            JSON.stringify(HolderReflect.getHolderReflect(div2).getIOB()), \"ref\");\n    }, (moduleB, console) => {\n        /// test import\n        const a = moduleB.import(\"a\");\n        Reflect.set(self, \"a\", a);\n        console.assert(a === A, \"import\");\n        const document = moduleB.import(\"document\");\n        Reflect.set(self, \"document\", document);\n        const div = document.createElement(\"div\");\n        const id = `id-${self.name}-${Math.random().toString(36).slice(2)}`;\n        const textContent = `T~${self.name}~#${id}~T`;\n        div.id = id;\n        div.textContent = textContent;\n        document.body.appendChild(div);\n        console.assert(div.textContent === textContent, \"textContent\");\n        const div2 = document.querySelector(\"#\" + id);\n        console.assert(div2 === div, \"ref\");\n    });\n}\nReflect.set(self, \"testRunner\", testRunner);\nif (typeof document !== \"object\") {\n    testRunner();\n}\nelse {\n    testRunner(document.querySelector(\"script\").src);\n}\n"],"names":["isObj","obj","targetType","checkUnregisterToken","unregisterToken","TypeError","checkTarget","target","WeakRef","wr","WeakMap","set","deref","get","Object","defineProperty","globalThis","value","FinalizationRegistry","FinalizationGroup","cleanupCallback","fg","heldValueIter","heldValue","register","unregister","undefined","body","recover","result","e","then","ESM_REFLECT_FUN_MAP","Map","_SyncToCallback","Reflect","getPrototypeOf","proto","setPrototypeOf","isExtensible","preventExtensions","prop","getOwnPropertyDescriptor","has","deleteProperty","attr","ownKeys","ctx","args","apply","type","fun","resolve","reject","queueMicrotask","res","err","newTarget","construct","ctor","JSON","stringify","parse","handler","SyncForCallback","cb","isError","data","error","resolveCallback","rejectCallback","SyncPiperFactory","output","transformer","OpenArg","arg","ExportStore","name","accId","objIdStore","getObjById","id","cache","getSymById","sym","getId","saveObjId","saveSymId","releaseById","exportSymbol","source","_a","exportObject","ImportStore","idExtendsStore","proxyIdStore","proxyIdWM","_fr","releaseProxyId","getProxy","proxy","isProxy","getProxyById","pwr","saveProxyId","backupProxyId","_onReleaseCallback","onRelease","pact","state","s","v","o","bind","observer","prototype","onFulfilled","onRejected","callback","_this","thenable","test","update","stage","shouldContinue","updateValue","_resumeAfterTest","_resumeAfterBody","_resumeAfterUpdate","ComlinkCore","port","exportStore","importStore","_exportModule","scope","create","isExported","_listen","$destroy","Error","_getInitedExportScope","$getEsmReflectHanlder","operator","SyntaxError","onMessage","bin","out_void","linkObj","transfer","transferableBinary2LinkObj","targetId","ReferenceError","linkOut","out","isThrow","out_linkOut","anyRes","Any2InOutBinary","iobRet","push","linkObj2TransferableBinary","hasOut","InOutBinary2Any","paramList","slice","map","iob","i","length","len","$operator","$paramList","$handler","scopeRet","module","locId","refId","send","$getImportModule","_importModule","req","ret","IOB_EFT_Factory_Map","factory","Function","toString","refExtends","factoryCode","funType","getFunctionType","constructor","ctorName","str","call","startsWith","EXPORT_FUN_DESCRIPTOR_SYMBOL","Symbol","getFunctionExportDescription","IMPORT_FUN_EXTENDS_SYMBOL","refFunctionStaticToStringFactory","self","mode","code","configurable","writable","getObjectStatus","isFrozen","isSealed","globalSymbolStore","forEach","ModelTransfer","core","canClone","_getRemoteSymbolItemExtends","_b","globalSymInfo","global","description","unique","keyFor","_getRefItemExtends","status","exportDescriptor","isStatic","instanceOfFunction","canConstruct","showSourceCode","helper","needClone","item","imp","CB_TO_SYNC_ERROR","CallbackToSync","cbCaller","_ret","IS_ASYNC_APPLY_FUN_MARKER","IS_SYNC_APPLY_FUN_MARKER","PROTOCAL_SENDER","SENDER_MARKER","SyncModelTransfer","_rfsts","_genLinkInSender","linkIn","_reqLinkIn","_sendLinkIn","__marker__","_getDefaultProxyHanlder","sender","proxyHandler","_target","_reciver","_receiver","thisArg","argArray","_pkgLinkIn","a","tb","err_iob","pop","res_iob","_createImportByRefId","refHook","_createImportRefHook","getSource","proxyHanlder","getProxyHanlder","Proxy","getLinkInSenderByProxy","ref","sourceFun","funRef","defaultProxyHanlder","functionProxyHanlder","receiver","sourceObj","objRef","sourceSym","symRef","loc","cachedProxy","ComlinkSync","_syncWM","_asyncWM","opeartor","hanlder","applyHanlder","key","importModule","importAsSync","asyncToSync","syncFun","r","importAsAsync","syncToAsync","asyncFun","Promise","bindThis","propertyKey","descriptor","bound","CACHE_KEYS_SYMBOL","getCacheKeys","protoTarget","CACHE_KEYS","keyGenerator","symbol","String","cacheGetter","propTarget","source_fun","CACHE_VALUE_SYMBOL","getter","cacheValue","enumerable","console","cleanGetterCache","_cleanGetterCache","cleanAllGetterCache","__decorate","this","decorators","desc","c","arguments","d","decorate","__metadata","k","metadata","PropArrayHelper","pid","Math","random","substr","CLASS_PROTO_ARRAYDATA_POOL","PA_ID_KEY","PA_ID_VALUE","Set","CLASS_PROTO_ARRAYDATA","hasOwnProperty","arr_data","add","pa_id","remove","index","indexOf","splice","THROTTLE_WRAP_PLOT","NO_ALLOW_PROP","toPrimitive","toStringTag","hasInstance","species","iterator","isConcatSpreadable","match","matchAll","replace","search","split","__THEN_DISABLED__","WeakSet","createHolderProxyHanlder","holderReflect","toValueSync","isHolder","thenFun","assetHolder","Operator_typeOfHolder","typeNameRet","applyHolder","toHolder","asyncIterator","toAsyncValue","setHolderReflect","setHolder","deletePropertyHolder","applyHolderReflect","constructHolderReflect","constructHolder","__HOLDER_REFLECT_WM__","__REFLECT_HOLDER_WM__","getHolder","holder","getHolderReflect","CallbackToAsync","syncRet","syncResolve","syncReject","CallbackToAsyncBind","isNil","ReflectForbidenMethods","_factory_NoObject","_factory","nilGet","method","errorMessage","ID_ACC","reflectForbidenMethods","refFunctionStaticToString","alwaysTrueCallbackCaller","alwaysFalseCallbackCaller","alwaysUndefinedCallbackCaller","end","iobCacher","HolderReflect","linkSenderArgs","staticMode","_iobCacher","needSend","waitter","sendLinkIn","_getCatchedReflect","_catched","_catchedReflect","bindIOB","cacher","remoteIob","newIobCacher","getIOB","isBindedIOB","waitIOB","createSubHolder","subHolderLinkIn","_getSubHolderPrimitiveSync","throw_binded","apply_local","thisArgument","argumentsList","apply_remote","construct_local","construct_remote","defineProperty_local","attributes","definePropertyHolder","defineProperty_remote","deleteProperty_localObject","deleteProperty_remote","get_remoteFunction","iobExtends","get_remote","get_local","getOwnPropertyDescriptor_remoteFunction","getOwnPropertyDescriptor_remote","getOwnPropertyDescriptor_local","getOwnPropertyDescriptorHolder","getOwnPropertyDescriptorCallback","getPrototypeOf_local","getPrototypeOfHolder","getPrototypeOf_remote","has_remoteFunction","has_remote","has_local","hasHolder","isExtensible_local","isExtensibleHolder","isExtensible_remote","ownKeys_local","ownKeysHolder","ownKeys_remote","preventExtensions_local","preventExtensionsHolder","preventExtensions_remote","preventExtensions_onceRemote","set_local","set_remote","setPrototypeOf_local","setPrototypeOfHolder","setPrototypeOf_remote","asset_value","asset_remote","hint","Operator_instanceOf","Ctor","Operator_instanceOfHolder","Operator_typeOf","Operator_delete","Operator_spread","Operator_in","iterable","next","done","Array_concat","String_match","String_matchAll","String_replace","String_search","String_split","Object_assign","Object_create","Object_defineProperties","Object_defineProperty","Object_entries","Object_freeze","Object_fromEntries","Object_getOwnPropertyDescriptor","Object_getOwnPropertyDescriptors","Object_getOwnPropertyNames","Object_getOwnPropertySymbols","Object_getPrototypeOf","Object_is","Object_isExtensible","Object_isFrozen","Object_isSealed","Object_keys","Object_preventExtensions","Object_seal","Object_setPrototypeOf","Object_values","JSON_stringify","JSON_parse","applyCallback","constructCallback","definePropertyCallback","deletePropertyCallback","getCallback","getPrototypeOfCallback","hasCallback","isExtensibleCallback","ownKeysCallback","preventExtensionsCallback","setCallback","setPrototypeOfCallback","assetCallback","AsyncModelTransfer","doReq","linkInIob","linkInIOB","linkInIOBLength","isRejected","_createHolderByRefId","_getHolder","reflectHolder","valRet","cachedHolder","ComlinkAsync","wrap","val","AtomicsNotifyer","_port","_icbs","_remoteMode","Array","cbs","waitAsync","si32","waitCallback","Atomics","load","_notify_unknow","indexs","_notify_async","_notify_sync","postMessage","notify","u8Concat","ABC","u8s","totalLen","u8","u8a","Uint8Array","offsetLen","DataPkg","sab","Int32Array","su8","su16","Uint16Array","U32Reader","_u32","Uint32Array","_u8","buffer","setByU8","getU32","u32","serialize","json","charCodeAt","RangeError","deserialize","fromCharCode","Duplex","sabs","_notifyer","_eventId","_chunkCollection","supportModes","_cbs","localeDataPkg","locale","remoteDataPkg","remote","_sync","_checkRemote","getPort","duplex","postAsyncMessage","msg","_postMessageCallback","hook","curMsgType","msgType","postSyncMessage","_checkRemoteAtomics","wait","waitMessage","onApplyWrite","onChunkReady","msgBinary","_serializeMsg","sync","eventId","MSG_MAX_BYTELENGTH","byteLength","chunkCount","ceil","chunkId","msgOffset","tryWriteChunk","checkAndApplyWrite","cur_msg_type","compareExchange","store","doWriteChunk","msgChunk","subarray","max","_needOnMessageAtomics","_onMessage","_needOnMessage","dataPkg","cur_msg_status","chunkSize","chunk","cachedChunkInfo","size","chunkList","chunkItem","ArrayBuffer","_msgBinaryHandler","msgId","msgContent","MagicBinaryPort","_duplex","_reqId","_resMap","resId","resBin","reqId","_reqHandler","_postModeMessage","listener","SyncBinaryPort","hasOutput","reqOutput","AsyncBinaryPort","MagicBinaryChannel","localSab","remoteSab","SharedArrayBuffer","SyncBinaryChannel","AsyncBinaryChannel","Comlink","options","asyncModule","moduleName","binaryChannel","syncModule","Endpoint","start","addEventListener","PORT_SABS_WM","DuplexFactory","_mc","MessageChannel","asCluster","workerSelf","me","MessagePort","removeEventListener","port2","_getSabs","getDuplex","port1","asMain","workerIns","TaskLog","groupName","_fails","log","warn","info","debug","assert","isTrue","finish","installWebEnv","scriptUrl","mainThreadCallback","workerThreadCallback","workerThreadCallback2","duplexFactory","moduleA","comlink","worker","Worker","onmessage","terminate","duplexFactory2","moduleA2","stack","setTimeout","moduleB","moduleB2","testRunner","A","document","createElement","div","textContent","appendChild","querySelector","div2","src"],"mappings":"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"}