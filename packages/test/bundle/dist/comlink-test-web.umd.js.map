{"version":3,"file":"comlink-test-web.umd.js","sources":["../../../typings/build/esm/helper.js","../../../typings/build/esm/weakref.shim.js","../../../core/build/esm/helper.js","../../../core/build/esm/ExportStore.js","../../../core/build/esm/ImportStore.js","../../../core/build/esm/ComlinkCore.js","../../../protocol/build/esm/const.js","../../../protocol/build/esm/ModelTransfer.js","../../../sync/build/esm/helper.js","../../../sync/build/esm/const.js","../../../sync/build/esm/SyncModelTransfer.js","../../../sync/build/esm/ComlinkSync.js","../../../../node_modules/@bfchain/util-decorator/build/esm/bindThis.js","../../../../node_modules/@bfchain/util-decorator/build/esm/cacheGetter.js","../../../../node_modules/@bfchain/util-decorator/build/esm/PropArrayHelper.js","../../../../node_modules/@bfchain/util-decorator/build/esm/throttleWrap.js","../../../async/build/esm/Holder.js","../../../async/build/esm/helper.js","../../../async/build/esm/ReflectForbidenMethods.js","../../../async/build/esm/HolderReflect.js","../../../async/build/esm/AsyncModelTransfer.js","../../../async/build/esm/ComlinkAsync.js","../../../duplex-core/build/esm/AtomicsNotifyer.js","../../../duplex-core/build/esm/helper.js","../../../duplex-core/build/esm/DataPkg.js","../../../duplex-core/build/esm/u32.js","../../../duplex-core/build/esm/Duplex.js","../../../channel/build/esm/MagicBinaryPort.js","../../../channel/build/esm/MagicBinaryChannel.js","../../../comlink/build/esm/index.js","../../../duplex-browser/build/esm/Endpoint.js","../../../duplex-browser/build/esm/DuplexFactory.js","../../build/esm/envWrapper/TaskLog.js","../../build/esm/envWrapper/webEnv.js","../../build/esm/1-1.web.test.js"],"sourcesContent":["/**\n * 不能使用instanceof，会触发Proxy的getPrototypeOf\n * @param obj\n */\nexport const isObj = (obj) => {\n    const targetType = typeof obj;\n    return (targetType === \"object\" && obj !== null) || targetType === \"function\";\n};\n","import { isObj } from \"./helper\";\nconst checkUnregisterToken = (unregisterToken) => {\n    if (!isObj(unregisterToken)) {\n        throw new TypeError(`unregisterToken ('${unregisterToken}') must be an object`);\n    }\n};\nconst checkTarget = (target) => {\n    if (!isObj(target)) {\n        throw new TypeError(\"target must be an object\");\n    }\n};\nif (typeof WeakRef === \"undefined\") {\n    const wr = new WeakMap();\n    class WeakRef {\n        constructor(target) {\n            checkTarget(target);\n            wr.set(this, target);\n        }\n        deref() {\n            return wr.get(this);\n        }\n    }\n    Object.defineProperty(globalThis, \"WeakRef\", { value: WeakRef });\n    ///\n}\nif (typeof FinalizationRegistry === \"undefined\") {\n    if (typeof FinalizationGroup !== \"undefined\") {\n        class FinalizationRegistry {\n            constructor(cleanupCallback) {\n                this.fg = new FinalizationGroup((heldValueIter) => {\n                    for (const heldValue of heldValueIter) {\n                        cleanupCallback(heldValue);\n                    }\n                });\n            }\n            register(target, heldValue, unregisterToken) {\n                this.fg.register(target, heldValue, unregisterToken);\n            }\n            unregister(unregisterToken) {\n                this.fg.unregister(unregisterToken);\n            }\n        }\n        Object.defineProperty(globalThis, \"FinalizationRegistry\", {\n            value: FinalizationRegistry,\n        });\n    }\n    else {\n        class FinalizationRegistry {\n            constructor(cleanupCallback) { }\n            register(target, heldValue, unregisterToken) {\n                checkTarget(target);\n                if (unregisterToken !== undefined) {\n                    checkUnregisterToken(unregisterToken);\n                }\n            }\n            unregister(unregisterToken) {\n                checkUnregisterToken(unregisterToken);\n            }\n        }\n        Object.defineProperty(globalThis, \"FinalizationRegistry\", {\n            value: FinalizationRegistry,\n        });\n    }\n}\n","import \"@bfchain/comlink-typings\";\nexport const ESM_REFLECT_FUN_MAP = new Map([\n    [\n        0 /* GetPrototypeOf */,\n        _SyncToCallback((target) => Reflect.getPrototypeOf(target)),\n    ],\n    [\n        1 /* SetPrototypeOf */,\n        _SyncToCallback((target, [proto]) => Reflect.setPrototypeOf(target, proto)),\n    ],\n    [\n        2 /* IsExtensible */,\n        _SyncToCallback((target) => Reflect.isExtensible(target)),\n    ],\n    [\n        3 /* PreventExtensions */,\n        _SyncToCallback((target) => Reflect.preventExtensions(target)),\n    ],\n    [\n        4 /* GetOwnPropertyDescriptor */,\n        _SyncToCallback((target, [prop]) => Reflect.getOwnPropertyDescriptor(target, prop)),\n    ],\n    [\n        5 /* Has */,\n        _SyncToCallback((target, [prop]) => Reflect.has(target, prop)),\n    ],\n    [\n        6 /* Get */,\n        _SyncToCallback((target, [prop]) => Reflect.get(target, prop)),\n    ],\n    [\n        7 /* Set */,\n        _SyncToCallback((target, [prop, value]) => Reflect.set(target, prop, value)),\n    ],\n    [\n        8 /* DeleteProperty */,\n        _SyncToCallback((target, [prop]) => Reflect.deleteProperty(target, prop)),\n    ],\n    [\n        9 /* DefineProperty */,\n        _SyncToCallback((target, [prop, attr]) => Reflect.defineProperty(target, prop, attr)),\n    ],\n    [10 /* OwnKeys */, _SyncToCallback((target) => Reflect.ownKeys(target))],\n    [\n        11 /* Apply */,\n        _SyncToCallback((target, [ctx, ...args]) => Reflect.apply(target, ctx, args)),\n    ],\n    [\n        19 /* SyncApply */,\n        {\n            type: \"async\",\n            fun: (target, [ctx, ...args]) => Reflect.apply(target, ctx, args),\n        },\n    ],\n    [\n        20 /* AsyncApply */,\n        {\n            type: \"sync\",\n            fun: (target, [resolve, reject, ctx, ...args]) => queueMicrotask(async () => {\n                try {\n                    const res = await Reflect.apply(target, ctx, args);\n                    resolve(res);\n                }\n                catch (err) {\n                    reject(err);\n                }\n            }),\n        },\n    ],\n    [\n        12 /* Construct */,\n        _SyncToCallback((target, [newTarget, ...args]) => Reflect.construct(target, args, newTarget)),\n    ],\n    /// 运算符\n    [\n        13 /* Asset */,\n        _SyncToCallback((target, [prop]) => target[prop]),\n    ],\n    [14 /* Typeof */, _SyncToCallback((target) => typeof target)],\n    [\n        15 /* Instanceof */,\n        _SyncToCallback((target, [ctor]) => target instanceof ctor),\n    ],\n    [16 /* JsonStringify */, _SyncToCallback((target) => JSON.stringify(target))],\n    [17 /* JsonParse */, _SyncToCallback((target) => JSON.parse(target))],\n]);\nfunction _SyncToCallback(handler) {\n    return {\n        type: \"sync\",\n        fun: handler,\n    };\n}\nexport const SyncForCallback = (cb, handler) => {\n    try {\n        cb({ isError: false, data: handler() });\n    }\n    catch (error) {\n        cb({ isError: true, error });\n    }\n};\nexport function resolveCallback(cb, data) {\n    cb({ isError: false, data });\n}\nexport function rejectCallback(cb, error) {\n    cb({ isError: true, error });\n}\n/**\n * 生成一个回调函数，通过指定的处理函数，最终传输给cb风格的出口\n * @param output\n * @param transformer\n */\nexport const SyncPiperFactory = (output, transformer) => {\n    return (...args) => {\n        try {\n            output({ isError: false, data: transformer(...args) });\n        }\n        catch (error) {\n            output({ isError: true, error });\n        }\n    };\n};\n/**\n * @TODO 移除这些异步helper\n * 生成一个回调函数，通过指定的处理函数，最终传输给cb风格的出口\n * @param output\n * @param transformer\n */\nexport const AsyncPiperFactory = (output, transformer) => {\n    return async (...args) => {\n        try {\n            output({ isError: false, data: await transformer(...args) });\n        }\n        catch (error) {\n            output({ isError: true, error });\n        }\n    };\n};\nexport const OpenArg = (arg) => {\n    if (arg.isError) {\n        throw arg.error;\n    }\n    return arg.data;\n};\n// let _queueMicrotask: typeof queueMicrotask;\n// if (typeof queueMicrotask === \"function\") {\n//   /// globalThis和queueMicrotask是同个版本出现的\n//   _queueMicrotask = queueMicrotask.bind(globalThis);\n// } else {\n//   const p = Promise.resolve();\n//   _queueMicrotask = (cb) => {\n//     p.then(cb as any).catch((err) => setTimeout(() => {}, 0));\n//   };\n// }\n","export class ExportStore {\n    constructor(name) {\n        this.name = name;\n        /**\n         * 提供给远端的 refId|symId\n         * 远端可以使用 locId 来进行访问本地\n         */\n        this.accId = 0;\n        /**我所导出的引用对象与符号 */\n        this.objIdStore = new Map();\n    }\n    getObjById(id) {\n        const cache = this.objIdStore.get(id);\n        if (cache && cache.type === 0 /* Object */) {\n            return cache.obj;\n        }\n    }\n    getSymById(id) {\n        const cache = this.objIdStore.get(id);\n        if (cache && cache.type === 1 /* Symbol */) {\n            return cache.sym;\n        }\n    }\n    getId(obj) {\n        const cache = this.objIdStore.get(obj);\n        return cache === null || cache === void 0 ? void 0 : cache.id;\n    }\n    /**\n     * 保存对象的引用\n     */\n    saveObjId(obj, id = this.accId++) {\n        const cache = { type: 0 /* Object */, obj, id };\n        this.objIdStore.set(id, cache);\n        this.objIdStore.set(obj, cache);\n        return id;\n    }\n    /**\n     * 保存符号\n     */\n    saveSymId(sym, id = this.accId++) {\n        const cache = { type: 1 /* Symbol */, sym, id };\n        this.objIdStore.set(id, cache);\n        this.objIdStore.set(sym, cache);\n        return id;\n    }\n    /**\n     * 释放对象的引用\n     * @param id\n     */\n    releaseById(id) {\n        // console.log(\"release\", this.name, id);\n        const cache = this.objIdStore.get(id);\n        if (cache) {\n            if (cache.type === 0 /* Object */) {\n                this.objIdStore.delete(cache.obj);\n            }\n            else {\n                this.objIdStore.delete(cache.sym);\n            }\n            this.objIdStore.delete(id);\n            return true;\n        }\n        return false;\n    }\n    exportSymbol(source) {\n        var _a;\n        return (_a = this.getId(source)) !== null && _a !== void 0 ? _a : this.saveSymId(source);\n    }\n    exportObject(source) {\n        var _a;\n        return (_a = this.getId(source)) !== null && _a !== void 0 ? _a : this.saveObjId(source);\n    }\n}\n","export class ImportStore {\n    constructor(name) {\n        this.name = name;\n        /**存储协议扩展信息 */\n        this.idExtendsStore = new Map();\n        /**我所导入的引用对象与符号 */\n        this.proxyIdStore = new Map();\n        this.proxyIdWM = new WeakMap();\n        this._fr = new FinalizationRegistry((id) => this.releaseProxyId(id));\n    }\n    /**\n     * 获取代理对象背后真正的引用信息\n     */\n    getProxy(proxy) {\n        let cache;\n        switch (typeof proxy) {\n            case \"number\":\n            case \"symbol\":\n                cache = this.proxyIdStore.get(proxy);\n                break;\n            case \"object\":\n                if (proxy === null) {\n                    return;\n                }\n            case \"function\":\n                const id = this.proxyIdWM.get(proxy);\n                if (id !== undefined) {\n                    cache = this.proxyIdStore.get(id);\n                }\n                break;\n        }\n        return cache;\n    }\n    isProxy(proxy) {\n        switch (typeof proxy) {\n            case \"symbol\":\n                return this.proxyIdStore.has(proxy);\n            case \"object\":\n                if (proxy === null) {\n                    return false;\n                }\n            case \"function\":\n                return this.proxyIdWM.has(proxy);\n        }\n        return false;\n    }\n    getProxyById(id) {\n        const cache = this.proxyIdStore.get(id);\n        let res;\n        if (cache) {\n            if (cache.type === 0 /* Proxy */) {\n                res = cache.pwr.deref();\n            }\n            else {\n                res = cache.sym;\n            }\n        }\n        return res;\n    }\n    /**\n     * 保存导入引用\n     * @param proxy Proxy<object>|remote-symbol-placeholder\n     * @param id refId\n     */\n    saveProxyId(proxy, id) {\n        let cache;\n        if (typeof proxy === \"symbol\") {\n            cache = {\n                id,\n                type: 1 /* Symbol */,\n                sym: proxy,\n            };\n            this.proxyIdStore.set(proxy, cache);\n        }\n        else {\n            cache = {\n                id,\n                type: 0 /* Proxy */,\n                pwr: new WeakRef(proxy),\n            };\n            this._fr.register(proxy, id, cache.pwr);\n            this.proxyIdWM.set(proxy, id);\n        }\n        this.proxyIdStore.set(id, cache);\n    }\n    /**为某一个对象记录 refId */\n    backupProxyId(proxy, id) {\n        this.proxyIdWM.set(proxy, id);\n    }\n    /**\n     * 释放导入的引用\n     * @param id refId\n     */\n    releaseProxyId(id) {\n        // console.log(\"release\", this.name, id);\n        const cache = this.proxyIdStore.get(id);\n        if (cache) {\n            this.proxyIdStore.delete(id);\n            if (cache.type === 1 /* Symbol */) {\n                this.proxyIdStore.delete(cache.sym);\n            }\n            else {\n                //   this.proxyIdWM.delete(cache.)\n                this._fr.unregister(cache.pwr);\n            }\n            // 删除缓存的扩展信息\n            this.idExtendsStore.delete(id);\n            this._onReleaseCallback(id);\n            return true;\n        }\n        return false;\n    }\n    _onReleaseCallback(id) {\n        return;\n    }\n    /**监听一个引用被释放 */\n    onRelease(cb) {\n        this._onReleaseCallback = cb;\n    }\n}\n// export const importStore = new ImportStore();\n","import \"@bfchain/comlink-typings\";\nimport { ESM_REFLECT_FUN_MAP, OpenArg, resolveCallback, SyncPiperFactory } from \"./helper\";\nimport { ExportStore } from \"./ExportStore\";\nimport { ImportStore } from \"./ImportStore\";\nexport class ComlinkCore {\n    constructor(port, name) {\n        this.port = port;\n        this.name = name;\n        this.exportStore = new ExportStore(this.name);\n        this.importStore = new ImportStore(this.name);\n        /**用于存储导出的域 */\n        this._exportModule = { scope: Object.create(null), isExported: false };\n        this._listen();\n    }\n    $destroy() {\n        throw new Error(\"Method not implemented.\");\n    }\n    _getInitedExportScope() {\n        const { _exportModule } = this;\n        if (_exportModule.isExported === false) {\n            _exportModule.isExported = true;\n            this.exportStore.exportObject(_exportModule.scope);\n        }\n        return _exportModule.scope;\n    }\n    export(source, name = \"default\") {\n        Reflect.set(this._getInitedExportScope(), name, source);\n    }\n    $getEsmReflectHanlder(operator) {\n        const handler = ESM_REFLECT_FUN_MAP.get(operator);\n        if (!handler) {\n            throw new SyntaxError(\"no support operator:\" + operator);\n        }\n        return handler;\n    }\n    _listen() {\n        const { exportStore: exportStore, port } = this;\n        port.onMessage(async (cb, bin) => {\n            const out_void = () => resolveCallback(cb, undefined);\n            const linkObj = this.transfer.transferableBinary2LinkObj(bin);\n            if (linkObj.type === 2 /* In */) {\n                const obj = exportStore.getObjById(linkObj.targetId);\n                if (obj === undefined) {\n                    throw new ReferenceError(\"no found\");\n                }\n                /**预备好结果 */\n                const linkOut = {\n                    type: 3 /* Out */,\n                    // resId: linkObj.reqId,\n                    out: [],\n                    isThrow: false,\n                };\n                const out_linkOut = (anyRes) => {\n                    this.transfer.Any2InOutBinary((iobRet) => {\n                        if (iobRet.isError) {\n                            return cb(iobRet);\n                        }\n                        linkOut.out.push(iobRet.data);\n                        resolveCallback(cb, this.transfer.linkObj2TransferableBinary(linkOut));\n                    }, anyRes);\n                };\n                try {\n                    let res;\n                    /**JS语言中，this对象不用传输。\n                     * 但在Comlink协议中，它必须传输：\n                     * 因为我们使用call/apply模拟，所以所有所需的对象都需要传递进来\n                     */\n                    const operator = this.transfer.InOutBinary2Any(linkObj.in[0]);\n                    const paramList = linkObj.in.slice(1).map((iob) => this.transfer.InOutBinary2Any(iob));\n                    if (18 /* Multi */ === operator) {\n                        /// 批量操作\n                        res = obj;\n                        for (let i = 0; i < paramList.length;) {\n                            const len = paramList[i];\n                            const $operator = paramList[i + 1];\n                            const $paramList = paramList.slice(i + 2, i + 1 + len);\n                            const $handler = this.$getEsmReflectHanlder($operator);\n                            res = $handler.fun(res, $paramList);\n                            if ($handler.type === \"async\") {\n                                res = await res;\n                            }\n                            i += len + 1;\n                        }\n                    }\n                    else {\n                        /// 单项操作\n                        const handler = this.$getEsmReflectHanlder(operator);\n                        res = handler.fun(obj, paramList);\n                        if (handler.type === \"async\") {\n                            res = await res;\n                        }\n                    }\n                    /// 如果有返回结果的需要，那么就尝试进行返回\n                    if (linkObj.hasOut) {\n                        return out_linkOut(res);\n                    }\n                    else {\n                        return out_void();\n                    }\n                }\n                catch (err) {\n                    linkOut.isThrow = true;\n                    return out_linkOut(err);\n                }\n            }\n            else if (linkObj.type === 0 /* Import */) {\n                const scope = this._getInitedExportScope();\n                return this.transfer.Any2InOutBinary((scopeRet) => {\n                    if (scopeRet.isError) {\n                        return cb(scopeRet);\n                    }\n                    resolveCallback(cb, this.transfer.linkObj2TransferableBinary({\n                        type: 1 /* Export */,\n                        module: scopeRet.data,\n                    }));\n                }, scope);\n            }\n            else if (linkObj.type === 4 /* Release */) {\n                exportStore.releaseById(linkObj.locId);\n            }\n            out_void();\n        });\n        this.importStore.onRelease((refId) => {\n            // console.log(\"send release\", refId);\n            port.send(this.transfer.linkObj2TransferableBinary({\n                type: 4 /* Release */,\n                locId: refId,\n            }));\n        });\n    }\n    $getImportModule(output) {\n        const { port } = this;\n        /**\n         * 进行协商握手，取得对应的 refId\n         * @TODO 这里将会扩展出各类语言的传输协议\n         */\n        if (this._importModule === undefined) {\n            port.req(SyncPiperFactory(output, (ret) => {\n                const bin = OpenArg(ret);\n                const linkObj = this.transfer.transferableBinary2LinkObj(bin);\n                if (linkObj.type !== 1 /* Export */) {\n                    throw new TypeError();\n                }\n                /// 握手完成，转成代理对象\n                return (this._importModule = this.transfer.InOutBinary2Any(linkObj.module));\n            }), this.transfer.linkObj2TransferableBinary({ type: 0 /* Import */ }));\n            return;\n        }\n        output({\n            isError: false,\n            data: this._importModule,\n        });\n    }\n}\n","export const IOB_EFT_Factory_Map = new Map([\n    [\n        2 /* Sync */,\n        {\n            factory: Function,\n            toString: (refExtends) => `function ${refExtends.name}() { [remote code] }`,\n        },\n    ],\n]);\nfor (const [funType, { factoryCode, toString }] of [\n    [\n        3 /* SyncGenerator */,\n        {\n            factoryCode: \"return function* () {}.constructor\",\n            toString: (refExtends) => `function *${refExtends.name}() { [remote code] }`,\n        },\n    ],\n    [\n        4 /* Async */,\n        {\n            factoryCode: \"return async function () {}.constructor\",\n            toString: (refExtends) => `async function ${refExtends.name}() { [remote code] }`,\n        },\n    ],\n    [\n        5 /* AsyncGenerator */,\n        {\n            factoryCode: \"return async function* () {}.constructor\",\n            toString: (refExtends) => `async function *${refExtends.name}() { [remote code] }`,\n        },\n    ],\n    [\n        8 /* Class */,\n        {\n            factoryCode: \"return ()=>class {}\",\n            toString: (refExtends) => `class ${refExtends.name} { [remote code] }`,\n        },\n    ],\n]) {\n    let factory;\n    try {\n        factory = Function(factoryCode)();\n    }\n    catch {\n        factory = Function;\n    }\n    IOB_EFT_Factory_Map.set(funType, { factory, toString });\n}\nexport function getFunctionType(fun) {\n    const ctor = fun.constructor;\n    if (ctor) {\n        const ctorName = ctor.name;\n        if (ctorName === \"AsyncGeneratorFunction\") {\n            return 5 /* AsyncGenerator */;\n        }\n        if (ctorName === \"AsyncFunction\") {\n            return 4 /* Async */;\n        }\n        if (ctorName === \"GeneratorFunction\") {\n            return 3 /* SyncGenerator */;\n        }\n    }\n    const str = Object.toString.call(fun);\n    if (str.startsWith(\"class\")) {\n        return 8 /* Class */;\n    }\n    return 2 /* Sync */;\n}\n/**导出者 用于描述一个 function 的导出配置 */\nexport const EXPORT_FUN_DESCRIPTOR_SYMBOL = Symbol(\"function.export\");\n/**获取一个对象的描述信息 */\nexport function getFunctionExportDescription(fun) {\n    return (Reflect.get(fun, EXPORT_FUN_DESCRIPTOR_SYMBOL) ||\n        {});\n}\n/**导入者 缓存一个 function 的导入信息 */\nexport const IMPORT_FUN_EXTENDS_SYMBOL = Symbol(\"function.import\");\n/**\n * 用于替代 RefFunction 的 Function.property.toString\n * @param this\n */\nexport function refFunctionStaticToStringFactory() {\n    function toString() {\n        if (this === self) {\n            /**模拟远端获取到的 */\n            return \"function toString() { [remote code] }\";\n        }\n        const refExtends = Reflect.get(this, IMPORT_FUN_EXTENDS_SYMBOL);\n        const { toString } = refExtends;\n        if (toString.mode === 1 /* static */) {\n            return toString.code;\n        }\n        throw new TypeError();\n    }\n    const self = toString;\n    /**对自我进行源码保护 */\n    Object.defineProperty(self, \"toString\", {\n        configurable: false,\n        writable: false,\n        value: self,\n    });\n    return toString;\n}\nexport function getObjectStatus(obj) {\n    if (Object.isFrozen(obj)) {\n        return 0 /* frozen */;\n    }\n    if (Object.isSealed(obj)) {\n        return 2 /* sealed */;\n    }\n    if (Object.isExtensible(obj)) {\n        return 3 /* preventedExtensions */;\n    }\n    return 7 /* freedom */;\n}\n//#endregion\n//#region IOB_Extends::Symbol\nexport const globalSymbolStore = new Map();\n[\n    \"asyncIterator\",\n    \"hasInstance\",\n    \"isConcatSpreadable\",\n    \"iterator\",\n    \"match\",\n    \"matchAll\",\n    \"replace\",\n    \"search\",\n    \"species\",\n    \"split\",\n    \"toPrimitive\",\n    \"toStringTag\",\n    \"unscopables\",\n].forEach((name) => {\n    const sym = Reflect.get(Symbol, name);\n    if (typeof sym === \"symbol\") {\n        const cache = {\n            sym,\n            name,\n        };\n        globalSymbolStore.set(sym, cache);\n        globalSymbolStore.set(name, cache);\n    }\n});\n//#endregion\n","import { helper } from \"@bfchain/comlink-core\";\nimport { globalSymbolStore, IOB_EFT_Factory_Map, getFunctionType, getObjectStatus, getFunctionExportDescription, } from \"./const\";\nexport class ModelTransfer {\n    constructor(core) {\n        this.core = core;\n    }\n    canClone(obj) {\n        switch (typeof obj) {\n            case \"bigint\":\n            case \"boolean\":\n            case \"number\":\n            case \"string\":\n            case \"undefined\":\n                return true;\n            case \"symbol\":\n            // return Symbol.keyFor(obj) !== undefined;\n            case \"function\":\n                return false;\n            case \"object\":\n                return obj === null;\n        }\n        return false;\n    }\n    /**获取符号的扩展信息 */\n    _getRemoteSymbolItemExtends(sym) {\n        var _a, _b;\n        const globalSymInfo = globalSymbolStore.get(sym);\n        if (globalSymInfo) {\n            return {\n                type: 2 /* Symbol */,\n                global: true,\n                description: globalSymInfo.name,\n                unique: false,\n            };\n        }\n        return {\n            type: 2 /* Symbol */,\n            global: false,\n            description: (_b = (_a = Object.getOwnPropertyDescriptor(sym, \"description\")) === null || _a === void 0 ? void 0 : _a.value) !== null && _b !== void 0 ? _b : sym.toString().slice(7, -1),\n            unique: Symbol.keyFor(sym) !== undefined,\n        };\n    }\n    /**获取一个引用对象的扩展信息 */\n    _getRefItemExtends(obj) {\n        if (typeof obj === \"object\") {\n            return {\n                type: 1 /* Object */,\n                status: getObjectStatus(obj),\n            };\n        }\n        if (typeof obj === \"function\") {\n            const exportDescriptor = getFunctionExportDescription(obj);\n            const funType = getFunctionType(obj);\n            /**\n             * @FIXME 这种判断也是有风险的，因为虽然箭头函数等严格模式不允许执行 `fun.caller = 1`，但因为`caller`并不在属性里，而是在原型链上进行约束的，所以可能会使用`Reflect.set(fun,'caller',1)`从而达成混淆的效果\n             */\n            const isStatic = Object.getOwnPropertyDescriptor(obj, \"caller\") === undefined;\n            return {\n                type: 0 /* Function */,\n                funType,\n                name: obj.name,\n                length: obj.length,\n                isStatic,\n                status: getObjectStatus(obj),\n                instanceOfFunction: obj instanceof Function,\n                canConstruct: funType === 8 /* Class */ ||\n                    (funType === 2 /* Sync */ && isStatic === false),\n                toString: obj.toString === Function.prototype.toString\n                    ? {\n                        mode: 1 /* static */,\n                        code: exportDescriptor.showSourceCode\n                            ? obj.toString()\n                            : IOB_EFT_Factory_Map.get(funType).toString(obj),\n                    }\n                    : { mode: 0 /* dynamic */ },\n            };\n        }\n        throw new TypeError();\n    }\n    Any2InOutBinary(cb, obj) {\n        helper.SyncForCallback(cb, () => {\n            const needClone = this.canClone(obj);\n            let item;\n            /// 可直接通过赋值而克隆的对象\n            if (needClone) {\n                item = {\n                    type: 0 /* Clone */,\n                    data: obj,\n                };\n            }\n            else {\n                /// 对象是否是导入进来的\n                const imp = this.core.importStore.getProxy(obj);\n                if (imp) {\n                    item = {\n                        type: 3 /* Locale */,\n                        locId: imp.id,\n                    };\n                }\n                /// 符号对象需要在远端做一个克隆备份\n                else {\n                    switch (typeof obj) {\n                        case \"symbol\":\n                            item = {\n                                type: 1 /* RemoteSymbol */,\n                                refId: this.core.exportStore.exportSymbol(obj),\n                                extends: this._getRemoteSymbolItemExtends(obj),\n                            };\n                            break;\n                        case \"function\":\n                        case \"object\":\n                            if (obj !== null) {\n                                item = {\n                                    type: 2 /* Ref */,\n                                    refId: this.core.exportStore.exportObject(obj),\n                                    extends: this._getRefItemExtends(obj),\n                                };\n                            }\n                    }\n                }\n            }\n            if (!item) {\n                throw new TypeError(\"Cloud not transfer to IOB\");\n            }\n            return item;\n        });\n    }\n    linkObj2TransferableBinary(obj) {\n        return obj;\n    }\n    transferableBinary2LinkObj(bin) {\n        return bin;\n    }\n}\n","import { helper } from \"@bfchain/comlink-core\";\nconst CB_TO_SYNC_ERROR = new SyntaxError(\"could not transfrom to sync function\");\nexport function CallbackToSync(cbCaller, args, ctx) {\n    let ret = {\n        isError: true,\n        error: CB_TO_SYNC_ERROR,\n    };\n    cbCaller.call(ctx, (_ret) => (ret = _ret), ...args);\n    return helper.OpenArg(ret);\n}\n","export const IS_ASYNC_APPLY_FUN_MARKER = Symbol(\"asyncApplyFun\");\nexport const IS_SYNC_APPLY_FUN_MARKER = Symbol(\"syncApplyFun\");\nexport const PROTOCAL_SENDER = Symbol(\"protocalSender\");\n","import { globalSymbolStore, IMPORT_FUN_EXTENDS_SYMBOL, IOB_EFT_Factory_Map, ModelTransfer, refFunctionStaticToStringFactory, } from \"@bfchain/comlink-protocol\";\nimport \"@bfchain/comlink-typings\";\nimport { CallbackToSync } from \"./helper\";\nimport { PROTOCAL_SENDER } from \"./const\";\nconst SENDER_MARKER = Symbol(\"linkInSender\");\nexport class SyncModelTransfer extends ModelTransfer {\n    constructor(core) {\n        super(core);\n        /**\n         * ref fun statis toString\n         */\n        this._rfsts = refFunctionStaticToStringFactory();\n    }\n    _genLinkInSender(port, refId) {\n        const req = (linkIn) => this._reqLinkIn(port, refId, linkIn);\n        const send = (linkIn) => this._sendLinkIn(port, refId, linkIn);\n        return { __marker__: SENDER_MARKER, send, req };\n    }\n    _getDefaultProxyHanlder(sender) {\n        const proxyHandler = {\n            getPrototypeOf: (_target) => sender.req([0 /* GetPrototypeOf */]),\n            setPrototypeOf: (_target, proto) => sender.req([1 /* SetPrototypeOf */, proto]),\n            isExtensible: (target) => sender.req([2 /* IsExtensible */]),\n            preventExtensions: (_target) => sender.req([3 /* PreventExtensions */]),\n            getOwnPropertyDescriptor: (_target, prop) => sender.req([\n                4 /* GetOwnPropertyDescriptor */,\n                prop,\n            ]),\n            has: (_target, prop) => sender.req([5 /* Has */]),\n            /**导入子模块 */\n            get: (_target, prop, _reciver) => \n            // console.log(\"get\", prop),\n            sender.req([6 /* Get */, prop]),\n            /**发送 set 操作 */\n            set: (_target, prop, value, _receiver) => sender.req([7 /* Set */, prop, value]),\n            deleteProperty: (_target, prop) => sender.req([8 /* DeleteProperty */, prop]),\n            defineProperty: (_target, prop, attr) => sender.req([9 /* DefineProperty */, prop, attr]),\n            ownKeys: (_target) => sender.req([10 /* OwnKeys */]),\n            apply: (_target, thisArg, argArray) => sender.req([11 /* Apply */, thisArg, ...argArray]),\n            construct: (_target, argArray, newTarget) => sender.req([12 /* Construct */, newTarget, ...argArray]),\n        };\n        return proxyHandler;\n    }\n    /**打包指令 */\n    _pkgLinkIn(targetId, linkIn, hasOut) {\n        const { transfer } = this.core;\n        return transfer.linkObj2TransferableBinary({\n            type: 2 /* In */,\n            // reqId,\n            targetId,\n            in: linkIn.map((a) => CallbackToSync(transfer.Any2InOutBinary, [a], transfer)),\n            hasOut,\n        });\n    }\n    _reqLinkIn(port, targetId, linkIn) {\n        const { transfer } = this.core;\n        const tb = this._pkgLinkIn(targetId, linkIn, true);\n        /// 执行请求\n        const bin = CallbackToSync(port.req, [tb], port);\n        /// 处理请求\n        const linkObj = transfer.transferableBinary2LinkObj(bin);\n        if (linkObj.type !== 3 /* Out */) {\n            throw new TypeError();\n        }\n        if (linkObj.isThrow) {\n            const err_iob = linkObj.out.slice().pop();\n            const err = err_iob && transfer.InOutBinary2Any(err_iob);\n            throw err;\n        }\n        const res_iob = linkObj.out.slice().pop();\n        const res = res_iob && transfer.InOutBinary2Any(res_iob);\n        return res;\n    }\n    _sendLinkIn(port, targetId, linkIn) {\n        const { transfer } = this.core;\n        const tb = transfer.linkObj2TransferableBinary({\n            type: 2 /* In */,\n            // reqId,\n            targetId,\n            in: linkIn.map((a) => CallbackToSync(transfer.Any2InOutBinary, [a], transfer)),\n            hasOut: false,\n        });\n        port.send(tb);\n    }\n    /**\n     * 主动生成引用代理\n     * @param port\n     * @param refId\n     */\n    _createImportByRefId(port, refId) {\n        const refHook = this._createImportRefHook(port, refId);\n        const source = refHook.getSource();\n        if (refHook.type === \"object\") {\n            const proxyHanlder = refHook.getProxyHanlder();\n            const proxy = new Proxy(source, proxyHanlder);\n            return proxy;\n        }\n        return source;\n    }\n    getLinkInSenderByProxy(obj) {\n        if (obj) {\n            const sender = obj[PROTOCAL_SENDER];\n            if (sender.__marker__ === SENDER_MARKER) {\n                return sender;\n            }\n        }\n    }\n    _createImportRefHook(port, refId) {\n        const refExtends = this.core.importStore.idExtendsStore.get(refId);\n        if (!refExtends) {\n            throw new ReferenceError();\n        }\n        let ref;\n        if (refExtends.type === 0 /* Function */) {\n            const factory = IOB_EFT_Factory_Map.get(refExtends.funType);\n            if (!factory) {\n                throw new TypeError();\n            }\n            const sourceFun = factory.factory();\n            const funRef = {\n                type: \"object\",\n                getSource: () => sourceFun,\n                getProxyHanlder: () => {\n                    const sender = this._genLinkInSender(port, refId);\n                    const defaultProxyHanlder = this._getDefaultProxyHanlder(sender);\n                    const functionProxyHanlder = {\n                        ...defaultProxyHanlder,\n                        get: (target, prop, receiver) => {\n                            if (prop === \"name\") {\n                                return refExtends.name;\n                            }\n                            if (prop === \"length\") {\n                                return refExtends.length;\n                            }\n                            //#region 自定义属性\n                            if (prop === IMPORT_FUN_EXTENDS_SYMBOL) {\n                                return refExtends;\n                            }\n                            if (prop === PROTOCAL_SENDER) {\n                                return sender;\n                            }\n                            //#endregion\n                            //#region 静态的toString模式下的本地模拟\n                            /**\n                             * 本地模拟的toString，constructor和protoype等等属性都没有绑定远程\n                             * 这里纯粹是为了加速，模拟远端的返回，可以不用\n                             * @TODO 配置成可以可选模式\n                             */\n                            if (prop === \"toString\" &&\n                                refExtends.toString.mode === 1 /* static */) {\n                                return this._rfsts;\n                            }\n                            //#endregion\n                            return defaultProxyHanlder.get(target, prop, receiver);\n                        },\n                    };\n                    return functionProxyHanlder;\n                },\n            };\n            ref = funRef;\n        }\n        else if (refExtends.type === 1 /* Object */) {\n            const sourceObj = {};\n            const objRef = {\n                type: \"object\",\n                getSource: () => sourceObj,\n                getProxyHanlder: () => {\n                    const sender = this._genLinkInSender(port, refId);\n                    const defaultProxyHanlder = this._getDefaultProxyHanlder(sender);\n                    /**\n                     * 因为对象一旦被设置状态后，无法回退，所以这里可以直接根据现有的状态来判断对象的可操作性\n                     * @TODO 使用isExtensible isFrozen isSealed来改进\n                     */\n                    const functionProxyHanlder = {\n                        ...defaultProxyHanlder,\n                        get: (target, prop, receiver) => {\n                            //#region 自定义属性\n                            if (prop === PROTOCAL_SENDER) {\n                                return sender;\n                            }\n                            //#endregion\n                            return defaultProxyHanlder.get(target, prop, receiver);\n                        },\n                        set(target, prop, value, receiver) {\n                            /**目前如果要实现判断是insert还是update，就要基于已经知道有多少的属性来推断，这方面还需要考虑 ArrayLike 的优化\n                             * 这一切可能要做成缓存的模式，缓存被禁止的属性\n                             * @TODO 如果是 不能add 当 可以update 的模式，就要收集哪些是不能add的，之后就要直接在本地禁止\n                             */\n                            if ((refExtends.status & 2 /* update */) === 0) {\n                                return false;\n                            }\n                            return defaultProxyHanlder.set(target, prop, value, receiver);\n                        },\n                        deleteProperty(target, prop) {\n                            if ((refExtends.status & 4 /* delete */) !== 0) {\n                                return defaultProxyHanlder.deleteProperty(target, prop);\n                            }\n                            return false;\n                        },\n                    };\n                    return functionProxyHanlder;\n                },\n            };\n            ref = objRef;\n        }\n        else if (refExtends.type === 2 /* Symbol */) {\n            let sourceSym;\n            if (refExtends.global) {\n                const globalSymInfo = globalSymbolStore.get(refExtends.description);\n                if (!globalSymInfo) {\n                    throw new TypeError();\n                }\n                sourceSym = globalSymInfo.sym;\n            }\n            else {\n                sourceSym = refExtends.unique\n                    ? Symbol.for(refExtends.description)\n                    : Symbol(refExtends.description);\n            }\n            const symRef = {\n                type: \"primitive\",\n                getSource: () => sourceSym,\n            };\n            ref = symRef;\n        }\n        if (!ref) {\n            throw new TypeError();\n        }\n        return ref;\n    }\n    InOutBinary2Any(bin) {\n        const { port, importStore, exportStore } = this.core;\n        switch (bin.type) {\n            //   case LinkItemType.Default:\n            //     return defaultCtx;\n            case 3 /* Locale */:\n                const loc = exportStore.getObjById(bin.locId) || exportStore.getSymById(bin.locId);\n                if (!loc) {\n                    throw new ReferenceError();\n                }\n                return loc;\n            case 2 /* Ref */:\n            case 1 /* RemoteSymbol */:\n                /// 读取缓存中的应用对象\n                let cachedProxy = importStore.getProxyById(bin.refId);\n                if (cachedProxy === undefined) {\n                    // 保存引用信息\n                    importStore.idExtendsStore.set(bin.refId, bin.extends);\n                    /// 使用导入功能生成对象\n                    cachedProxy = this._createImportByRefId(port, bin.refId);\n                    /// 缓存对象\n                    importStore.saveProxyId(cachedProxy, bin.refId);\n                }\n                return cachedProxy;\n            case 0 /* Clone */:\n                return bin.data;\n        }\n        throw new TypeError();\n    }\n}\n","import { ComlinkCore } from \"@bfchain/comlink-core\";\nimport { getFunctionExportDescription, IOB_EFT_Factory_Map, getFunctionType, } from \"@bfchain/comlink-protocol\";\nimport \"@bfchain/comlink-typings\";\nimport { CallbackToSync } from \"./helper\";\nimport { IS_ASYNC_APPLY_FUN_MARKER, IS_SYNC_APPLY_FUN_MARKER } from \"./const\";\nimport { SyncModelTransfer } from \"./SyncModelTransfer\";\nexport class ComlinkSync extends ComlinkCore {\n    constructor(port, name) {\n        super(port, name);\n        this.transfer = new SyncModelTransfer(this);\n        this._syncWM = new WeakMap();\n        this._asyncWM = new WeakMap();\n    }\n    // /**\n    //  * ref fun statis toString\n    //  */\n    // private _rfsts = refFunctionStaticToStringFactory();\n    $getEsmReflectHanlder(opeartor) {\n        const hanlder = super.$getEsmReflectHanlder(opeartor);\n        if (opeartor === 11 /* Apply */ || opeartor === 19 /* SyncApply */) {\n            const applyHanlder = (target, args) => {\n                if (target === Function.prototype.toString) {\n                    const ctx = args[0];\n                    const exportDescriptor = getFunctionExportDescription(ctx);\n                    /// 保护源码\n                    if (!exportDescriptor.showSourceCode) {\n                        // console.log(\"get to string from remote\");\n                        return IOB_EFT_Factory_Map.get(getFunctionType(ctx)).toString({ name: ctx.name });\n                    }\n                }\n                return hanlder.fun(target, args);\n            };\n            return { type: hanlder.type, fun: applyHanlder };\n        }\n        return hanlder;\n    }\n    import(key = \"default\") {\n        const importModule = CallbackToSync(this.$getImportModule, [], this);\n        return Reflect.get(importModule, key);\n    }\n    importAsSync(key = \"default\") {\n        return this.asyncToSync(this.import(key));\n    }\n    asyncToSync(fun) {\n        if (typeof fun !== \"function\") {\n            throw new TypeError();\n        }\n        if (Reflect.get(fun, IS_ASYNC_APPLY_FUN_MARKER)) {\n            return fun;\n        }\n        let syncFun = this._syncWM.get(fun);\n        if (!syncFun) {\n            const sender = this.transfer.getLinkInSenderByProxy(fun);\n            if (!sender) {\n                throw new TypeError();\n            }\n            syncFun = new Proxy(fun, {\n                get(_target, prop, r) {\n                    if (prop === IS_ASYNC_APPLY_FUN_MARKER) {\n                        return true;\n                    }\n                    return Reflect.get(fun, prop, r);\n                },\n                apply: (_target, thisArg, argArray) => {\n                    return sender.req([19 /* SyncApply */, thisArg, ...argArray]);\n                },\n            });\n            this.importStore.backupProxyId(syncFun, this.importStore.getProxy(fun).id);\n            this._syncWM.set(fun, syncFun);\n        }\n        return syncFun;\n    }\n    importAsAsync(key = \"default\") {\n        return this.syncToAsync(this.import(key));\n    }\n    syncToAsync(fun) {\n        if (typeof fun !== \"function\") {\n            throw new TypeError();\n        }\n        if (Reflect.get(fun, IS_SYNC_APPLY_FUN_MARKER)) {\n            return fun;\n        }\n        let asyncFun = this._asyncWM.get(fun);\n        if (!asyncFun) {\n            const sender = this.transfer.getLinkInSenderByProxy(fun);\n            if (!sender) {\n                throw new TypeError();\n            }\n            asyncFun = new Proxy(fun, {\n                get(_target, prop, r) {\n                    if (prop === IS_SYNC_APPLY_FUN_MARKER) {\n                        return true;\n                    }\n                    return Reflect.get(fun, prop, r);\n                },\n                apply: (_target, thisArg, argArray) => {\n                    /// 要使用本地的promise对任务进行包裹，不然对方接下来会进入卡死状态。\n                    return new Promise((resolve, reject) => {\n                        /* 无需返回值，所以走 .send ，这个是异步的，不会造成阻塞 */\n                        sender.send([20 /* AsyncApply */, resolve, reject, thisArg, ...argArray]);\n                    });\n                },\n            });\n            this.importStore.backupProxyId(asyncFun, this.importStore.getProxy(fun).id);\n            this._asyncWM.set(fun, asyncFun);\n        }\n        return asyncFun;\n    }\n}\n","export function bindThis(target, propertyKey, descriptor) {\n    if (!descriptor || typeof descriptor.value !== \"function\") {\n        throw new TypeError(`Only methods can be decorated with @bind. <${propertyKey}> is not a method!`);\n    }\n    return {\n        configurable: true,\n        get() {\n            const bound = descriptor.value.bind(this);\n            Object.defineProperty(this, propertyKey, {\n                value: bound,\n                configurable: true,\n                writable: true,\n            });\n            return bound;\n        },\n    };\n}\n","const CACHE_KEYS_SYMBOL = Symbol(\"CACHE_GETTER_KEYS_STORE\");\nfunction getCacheKeys(protoTarget) {\n    let CACHE_KEYS = Reflect.get(protoTarget, CACHE_KEYS_SYMBOL);\n    if (!CACHE_KEYS) {\n        CACHE_KEYS = new Map();\n        Reflect.set(protoTarget, CACHE_KEYS_SYMBOL, CACHE_KEYS);\n    }\n    return CACHE_KEYS;\n}\nfunction keyGenerator(protoTarget, prop) {\n    const CACHE_KEYS = getCacheKeys(protoTarget);\n    let symbol = CACHE_KEYS.get(prop);\n    if (!symbol) {\n        symbol = Symbol(`[${typeof prop}]${String(prop)}`);\n        CACHE_KEYS.set(prop, symbol);\n    }\n    return symbol;\n}\nexport function cacheGetter(propTarget, prop, descriptor) {\n    if (typeof descriptor.get !== \"function\") {\n        throw new TypeError(`property ${String(prop)} must has an getter function.`);\n    }\n    const source_fun = descriptor.get;\n    const CACHE_VALUE_SYMBOL = keyGenerator(propTarget, prop);\n    const getter = function () {\n        if (CACHE_VALUE_SYMBOL in this) {\n            return this[CACHE_VALUE_SYMBOL].value;\n        }\n        else {\n            const value = source_fun.call(this);\n            const cacheValue = {\n                target: this,\n                value,\n                sourceFun: source_fun,\n            };\n            this[CACHE_VALUE_SYMBOL] = cacheValue;\n            if (descriptor.set === undefined) {\n                try {\n                    Object.defineProperty(this, prop, {\n                        value,\n                        writable: false,\n                        configurable: true,\n                        enumerable: descriptor.enumerable,\n                    });\n                }\n                catch (err) {\n                    console.error(err);\n                }\n            }\n            return value;\n        }\n    };\n    Reflect.set(getter, \"source_fun\", source_fun);\n    descriptor.get = getter;\n    return descriptor;\n}\nexport function cleanGetterCache(target, prop) {\n    const CACHE_KEYS = getCacheKeys(target);\n    if (CACHE_KEYS.has(prop) === false) {\n        return true;\n    }\n    const CACHE_VALUE_SYMBOL = CACHE_KEYS.get(prop);\n    return _cleanGetterCache(target, prop, CACHE_VALUE_SYMBOL);\n}\nexport function cleanAllGetterCache(target) {\n    const CACHE_KEYS = getCacheKeys(target);\n    for (const [prop, symbol] of CACHE_KEYS) {\n        _cleanGetterCache(target, prop, symbol);\n    }\n}\nfunction _cleanGetterCache(target, prop, CACHE_VALUE_SYMBOL) {\n    const cacheValue = Reflect.get(target, CACHE_VALUE_SYMBOL);\n    if (cacheValue === undefined) {\n        return true;\n    }\n    if (Reflect.deleteProperty(cacheValue.target, CACHE_VALUE_SYMBOL) === false) {\n        return false;\n    }\n    Reflect.deleteProperty(cacheValue.target, prop);\n    return true;\n}\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nimport { bindThis } from \"./bindThis\";\nexport class PropArrayHelper {\n    constructor(pid = Math.random()\n        .toString(36)\n        .substr(2)) {\n        this.pid = pid;\n        this.CLASS_PROTO_ARRAYDATA_POOL = new Map();\n        this.PA_ID_KEY = Symbol(`@PAID:${this.pid}`);\n        this.PA_ID_VALUE = 0;\n    }\n    get(target, key) {\n        var res = new Set();\n        const CLASS_PROTO_ARRAYDATA = this.CLASS_PROTO_ARRAYDATA_POOL.get(key);\n        if (CLASS_PROTO_ARRAYDATA) {\n            do {\n                if (target.hasOwnProperty(this.PA_ID_KEY)) {\n                    const arr_data = CLASS_PROTO_ARRAYDATA.get(target[this.PA_ID_KEY]);\n                    if (arr_data) {\n                        for (var item of arr_data) {\n                            res.add(item);\n                        }\n                    }\n                }\n            } while ((target = Object.getPrototypeOf(target)));\n        }\n        return res;\n    }\n    add(target, key, value) {\n        var CLASS_PROTO_ARRAYDATA = this.CLASS_PROTO_ARRAYDATA_POOL.get(key);\n        if (!CLASS_PROTO_ARRAYDATA) {\n            CLASS_PROTO_ARRAYDATA = new Map();\n            this.CLASS_PROTO_ARRAYDATA_POOL.set(key, CLASS_PROTO_ARRAYDATA);\n        }\n        const pa_id = target.hasOwnProperty(this.PA_ID_KEY)\n            ? target[this.PA_ID_KEY]\n            : (target[this.PA_ID_KEY] = Symbol(`@PAID:${this.pid}#${this.PA_ID_VALUE++}`));\n        var arr_data = CLASS_PROTO_ARRAYDATA.get(pa_id);\n        if (!arr_data) {\n            arr_data = [value];\n            CLASS_PROTO_ARRAYDATA.set(pa_id, arr_data);\n        }\n        else {\n            arr_data.push(value);\n        }\n    }\n    remove(target, key, value) {\n        const CLASS_PROTO_ARRAYDATA = this.CLASS_PROTO_ARRAYDATA_POOL.get(key);\n        if (!CLASS_PROTO_ARRAYDATA) {\n            return;\n        }\n        do {\n            if (!target.hasOwnProperty(this.PA_ID_KEY)) {\n                break;\n            }\n            const pa_id = target[this.PA_ID_KEY];\n            var arr_data = CLASS_PROTO_ARRAYDATA.get(pa_id);\n            if (!arr_data) {\n                return;\n            }\n            const index = arr_data.indexOf(value);\n            if (index !== -1) {\n                arr_data.splice(index, 1);\n                return;\n            }\n        } while ((target = Object.getPrototypeOf(target)));\n    }\n}\n__decorate([\n    bindThis,\n    __metadata(\"design:type\", Function),\n    __metadata(\"design:paramtypes\", [Object, Object]),\n    __metadata(\"design:returntype\", void 0)\n], PropArrayHelper.prototype, \"get\", null);\n__decorate([\n    bindThis,\n    __metadata(\"design:type\", Function),\n    __metadata(\"design:paramtypes\", [Object, Object, Object]),\n    __metadata(\"design:returntype\", void 0)\n], PropArrayHelper.prototype, \"add\", null);\n__decorate([\n    bindThis,\n    __metadata(\"design:type\", Function),\n    __metadata(\"design:paramtypes\", [Object, Object, Object]),\n    __metadata(\"design:returntype\", void 0)\n], PropArrayHelper.prototype, \"remove\", null);\n","export var THROTTLE_WRAP_PLOT;\n(function (THROTTLE_WRAP_PLOT) {\n    THROTTLE_WRAP_PLOT[THROTTLE_WRAP_PLOT[\"WAIT_RESULT_RETURN\"] = 0] = \"WAIT_RESULT_RETURN\";\n    THROTTLE_WRAP_PLOT[THROTTLE_WRAP_PLOT[\"NO_WAIT_EXEC_TIME\"] = 1] = \"NO_WAIT_EXEC_TIME\";\n})(THROTTLE_WRAP_PLOT || (THROTTLE_WRAP_PLOT = {}));\nexport function throttleWrap(ms = 1000, plot = THROTTLE_WRAP_PLOT.WAIT_RESULT_RETURN) {\n    return function (target, name, descriptor) {\n        const source_fun = descriptor.value;\n        let run_lock;\n        descriptor.value = async function lock(...args) {\n            if (run_lock) {\n                run_lock = new Promise((resolve, reject) => {\n                    setTimeout(() => {\n                        const res = source_fun.apply(this, args);\n                        if (plot === THROTTLE_WRAP_PLOT.WAIT_RESULT_RETURN) {\n                            res.then(resolve, reject).finally(() => {\n                                run_lock = undefined;\n                            });\n                        }\n                        else if (plot === THROTTLE_WRAP_PLOT.NO_WAIT_EXEC_TIME) {\n                            resolve(res);\n                            run_lock = undefined;\n                        }\n                        else {\n                            throw new SyntaxError(`No support throttleWrap plot:${THROTTLE_WRAP_PLOT.NO_WAIT_EXEC_TIME}`);\n                        }\n                    }, ms);\n                });\n            }\n            return run_lock;\n        };\n        descriptor.value.source_fun = source_fun;\n        return descriptor;\n    };\n}\n","const NO_ALLOW_PROP = new Set([\n    Symbol.toPrimitive,\n    Symbol.toStringTag,\n    Symbol.hasInstance,\n    Symbol.species,\n    /// 不能直接支持Symbol.iterator，只能用Symbol.asyncIterator来替代Symbol.iterator\n    Symbol.iterator,\n    // Symbol.asyncIterator,\n    Symbol.isConcatSpreadable,\n    Symbol.match,\n    Symbol.matchAll,\n    Symbol.replace,\n    Symbol.search,\n    Symbol.split,\n]);\nconst __THEN_DISABLED__ = new WeakSet();\nexport function createHolderProxyHanlder(holderReflect) {\n    const proxyHanlder = {\n        getPrototypeOf: () => {\n            return null;\n        },\n        setPrototypeOf: () => {\n            throw new Error(\"no support AsyncReflect.setPrototypeOf\");\n            // return false;\n        },\n        isExtensible: () => {\n            throw new Error(\"no support AsyncReflect.isExtensible\");\n        },\n        preventExtensions: () => {\n            throw new Error(\"no support AsyncReflect.preventExtensions\");\n        },\n        getOwnPropertyDescriptor: () => {\n            throw new Error(\"no support AsyncReflect.getOwnPropertyDescriptor\");\n        },\n        defineProperty: () => {\n            throw new Error(\"no support AsyncReflect.defineProperty\");\n        },\n        ownKeys: () => {\n            throw new Error(\"no support AsyncReflect.ownKeys\");\n        },\n        has: () => {\n            throw new Error(\"no support AsyncReflect.has\");\n        },\n        /**导入子模块 */\n        get: (_target, prop, r) => {\n            // 禁止支持一些特定的symbol\n            if (NO_ALLOW_PROP.has(prop)) {\n                return;\n            }\n            if (prop === \"then\") {\n                /// 一次性\n                if (__THEN_DISABLED__.delete(holderReflect)) {\n                    return;\n                }\n                return (resolve, reject) => {\n                    holderReflect.toValueSync((ret) => {\n                        if (ret.isError) {\n                            return reject(ret.error);\n                        }\n                        if (isHolder(ret.data)) {\n                            /// 如果是一个远端对象\n                            const thenFun = holderReflect.assetHolder(\"then\");\n                            thenFun.Operator_typeOfHolder().toValueSync((typeNameRet) => {\n                                if (typeNameRet.isError) {\n                                    return reject(typeNameRet.error);\n                                }\n                                if (typeNameRet.data === \"function\") {\n                                    thenFun\n                                        .applyHolder(holderReflect.toHolder(), [resolve, reject])\n                                        .toValueSync(() => {\n                                        // 这个promise没人捕捉，也不需要捕捉\n                                    });\n                                }\n                                else {\n                                    /// 下面的resolve会导致再次触发then，所以这里要一次性进行then禁用\n                                    __THEN_DISABLED__.add(holderReflect);\n                                    resolve(ret.data);\n                                }\n                            });\n                        }\n                        else {\n                            /// 如果是一个本地对象\n                            if (ret.data && typeof ret.data[\"then\"] === \"function\") {\n                                // 这个promise没人捕捉，也不需要捕捉\n                                ret.data.then(resolve, reject);\n                            }\n                            else {\n                                resolve(ret.data);\n                            }\n                        }\n                    });\n                };\n            }\n            /**迭代器的支持 */\n            if (prop === Symbol.asyncIterator) {\n                return async function* () {\n                    if (await holderReflect.has(Symbol.asyncIterator)) {\n                        yield* holderReflect.asyncIterator();\n                    }\n                    else {\n                        yield* holderReflect.iterator();\n                    }\n                };\n            }\n            return holderReflect.assetHolder(prop).toAsyncValue();\n        },\n        /**发送 set 操作 */\n        set: (_target, prop, value, receiver) => {\n            const setHolderReflect = holderReflect.setHolder(prop, value);\n            let res = true;\n            setHolderReflect.toValueSync((ret) => {\n                if (ret.isError === false) {\n                    res = ret.data;\n                }\n            });\n            return res;\n        },\n        deleteProperty: (target, prop) => {\n            const setHolderReflect = holderReflect.deletePropertyHolder(prop);\n            let res = true;\n            setHolderReflect.toValueSync((ret) => {\n                if (ret.isError === false) {\n                    res = ret.data;\n                }\n            });\n            return res;\n        },\n        apply: (_target, thisArg, argArray) => {\n            const applyHolderReflect = holderReflect.applyHolder(thisArg, argArray);\n            applyHolderReflect.toValueSync(() => {\n                ///强行调取触发指令发送\n            });\n            return applyHolderReflect.toAsyncValue();\n        },\n        construct: (_target, argArray, newTarget) => {\n            const constructHolderReflect = holderReflect.constructHolder(argArray, newTarget);\n            constructHolderReflect.toValueSync(() => {\n                ///强行调取触发指令发送\n            });\n            return constructHolderReflect.toAsyncValue();\n        },\n    };\n    return proxyHanlder;\n}\nconst __HOLDER_REFLECT_WM__ = new WeakMap();\nconst __REFLECT_HOLDER_WM__ = new WeakMap();\nexport function getHolder(holderReflect) {\n    let holder = __REFLECT_HOLDER_WM__.get(holderReflect);\n    if (holder === undefined) {\n        holder = new Proxy(Function(`return function ${holderReflect.name}(){}`)(), createHolderProxyHanlder(holderReflect));\n        __HOLDER_REFLECT_WM__.set(holder, holderReflect);\n        __REFLECT_HOLDER_WM__.set(holderReflect, holder);\n    }\n    return holder;\n}\nexport function isHolder(target) {\n    return __HOLDER_REFLECT_WM__.has(target);\n}\nexport function getHolderReflect(target) {\n    return __HOLDER_REFLECT_WM__.get(target);\n}\n","import { helper } from \"@bfchain/comlink-core\";\nexport function CallbackToAsync(cbCaller, args, ctx) {\n    let syncRet;\n    /// 默认是同步模式\n    let syncResolve = (data) => {\n        syncRet = {\n            isError: false,\n            data,\n        };\n    };\n    let syncReject = (error) => {\n        syncRet = {\n            isError: true,\n            error,\n        };\n    };\n    try {\n        /// 执行，并尝试同步\n        cbCaller.call(ctx, (ret) => {\n            if (ret.isError) {\n                syncReject(ret.error);\n            }\n            else {\n                syncResolve(ret.data);\n            }\n        }, ...args);\n    }\n    catch (err) {\n        syncReject(err);\n    }\n    /// 得到及时的响应，直接返回\n    if (syncRet !== undefined) {\n        return helper.OpenArg(syncRet);\n    }\n    /// 没有得到及时的响应，进入异步模式\n    return new Promise((resolve, reject) => {\n        syncResolve = resolve;\n        syncReject = reject;\n    });\n}\n/**\n * ## 强泛型定义的bind实现\n * 这种写法很骚，因为一共定义了两套泛型，一套是由传入的cbCaller提供，一套由返回后，外界的调用者提供\n * 而cbCaller因为被夹在中间，要用于满足外界调用者的类型定义，所以在内部不得不any化\n *\n * ---\n * 但是这种推导也是**有条件的**\n * 举个例子:\n * ```ts\n * cbCaller = <A1>(cb: BFChainComlink.Callback<Result<A1>>, arg1: A1) => void\n * type Result<T> = ...\n * ```\n * 在上面这个例子中,终点在于 `Result<T>`，\n * 在这里 `R = Result<T>`， 同时 `R2 extends R`。\n * 所以当我们要用R2推导出R的时候， T此时就是由外部输入。\n *\n * 此时如果我们是这样定义 `type Result<T extends ...>` 就会可能出现问题。\n * 比如：\n * ```ts\n * cbCaller = <A1 extends keyof T>(cb: BFChainComlink.Callback<Result<T, A1>>, arg1: A1) => void\n * type Result<T, K extends keyof T> = T[K]\n * ```\n * 因为我们把原本有关系的 `Result<T,A1>` 和 `A1`，分解成了`R`与`ARGS`两个没有关系的类型。\n * 也就是说此时`R`与`ARGS`分别独立携带了一份`A1`，而`R`的那份`A1`则是由`R2`继承过去，用于接收外界的输入。\n * 也就会导致，当我们使用`R2`来尝试推理`A1`时，就会与`ARGS`携带进来的`A1`发生冲突。\n * 编译器无法认证到底要使用哪一种。\n */\nexport function CallbackToAsyncBind(cbCaller, ctx) {\n    return (...args) => CallbackToAsync(cbCaller, args, ctx);\n}\nexport function isNil(value) {\n    return value === undefined || value === null;\n}\nexport function isNoNilPrimivite(value) {\n    switch (typeof value) {\n        case \"bigint\":\n        case \"boolean\":\n        case \"number\":\n        case \"string\":\n        case \"symbol\":\n            return true;\n    }\n    return false;\n}\n","export class ReflectForbidenMethods {\n    constructor() {\n        // nullOrUndefine: reflectForbidenFactory('')\n        this.deleteProperty = this._factory_NoObject(\"deleteProperty\");\n        this.defineProperty = this._factory_NoObject(\"defineProperty\");\n        this.ownKeys = this._factory_NoObject(\"ownKeys\");\n        this.has = this._factory_NoObject(\"has\");\n        this.set = this._factory_NoObject(\"set\");\n        this.get = this._factory_NoObject(\"get\");\n        this.getPrototypeOf = this._factory_NoObject(\"getPrototypeOf\");\n        this.isExtensible = this._factory_NoObject(\"isExtensible\");\n        this.preventExtensions = this._factory_NoObject(\"preventExtensions\");\n        this.setPrototypeOf = this._factory_NoObject(\"setPrototypeOf\");\n        this.apply = this._factory(\"apply\", \"[holder ${this.name}] is not a function\");\n        this.construct = this._factory(\"apply\", \"[holder ${this.name}] is not a constructor\");\n        //   nilConvert = this._factory(\n        //     \"deleteProperty\",\n        //     \"Cannot convert ${this.name}(undefined or null) to object\",\n        //   );\n        //   nilSet = this._factory(\n        //     \"defineProperty\",\n        //     \"Cannot set property '${arguments[0]}' of ${this.name}(undefined or null)\",\n        //   );\n        this.nilGet = this._factory(\"defineProperty\", \"Cannot read property '${arguments[0]}' of ${this.name}(undefined or null)\");\n        //   nilIn = this._factory(\n        //     \"has\",\n        //     \"Cannot use 'in' operator to search for '${arguments[0]}' in ${this.name}(undefined or null)\",\n        //   );\n    }\n    _factory(method, errorMessage) {\n        return Function(`return function ${method}Forbiden(){throw new TypeError(\\`${errorMessage}\\`)}`);\n    }\n    _factory_NoObject(method) {\n        return this._factory(method, `Reflect.${method} called on non-object(\\${this.name})`);\n    }\n}\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nimport { helper } from \"@bfchain/comlink-core\";\nimport { globalSymbolStore, IMPORT_FUN_EXTENDS_SYMBOL, refFunctionStaticToStringFactory, } from \"@bfchain/comlink-protocol\";\nimport { isObj } from \"@bfchain/comlink-typings\";\nimport { bindThis, cacheGetter, cleanAllGetterCache, cleanGetterCache, } from \"@bfchain/util-decorator\";\nimport { getHolder, getHolderReflect, isHolder } from \"./Holder\";\nimport { CallbackToAsync, CallbackToAsyncBind, isNil } from \"./helper\";\nimport { ReflectForbidenMethods } from \"./ReflectForbidenMethods\";\nimport \"./const\";\nlet ID_ACC = 0;\n//#region 一些辅助性函数\nconst reflectForbidenMethods = new ReflectForbidenMethods();\nconst refFunctionStaticToString = refFunctionStaticToStringFactory();\n/**要兼容Primitive值 */\nfunction alwaysTrueCallbackCaller(cb) {\n    return cb({ isError: false, data: true });\n}\nfunction alwaysFalseCallbackCaller(cb) {\n    return cb({ isError: false, data: false });\n}\nfunction alwaysUndefinedCallbackCaller(cb) {\n    return cb({ isError: false, data: undefined });\n}\nfunction end(iobCacher) {\n    throw new TypeError(`unknown iobCacher type: ${iobCacher}`);\n}\n//#endregion\nexport class HolderReflect {\n    constructor(linkSenderArgs, \n    // public linkInSender: <R>(\n    //   linkIn: readonly [EmscriptenReflect, ...unknown[]],\n    //   hasOut?: BFChainComlink.HolderReflect<R> | false,\n    // ) => unknown,\n    core) {\n        this.linkSenderArgs = linkSenderArgs;\n        this.core = core;\n        this.id = ID_ACC++;\n        this.name = `holder_${this.id}`;\n        this.staticMode = true;\n    }\n    toHolder() {\n        return getHolder(this);\n    }\n    //#region Holder特有接口\n    toValueSync(cb) {\n        let iobCacher = this._iobCacher;\n        let needSend = false;\n        if (iobCacher === undefined) {\n            needSend = true;\n            iobCacher = this._iobCacher = {\n                type: 0 /* WAITING */,\n                waitter: [],\n            };\n        }\n        if (iobCacher.type === 0 /* WAITING */) {\n            iobCacher.waitter.push((ret) => {\n                try {\n                    helper.OpenArg(ret);\n                    iobCacher = this._iobCacher;\n                    if (!iobCacher || iobCacher.type === 0 /* WAITING */) {\n                        throw new TypeError();\n                    }\n                    this.toValueSync(cb);\n                }\n                catch (error) {\n                    cb({ isError: true, error });\n                }\n            });\n            if (needSend) {\n                const { linkSenderArgs } = this;\n                if (linkSenderArgs.linkIn.length === 0) {\n                    throw new TypeError();\n                }\n                if (linkSenderArgs.refId === undefined) {\n                    throw new TypeError(\"no refId\");\n                }\n                this.core.transfer.sendLinkIn(linkSenderArgs.port, linkSenderArgs.refId, linkSenderArgs.linkIn, this);\n                // this.linkInSender(this.linkIn as readonly [EmscriptenReflect, ...unknown[]], this);\n            }\n            return;\n            // iobCacher = this._iobCacher;\n        }\n        if (iobCacher.type === 2 /* LOCAL */ ||\n            iobCacher.type === 4 /* REMOTE_SYMBOL */) {\n            cb({ isError: false, data: iobCacher.value });\n            return;\n        }\n        if (iobCacher.type === 3 /* REMOTE_REF */) {\n            cb({ isError: false, data: this.toHolder() });\n            return;\n        }\n        if (iobCacher.type === 1 /* THROW */) {\n            this._getCatchedReflect().toValueSync((ret) => {\n                const error = helper.OpenArg(ret);\n                cb({ isError: true, error: error });\n            });\n            return;\n        }\n        end(iobCacher);\n    }\n    get toValue() {\n        return CallbackToAsyncBind(this.toValueSync, this);\n    }\n    toAsyncValue() {\n        const iobCacher = this._iobCacher;\n        if (iobCacher &&\n            (iobCacher.type === 2 /* LOCAL */ ||\n                iobCacher.type === 4 /* REMOTE_SYMBOL */)) {\n            return iobCacher.value;\n        }\n        return this.toHolder();\n    }\n    _getCatchedReflect() {\n        let { _catchedReflect: _catched } = this;\n        if (!_catched) {\n            const { _iobCacher: iobCacher } = this;\n            if ((iobCacher === null || iobCacher === void 0 ? void 0 : iobCacher.type) !== 1 /* THROW */) {\n                throw new Error(\"no an error\");\n            }\n            _catched = new HolderReflect(this.linkSenderArgs, this.core);\n            _catched.bindIOB(iobCacher.cacher.iob);\n        }\n        return _catched;\n    }\n    // private _isError?\n    bindIOB(iob, isError = false, port = this.core.port) {\n        const { _iobCacher: iobCacher } = this;\n        /// 如果已经存在iobCacher，而且不是waiting的状态，那么重复绑定了。注意不能用`iobCacher?.type`\n        if (iobCacher !== undefined && iobCacher.type !== 0 /* WAITING */) {\n            throw new TypeError(\"already bind iob\");\n        }\n        const { exportStore, importStore } = this.core;\n        let remoteIob;\n        let newIobCacher;\n        /// 解析iob，将之定义成local或者remote两种模式\n        switch (iob.type) {\n            case 3 /* Locale */:\n                const loc = exportStore.getObjById(iob.locId) || exportStore.getSymById(iob.locId);\n                if (!loc) {\n                    throw new ReferenceError();\n                }\n                newIobCacher = {\n                    type: 2 /* LOCAL */,\n                    value: loc,\n                    iob,\n                };\n                break;\n            case 0 /* Clone */:\n                newIobCacher = { type: 2 /* LOCAL */, value: iob.data, iob };\n                break;\n            case 2 /* Ref */:\n                remoteIob = iob;\n                newIobCacher = { type: 3 /* REMOTE_REF */, port, iob };\n                break;\n            case 1 /* RemoteSymbol */:\n                remoteIob = iob;\n                let sourceSym;\n                const refExtends = iob.extends;\n                if (refExtends.global) {\n                    const globalSymInfo = globalSymbolStore.get(refExtends.description);\n                    if (!globalSymInfo) {\n                        throw new TypeError();\n                    }\n                    sourceSym = globalSymInfo.sym;\n                }\n                else {\n                    sourceSym = refExtends.unique\n                        ? Symbol.for(refExtends.description)\n                        : Symbol(refExtends.description);\n                }\n                newIobCacher = {\n                    type: 4 /* REMOTE_SYMBOL */,\n                    port,\n                    value: sourceSym,\n                    iob,\n                };\n                break;\n        }\n        if (isError) {\n            newIobCacher = {\n                type: 1 /* THROW */,\n                cacher: newIobCacher,\n            };\n        }\n        this._iobCacher = newIobCacher;\n        if (remoteIob === undefined) {\n            this.linkSenderArgs = {\n                ...this.linkSenderArgs,\n                refId: undefined,\n            };\n        }\n        else {\n            // 保存引用信息\n            importStore.idExtendsStore.set(remoteIob.refId, remoteIob.extends);\n            /// 缓存对象\n            importStore.saveProxyId((isError ? this._getCatchedReflect().toAsyncValue() : this.toAsyncValue()), remoteIob.refId);\n            /// 它是有指令长度的，那么清空指令；对应的，需要重新生成指令发送器\n            this.linkSenderArgs = {\n                ...this.linkSenderArgs,\n                refId: remoteIob.refId,\n                linkIn: [],\n            };\n        }\n        /// 核心属性变更，清理所有getter缓存\n        cleanAllGetterCache(this);\n        iobCacher === null || iobCacher === void 0 ? void 0 : iobCacher.waitter.forEach((cb) => {\n            // try {\n            cb({ isError: false, data: undefined });\n            // } catch (err) {\n            //   console.error(\"uncatch error\", err);\n            // }\n        });\n    }\n    getIOB() {\n        if (this._iobCacher && this._iobCacher.type !== 0 /* WAITING */) {\n            if (this._iobCacher.type === 1 /* THROW */) {\n                return this._iobCacher.cacher.iob;\n            }\n            return this._iobCacher.iob;\n        }\n    }\n    isBindedIOB() {\n        const { _iobCacher } = this;\n        if (_iobCacher && _iobCacher.type !== 0 /* WAITING */) {\n            return true;\n        }\n        return false;\n    }\n    waitIOB() {\n        throw new Error(\"Method not implemented.\");\n    }\n    createSubHolder(subHolderLinkIn) {\n        const { linkSenderArgs } = this;\n        /// 从空指令变成单指令\n        if (linkSenderArgs.linkIn.length === 0) {\n            return new HolderReflect({\n                ...linkSenderArgs,\n                linkIn: subHolderLinkIn,\n            }, this.core);\n        }\n        /// 单指令变成多指令\n        if (linkSenderArgs.linkIn[0] !== 18 /* Multi */) {\n            return new HolderReflect({\n                ...linkSenderArgs,\n                linkIn: [\n                    18 /* Multi */,\n                    /// 加入原有的单指令\n                    linkSenderArgs.linkIn.length,\n                    ...linkSenderArgs.linkIn,\n                    /// 加入新的单指令\n                    subHolderLinkIn.length,\n                    ...subHolderLinkIn,\n                ],\n            }, this.core);\n        }\n        /// 维持多指令\n        return new HolderReflect({\n            ...linkSenderArgs,\n            linkIn: [\n                ...linkSenderArgs.linkIn,\n                /// 加入新的单指令\n                subHolderLinkIn.length,\n                ...subHolderLinkIn,\n            ],\n        }, this.core);\n    }\n    _getSubHolderPrimitiveSync(linkIn, cb) {\n        this.createSubHolder(linkIn).toValueSync(cb);\n    }\n    //#endregion\n    //#region Reflect 接口\n    //#region throw\n    throw_binded(cb) {\n        const iobCacher = this._iobCacher;\n        if (iobCacher.type === 2 /* LOCAL */ ||\n            iobCacher.type === 4 /* REMOTE_SYMBOL */) {\n            helper.rejectCallback(cb, iobCacher.value);\n            return;\n        }\n        if (iobCacher.type === 3 /* REMOTE_REF */) {\n            helper.rejectCallback(cb, this._getCatchedReflect().toHolder());\n            return;\n        }\n        end(iobCacher);\n    }\n    // async throw() {\n    //   const err = await this.toValue();\n    //   throw err;\n    //   // throw await this.toHolder().toString();\n    //   // throw new Error(\"Method not implemented.\");\n    // }\n    //#endregion\n    //#region Reflect.apply\n    apply_local(cb, thisArgument, argumentsList) {\n        helper.resolveCallback(cb, Reflect.apply(this._iobCacher\n            .value, thisArgument, argumentsList));\n    }\n    applyHolder(thisArgument, argumentsList) {\n        return this.createSubHolder([\n            11 /* Apply */,\n            thisArgument,\n            ...argumentsList,\n        ]);\n    }\n    apply_remote(cb, thisArgument, argumentsList) {\n        this.applyHolder(thisArgument, argumentsList).toValueSync(cb);\n    }\n    get applyCallback() {\n        const { _iobCacher: iobCacher } = this;\n        if (\n        // 未知，未发送\n        !iobCacher ||\n            // 未知，未返回\n            iobCacher.type === 0 /* WAITING */ ||\n            /// 已知，远端是函数\n            (iobCacher.type === 3 /* REMOTE_REF */ &&\n                iobCacher.iob.type === 2 /* Ref */ &&\n                iobCacher.iob.extends.type === 0 /* Function */)) {\n            return this.apply_remote;\n        }\n        /// 已知，本地函数\n        if (iobCacher.type === 2 /* LOCAL */ && typeof iobCacher.value === \"function\") {\n            return this.apply_local;\n        }\n        /// 其它\n        if (iobCacher.type === 3 /* REMOTE_REF */ ||\n            iobCacher.type === 4 /* REMOTE_SYMBOL */ ||\n            iobCacher.type === 2 /* LOCAL */) {\n            return reflectForbidenMethods.apply;\n        }\n        if (iobCacher.type === 1 /* THROW */) {\n            return this.throw_binded;\n        }\n        /// 类型安全的非return结束\n        end(iobCacher);\n    }\n    get apply() {\n        return CallbackToAsyncBind(this.applyCallback, this);\n    }\n    //#endregion\n    //#region Reflect.construct\n    construct_local(cb, argumentsList, newTarget) {\n        helper.resolveCallback(cb, Reflect.construct(this._iobCacher\n            .value, argumentsList, newTarget));\n    }\n    constructHolder(argumentsList, newTarget) {\n        return this.createSubHolder([\n            12 /* Construct */,\n            newTarget,\n            ...argumentsList,\n        ]);\n    }\n    construct_remote(cb, argumentsList, newTarget) {\n        this.constructHolder(argumentsList, newTarget).toValueSync(cb);\n    }\n    get constructCallback() {\n        const { _iobCacher: iobCacher } = this;\n        if (\n        // 未知，未发送\n        !iobCacher ||\n            // 未知，未返回\n            iobCacher.type === 0 /* WAITING */) {\n            return this.construct_remote;\n        }\n        /// 已知，远端是函数\n        if (iobCacher.type === 3 /* REMOTE_REF */ &&\n            iobCacher.iob.type === 2 /* Ref */ &&\n            iobCacher.iob.extends.type === 0 /* Function */) {\n            if (iobCacher.iob.extends.canConstruct) {\n                return this.construct_remote;\n            }\n            return reflectForbidenMethods.construct;\n        }\n        /// 已知，本地是函数\n        if (iobCacher.type === 2 /* LOCAL */ && typeof iobCacher.value === \"function\") {\n            return this.construct_local;\n        }\n        /// 其它\n        if (iobCacher.type === 3 /* REMOTE_REF */ ||\n            iobCacher.type === 4 /* REMOTE_SYMBOL */ ||\n            iobCacher.type === 2 /* LOCAL */) {\n            return reflectForbidenMethods.apply;\n        }\n        if (iobCacher.type === 1 /* THROW */) {\n            return this.throw_binded;\n        }\n        /// 类型安全的非return结束\n        end(iobCacher);\n    }\n    get construct() {\n        return CallbackToAsyncBind(this.constructCallback, this);\n    }\n    //#endregion\n    //#region Reflect.defineProperty\n    defineProperty_local(cb, propertyKey, attributes) {\n        helper.resolveCallback(cb, Reflect.defineProperty(this._iobCacher.value, propertyKey, attributes));\n    }\n    definePropertyHolder(propertyKey, attributes) {\n        return this.createSubHolder([\n            9 /* DefineProperty */,\n            propertyKey,\n            attributes,\n        ]);\n    }\n    defineProperty_remote(cb, propertyKey, attributes) {\n        return this.definePropertyHolder(propertyKey, attributes).toValueSync(cb);\n    }\n    get definePropertyCallback() {\n        const { _iobCacher: iobCacher } = this;\n        if (\n        // 未知，未发送\n        !iobCacher ||\n            // 未知，未返回\n            iobCacher.type === 0 /* WAITING */) {\n            return this.defineProperty_remote;\n        }\n        /// 已知，本地\n        if (iobCacher.type === 2 /* LOCAL */) {\n            return this.defineProperty_local;\n        }\n        /// 已知，远端\n        /// 远端Symbol对象\n        if (iobCacher.type === 4 /* REMOTE_SYMBOL */) {\n            return reflectForbidenMethods.defineProperty;\n        }\n        /// 远端引用对象\n        if (iobCacher.type === 3 /* REMOTE_REF */) {\n            return this.defineProperty_remote;\n        }\n        if (iobCacher.type === 1 /* THROW */) {\n            return this.throw_binded;\n        }\n        /// 类型安全的非return结束\n        end(iobCacher);\n    }\n    get defineProperty() {\n        return CallbackToAsyncBind(this.definePropertyCallback, this);\n    }\n    //#endregion\n    //#region Reflect.deleteProperty\n    deleteProperty_localObject(cb, propertyKey) {\n        helper.resolveCallback(cb, Reflect.deleteProperty(this._iobCacher.value, propertyKey));\n    }\n    deletePropertyHolder(propertyKey) {\n        return this.createSubHolder([8 /* DeleteProperty */, propertyKey]);\n    }\n    deleteProperty_remote(cb, propertyKey) {\n        this.deletePropertyHolder(propertyKey).toValueSync(cb);\n    }\n    get deletePropertyCallback() {\n        const { _iobCacher: iobCacher } = this;\n        if (\n        // 未知，未发送\n        !iobCacher ||\n            // 未知，未返回\n            iobCacher.type === 0 /* WAITING */ ||\n            /// 已知，远端的非Symbol对象\n            iobCacher.type === 3 /* REMOTE_REF */) {\n            return this.deleteProperty_remote;\n        }\n        /// 已知，本地object\n        if (iobCacher.type === 2 /* LOCAL */) {\n            // object\n            if (isObj(iobCacher.value)) {\n                return this.deleteProperty_localObject;\n            }\n            // 本地 空值 原始值,\n            return reflectForbidenMethods.deleteProperty;\n        }\n        /// 已知，远端Symbol,\n        if (iobCacher.type === 4 /* REMOTE_SYMBOL */) {\n            return reflectForbidenMethods.deleteProperty;\n        }\n        if (iobCacher.type === 1 /* THROW */) {\n            return this.throw_binded;\n        }\n        /// 类型安全的非return结束\n        end(iobCacher);\n    }\n    get deleteProperty() {\n        return CallbackToAsyncBind(this.deletePropertyCallback, this);\n    }\n    //#endregion\n    //#region Reflect.get\n    get_remoteFunction(cb, propertyKey) {\n        const iobExtends = this._iobCacher.iob.extends;\n        /// 自定义属性\n        if (propertyKey === IMPORT_FUN_EXTENDS_SYMBOL) {\n            return helper.resolveCallback(cb, iobExtends);\n        }\n        if (propertyKey === \"name\") {\n            return helper.resolveCallback(cb, iobExtends.name);\n        }\n        if (propertyKey === \"length\") {\n            return helper.resolveCallback(cb, iobExtends.length);\n        }\n        if (propertyKey === \"arguments\" || propertyKey === \"callee\" || propertyKey === \"caller\") {\n            if (iobExtends.isStatic) {\n                return helper.rejectCallback(cb, new TypeError(\"'caller', 'callee', and 'arguments' properties may not be accessed on strict mode functions or the arguments objects for calls to them\"));\n            }\n            else {\n                /**\n                 * @TODO 这里的 arguments 和 caller 应该使用标准规范去实现\n                 * 无法用 await 来获取，需要调用者的堆栈信息来判定是否有权得到相关信息，\n                 */\n                return helper.resolveCallback(cb, null);\n            }\n        }\n        /**\n         * 静态的toString模式下的本地模拟\n         * 本地模拟的toString，constructor和protoype等等属性都没有绑定远程\n         * 这里纯粹是为了加速，模拟远端的返回，可以不用\n         * @TODO 配置成可以可选模式\n         */\n        if (propertyKey === \"toString\" &&\n            iobExtends.toString.mode === 1 /* static */) {\n            return helper.resolveCallback(cb, refFunctionStaticToString);\n        }\n        /**\n         * function.prototype 属性不是只读，所以跳过，使用远端获取\n         * @TODO 改进 BFChainComlink.AsyncUtil.Remote 的规则\n         */\n        return this.get_remote(cb, propertyKey);\n    }\n    get_local(cb, propertyKey) {\n        const iobCacher = this._iobCacher;\n        helper.resolveCallback(cb, Reflect.get(iobCacher.value, propertyKey));\n    }\n    getHolder(propertyKey) {\n        return this.createSubHolder([\n            6 /* Get */,\n            propertyKey,\n        ]);\n    }\n    get_remote(cb, propertyKey) {\n        this.getHolder(propertyKey).toValueSync(cb);\n    }\n    get getCallback() {\n        const { _iobCacher: iobCacher } = this;\n        if (\n        // 未知，未发送\n        !iobCacher ||\n            // 未知，未返回\n            iobCacher.type === 0 /* WAITING */) {\n            return this.get_remote;\n        }\n        /// 已知，远端\n        if (iobCacher.type === 3 /* REMOTE_REF */) {\n            // function对象\n            if (iobCacher.iob.type === 2 /* Ref */ &&\n                iobCacher.iob.extends.type === 0 /* Function */) {\n                return this.get_remoteFunction;\n            }\n            // object\n            return this.get_remote;\n        }\n        /// 已知, 远端Symbol、本地\n        if (iobCacher.type === 4 /* REMOTE_SYMBOL */) {\n            return reflectForbidenMethods.get;\n        }\n        if (iobCacher.type === 2 /* LOCAL */) {\n            if (isObj(iobCacher.value)) {\n                return this.get_local;\n            }\n            return reflectForbidenMethods.get;\n        }\n        if (iobCacher.type === 1 /* THROW */) {\n            return this.throw_binded;\n        }\n        /// 类型安全的非return结束\n        end(iobCacher);\n    }\n    get get() {\n        return CallbackToAsyncBind(this.getCallback, this);\n    }\n    //#endregion\n    //#region Reflect.getOwnPropertyDescriptor\n    getOwnPropertyDescriptor_remoteFunction(cb, propertyKey) {\n        const iobExtends = this._iobCacher.iob.extends;\n        if (propertyKey === \"name\") {\n            return helper.resolveCallback(cb, {\n                value: iobExtends.name,\n                writable: false,\n                enumerable: false,\n                /* 远端的函数名，暂时强制不支持改名 */\n                configurable: false,\n            });\n        }\n        if (propertyKey === \"length\") {\n            return helper.resolveCallback(cb, {\n                value: iobExtends.length,\n                writable: false,\n                enumerable: false,\n                /* 远端的函数名，暂时强制不支持length */\n                configurable: false,\n            });\n        }\n        if (propertyKey === \"arguments\" || propertyKey === \"callee\" || propertyKey === \"caller\") {\n            /**\n             * iobExtends.isStatic === any\n             * @TODO 这里的 arguments 和 caller 应该使用标准规范去实现\n             * 无法用 await 来获取，需要调用者的堆栈信息来判定是否有权得到相关信息\n             */\n            return helper.resolveCallback(cb, undefined);\n        }\n        /**\n         * 静态的toString模式下的本地模拟\n         * 本地模拟的toString，constructor和protoype等等属性都没有绑定远程\n         * 这里纯粹是为了加速，模拟远端的返回，可以不用\n         * @TODO 配置成可以可选模式\n         */\n        if (propertyKey === \"toString\" &&\n            iobExtends.toString.mode === 1 /* static */) {\n            return helper.resolveCallback(cb, {\n                value: refFunctionStaticToString,\n                writable: false,\n                enumerable: false,\n                /* 远端的函数名，强制修改了toString的实现 */\n                configurable: false,\n            });\n        }\n        /**\n         * function.prototype 属性不是只读，所以跳过，使用远端获取\n         * @TODO 改进 BFChainComlink.AsyncUtil.Remote 的规则\n         */\n        return this.getOwnPropertyDescriptor_remote(cb, propertyKey);\n    }\n    getOwnPropertyDescriptor_local(cb, propertyKey) {\n        const iobCacher = this._iobCacher;\n        helper.resolveCallback(cb, Reflect.getOwnPropertyDescriptor(iobCacher.value, propertyKey));\n    }\n    getOwnPropertyDescriptorHolder(propertyKey) {\n        return this.createSubHolder([\n            4 /* GetOwnPropertyDescriptor */,\n            propertyKey,\n        ]);\n    }\n    getOwnPropertyDescriptor_remote(cb, propertyKey) {\n        this.getOwnPropertyDescriptorHolder(propertyKey).toValueSync(cb);\n    }\n    get getOwnPropertyDescriptorCallback() {\n        const { _iobCacher: iobCacher } = this;\n        if (\n        // 未知，未发送\n        !iobCacher ||\n            // 未知，未返回\n            iobCacher.type === 0 /* WAITING */) {\n            return this.getOwnPropertyDescriptor_remote;\n        }\n        if (iobCacher.type === 2 /* LOCAL */) {\n            if (isObj(iobCacher.value)) {\n                return this.getOwnPropertyDescriptor_local;\n            }\n            return alwaysUndefinedCallbackCaller;\n        }\n        if (iobCacher.type === 3 /* REMOTE_REF */) {\n            if (iobCacher.iob.extends.type === 0 /* Function */) {\n                return this.getOwnPropertyDescriptor_remoteFunction;\n            }\n            return this.getOwnPropertyDescriptor_remote;\n        }\n        if (iobCacher.type === 4 /* REMOTE_SYMBOL */) {\n            return alwaysUndefinedCallbackCaller;\n        }\n        if (iobCacher.type === 1 /* THROW */) {\n            return this.throw_binded;\n        }\n        /// 类型安全的非return结束\n        end(iobCacher);\n    }\n    getOwnPropertyDescriptor(propertyKey) {\n        return CallbackToAsync(this.getOwnPropertyDescriptorCallback, [propertyKey], this);\n    }\n    //#endregion\n    //#region getPrototypeOf\n    getPrototypeOf_local(cb) {\n        const iobCacher = this._iobCacher;\n        helper.resolveCallback(cb, Reflect.getPrototypeOf(iobCacher.value));\n    }\n    getPrototypeOfHolder() {\n        return this.createSubHolder([0 /* GetPrototypeOf */]);\n    }\n    getPrototypeOf_remote(cb) {\n        this.getPrototypeOfHolder().toValueSync(cb);\n    }\n    get getPrototypeOfCallback() {\n        const { _iobCacher: iobCacher } = this;\n        if (\n        // 未知，未发送\n        !iobCacher ||\n            // 未知，未返回\n            iobCacher.type === 0 /* WAITING */) {\n            return this.getPrototypeOf_remote;\n        }\n        if (iobCacher.type === 2 /* LOCAL */) {\n            if (isObj(iobCacher.value)) {\n                return this.getPrototypeOf_local;\n            }\n            return reflectForbidenMethods.getPrototypeOf;\n        }\n        if (iobCacher.type === 3 /* REMOTE_REF */ ||\n            /**\n             * 对于远端symbol，虽然本地有一个影子值，但还是要走远端获取\n             */\n            iobCacher.type === 4 /* REMOTE_SYMBOL */) {\n            return this.getPrototypeOf_remote;\n        }\n        if (iobCacher.type === 1 /* THROW */) {\n            return this.throw_binded;\n        }\n        /// 类型安全的非return结束\n        end(iobCacher);\n    }\n    get getPrototypeOf() {\n        return CallbackToAsyncBind(this.getPrototypeOfCallback, this);\n    }\n    //#endregion\n    //#region Reflect.has\n    has_remoteFunction(cb, propertyKey) {\n        /**\n         * 只要是函数（不论是否是箭头函数），就必然有这些属性\n         */\n        if (\n        /// T1 自身属性\n        propertyKey === \"name\" ||\n            propertyKey === \"length\") {\n            return helper.resolveCallback(cb, true);\n        }\n        const iobExtends = this._iobCacher.iob.extends;\n        /**\n         * 被优化过的模式\n         * @TODO 可以提供性能模式，来对export的函数统一进行Object.seal操作\n         */\n        if ((iobExtends.status & 2 /* update */ && iobExtends.instanceOfFunction) !== 0) {\n            if (\n            /// T2 自身属性 / 原型链\n            propertyKey === \"arguments\" ||\n                propertyKey === \"callee\" ||\n                propertyKey === \"caller\" ||\n                /// T3 Function.原型链\n                propertyKey === \"toString\" ||\n                propertyKey === \"constructor\" ||\n                propertyKey === \"apply\" ||\n                propertyKey === \"bind\" ||\n                propertyKey === \"call\" ||\n                propertyKey === Symbol.hasInstance ||\n                /// T3 Object.原型链\n                propertyKey === \"toLocaleString\" ||\n                propertyKey === \"valueOf\" ||\n                propertyKey === \"isPrototypeOf\" ||\n                propertyKey === \"propertyIsEnumerable\" ||\n                propertyKey === \"hasOwnProperty\"\n            /// T4 非标准属性，v8引擎特有\n            // __proto__,__defineGetter__,__defineSetter__,__lookupGetter__,__lookupSetter__\n            ) {\n                return true;\n            }\n        }\n        /// T2 自身属性 / 原型链\n        if (propertyKey === \"arguments\" || propertyKey === \"callee\" || propertyKey === \"caller\") {\n            /// 非严格函数，属于旧版函数，必然有这些属性\n            if (iobExtends.isStatic === false) {\n                return helper.resolveCallback(cb, true);\n            }\n            /// 严格函数，可能被修改过原型链，所以也说不定\n        }\n        return this.has_remote(cb, propertyKey);\n    }\n    has_local(cb, propertyKey) {\n        const iobCacher = this._iobCacher;\n        helper.resolveCallback(cb, Reflect.has(iobCacher.value, propertyKey));\n    }\n    hasHolder(propertyKey) {\n        return this.createSubHolder([5 /* Has */, propertyKey]);\n    }\n    has_remote(cb, propertyKey) {\n        return this.hasHolder(propertyKey).toValueSync(cb);\n    }\n    get hasCallback() {\n        const { _iobCacher: iobCacher } = this;\n        if (\n        // 未知，未发送\n        !iobCacher ||\n            // 未知，未返回\n            iobCacher.type === 0 /* WAITING */) {\n            return this.has_remote;\n        }\n        if (iobCacher.type === 2 /* LOCAL */) {\n            if (isObj(iobCacher.value)) {\n                return this.has_local;\n            }\n            return reflectForbidenMethods.has;\n        }\n        if (iobCacher.type === 3 /* REMOTE_REF */) {\n            if (iobCacher.iob.extends.type === 0 /* Function */) {\n                return this.has_remoteFunction;\n            }\n            return this.has_remote;\n        }\n        if (iobCacher.type === 4 /* REMOTE_SYMBOL */) {\n            /// 远端的symbol和本地symbol行为是一样的，所以使用本地\n            return this.has_local;\n        }\n        if (iobCacher.type === 1 /* THROW */) {\n            return this.throw_binded;\n        }\n        /// 类型安全的非return结束\n        end(iobCacher);\n    }\n    get has() {\n        return CallbackToAsyncBind(this.hasCallback, this);\n    }\n    //#endregion\n    //#region Reflect.isExtensible\n    isExtensible_local(cb) {\n        const iobCacher = this._iobCacher;\n        helper.resolveCallback(cb, Reflect.isExtensible(iobCacher.value));\n    }\n    isExtensibleHolder() {\n        return this.createSubHolder([2 /* IsExtensible */]);\n    }\n    isExtensible_remote(cb) {\n        this.isExtensibleHolder().toValueSync(cb);\n    }\n    get isExtensibleCallback() {\n        const { _iobCacher: iobCacher } = this;\n        if (\n        // 未知，未发送\n        !iobCacher ||\n            // 未知，未返回\n            iobCacher.type === 0 /* WAITING */) {\n            return this.isExtensible_remote;\n        }\n        if (iobCacher.type === 2 /* LOCAL */) {\n            if (isObj(iobCacher.value)) {\n                return this.isExtensible_local;\n            }\n            return reflectForbidenMethods.isExtensible;\n        }\n        if (iobCacher.type === 3 /* REMOTE_REF */) {\n            if (iobCacher.iob.extends.status & 3 /* preventedExtensions */) {\n                return alwaysFalseCallbackCaller;\n            }\n            return this.isExtensible_remote;\n        }\n        if (iobCacher.type === 4 /* REMOTE_SYMBOL */) {\n            /// 远端的symbol和本地symbol行为是一样的，所以使用本地\n            return reflectForbidenMethods.isExtensible;\n        }\n        if (iobCacher.type === 1 /* THROW */) {\n            return this.throw_binded;\n        }\n        /// 类型安全的非return结束\n        end(iobCacher);\n    }\n    get isExtensible() {\n        return CallbackToAsyncBind(this.isExtensibleCallback, this);\n    }\n    //#endregion\n    //#region Reflect.ownKeys\n    ownKeys_local(cb) {\n        const iobCacher = this._iobCacher;\n        helper.resolveCallback(cb, Reflect.ownKeys(iobCacher.value));\n    }\n    ownKeysHolder() {\n        return this.createSubHolder([\n            10 /* OwnKeys */,\n        ]);\n    }\n    ownKeys_remote(cb) {\n        this.ownKeysHolder().toValueSync(cb);\n    }\n    get ownKeysCallback() {\n        const { _iobCacher: iobCacher } = this;\n        if (\n        // 未知，未发送\n        !iobCacher ||\n            // 未知，未返回\n            iobCacher.type === 0 /* WAITING */ ||\n            iobCacher.type === 3 /* REMOTE_REF */) {\n            return this.ownKeys_remote;\n        }\n        if (iobCacher.type === 2 /* LOCAL */) {\n            if (isObj(iobCacher.value)) {\n                return this.ownKeys_local;\n            }\n            return reflectForbidenMethods.ownKeys;\n        }\n        if (iobCacher.type === 4 /* REMOTE_SYMBOL */) {\n            /// 远端的symbol和本地symbol行为是一样的，所以使用本地\n            return reflectForbidenMethods.ownKeys;\n        }\n        if (iobCacher.type === 1 /* THROW */) {\n            return this.throw_binded;\n        }\n        /// 类型安全的非return结束\n        end(iobCacher);\n    }\n    get ownKeys() {\n        return CallbackToAsyncBind(this.ownKeysCallback, this);\n    }\n    //#endregion\n    //#region Reflect.preventExtensions\n    preventExtensions_local(cb) {\n        const iobCacher = this._iobCacher;\n        helper.resolveCallback(cb, Reflect.preventExtensions(iobCacher.value));\n    }\n    preventExtensionsHolder() {\n        return this.createSubHolder([3 /* PreventExtensions */]);\n    }\n    preventExtensions_remote(cb) {\n        this.preventExtensionsHolder().toValueSync(cb);\n    }\n    preventExtensions_onceRemote(cb) {\n        const iobCacher = this._iobCacher;\n        iobCacher.iob.extends.status &= 3 /* preventedExtensions */;\n        cleanGetterCache(this, \"preventExtensionsCallback\");\n        cleanGetterCache(this, \"preventExtensions\");\n        return this.preventExtensions_remote(cb);\n    }\n    get preventExtensionsCallback() {\n        const { _iobCacher: iobCacher } = this;\n        if (\n        // 未知，未发送\n        !iobCacher ||\n            // 未知，未返回\n            iobCacher.type === 0 /* WAITING */) {\n            return this.preventExtensions_remote;\n        }\n        if (iobCacher.type === 3 /* REMOTE_REF */) {\n            /// 严格模式能满足遵守规则的代码\n            if (this.staticMode) {\n                if ((iobCacher.iob.extends.status & 3 /* preventedExtensions */) !== 0) {\n                    /// 如果已经是冻结状态，那么直接返回\n                    return alwaysTrueCallbackCaller;\n                }\n                /// 非冻结状态，那么只需要触发一次也就不需要再触发，也是永久返回true\n                return this.preventExtensions_onceRemote;\n            }\n            /**\n             * 非严格模式，要考虑对方可能是Proxy对象，所以不能以当前的属性状态做判定\n             */\n            return this.preventExtensions_remote;\n        }\n        if (iobCacher.type === 2 /* LOCAL */) {\n            if (isObj(iobCacher.value)) {\n                return this.preventExtensions_local;\n            }\n            return reflectForbidenMethods.preventExtensions;\n        }\n        if (iobCacher.type === 4 /* REMOTE_SYMBOL */) {\n            /// 远端的symbol和本地symbol行为是一样的，所以使用本地\n            return reflectForbidenMethods.preventExtensions;\n        }\n        if (iobCacher.type === 1 /* THROW */) {\n            return this.throw_binded;\n        }\n        /// 类型安全的非return结束\n        end(iobCacher);\n    }\n    get preventExtensions() {\n        return CallbackToAsyncBind(this.preventExtensionsCallback, this);\n    }\n    //#endregion\n    //#region Reflect.set\n    set_local(cb, propertyKey, value) {\n        const iobCacher = this._iobCacher;\n        helper.resolveCallback(cb, Reflect.set(iobCacher.value, propertyKey, value));\n    }\n    setHolder(propertyKey, value) {\n        return this.createSubHolder([7 /* Set */, propertyKey, value]);\n    }\n    set_remote(cb, propertyKey, value) {\n        return this.setHolder(propertyKey, value).toValueSync(cb);\n    }\n    get setCallback() {\n        const { _iobCacher: iobCacher } = this;\n        if (\n        // 未知，未发送\n        !iobCacher ||\n            // 未知，未返回\n            iobCacher.type === 0 /* WAITING */) {\n            return this.set_remote;\n        }\n        if (iobCacher.type === 3 /* REMOTE_REF */) {\n            /// 严格模式能满足遵守规则的代码，如果已经是冻结状态，那么直接返回\n            if (this.staticMode &&\n                (iobCacher.iob.extends.status & 2 /* update */) !== 0) {\n                /// 如果已经是冻结状态，那么直接返回\n                return alwaysFalseCallbackCaller;\n            }\n            return this.set_remote;\n        }\n        if (iobCacher.type === 2 /* LOCAL */) {\n            if (isObj(iobCacher.value)) {\n                return this.set_local;\n            }\n            return reflectForbidenMethods.set;\n        }\n        if (iobCacher.type === 4 /* REMOTE_SYMBOL */) {\n            /// 远端的symbol和本地symbol行为是一样的，所以使用本地\n            return reflectForbidenMethods.set;\n        }\n        if (iobCacher.type === 1 /* THROW */) {\n            return this.throw_binded;\n        }\n        /// 类型安全的非return结束\n        end(iobCacher);\n    }\n    get set() {\n        return CallbackToAsyncBind(this.setCallback, this);\n    }\n    //#endregion\n    setPrototypeOf_local(cb, proto) {\n        const iobCacher = this._iobCacher;\n        helper.resolveCallback(cb, Reflect.setPrototypeOf(iobCacher.value, proto));\n    }\n    setPrototypeOfHolder(proto) {\n        return this.createSubHolder([1 /* SetPrototypeOf */, proto]);\n    }\n    setPrototypeOf_remote(cb, proto) {\n        return this.setPrototypeOfHolder(proto).toValueSync(cb);\n    }\n    get setPrototypeOfCallback() {\n        const { _iobCacher: iobCacher } = this;\n        if (\n        // 未知，未发送\n        !iobCacher ||\n            // 未知，未返回\n            iobCacher.type === 0 /* WAITING */) {\n            return this.setPrototypeOf_remote;\n        }\n        if (iobCacher.type === 3 /* REMOTE_REF */) {\n            /// 严格模式能满足遵守规则的代码，如果已经是冻结状态，那么直接返回\n            if (this.staticMode &&\n                (iobCacher.iob.extends.status & 3 /* preventedExtensions */) !== 0) {\n                /// 如果已经是冻结状态，那么直接返回\n                return alwaysFalseCallbackCaller;\n            }\n            return this.setPrototypeOf_remote;\n        }\n        if (iobCacher.type === 2 /* LOCAL */) {\n            if (isObj(iobCacher.value)) {\n                return this.setPrototypeOf_local;\n            }\n            return reflectForbidenMethods.setPrototypeOf;\n        }\n        if (iobCacher.type === 4 /* REMOTE_SYMBOL */) {\n            /// 远端的symbol和本地symbol行为是一样的，所以使用本地\n            return reflectForbidenMethods.setPrototypeOf;\n        }\n        if (iobCacher.type === 1 /* THROW */) {\n            return this.throw_binded;\n        }\n        /// 类型安全的非return结束\n        end(iobCacher);\n    }\n    get setPrototypeOf() {\n        return CallbackToAsyncBind(this.setPrototypeOfCallback, this);\n    }\n    //#endregion\n    //#region Reflect 拓展接口\n    /**\n     * @WARN 不支持 with 操作符与对应的 Symbol.unscopables\n     */\n    asset_value(cb, propertyKey) {\n        const iobCacher = this._iobCacher;\n        helper.resolveCallback(cb, iobCacher.value[propertyKey]);\n    }\n    assetHolder(propertyKey) {\n        return this.createSubHolder([\n            13 /* Asset */,\n            propertyKey,\n        ]);\n    }\n    asset_remote(cb, propertyKey) {\n        this.assetHolder(propertyKey).toValueSync(cb);\n    }\n    get assetCallback() {\n        const { _iobCacher: iobCacher } = this;\n        if (\n        // 未知，未发送\n        !iobCacher ||\n            // 未知，未返回\n            iobCacher.type === 0 /* WAITING */) {\n            return this.asset_remote;\n        }\n        /// 已知，远端\n        if (iobCacher.type === 3 /* REMOTE_REF */) {\n            // function对象\n            if (iobCacher.iob.type === 2 /* Ref */ &&\n                iobCacher.iob.extends.type === 0 /* Function */) {\n                return this.get_remoteFunction;\n            }\n            // object\n            return this.get_remote;\n        }\n        /// 已知, 远端Symbol、本地\n        if (iobCacher.type === 4 /* REMOTE_SYMBOL */) {\n            return this.asset_value;\n        }\n        if (iobCacher.type === 2 /* LOCAL */) {\n            if (isNil(iobCacher.value)) {\n                return reflectForbidenMethods.nilGet;\n            }\n            return this.asset_value;\n        }\n        if (iobCacher.type === 1 /* THROW */) {\n            return this.throw_binded;\n        }\n        /// 类型安全的非return结束\n        end(iobCacher);\n    }\n    /**\n     * 访问表达式，类似Reflect.get，但支持primitive\n     * @param cb\n     * @param propertyKey\n     */\n    get asset() {\n        return CallbackToAsyncBind(this.assetCallback, this);\n    }\n    /**支持自定义的Symbol.toPrimitive以及Symbol.toStringTag，前者优先级更高 */\n    toPrimitive(hint) { }\n    /**instanceof 的操作符，支持自定义的Symbol.hasInstance */\n    Operator_instanceOf(Ctor) { }\n    Operator_instanceOfHolder(Ctor) {\n        return this.createSubHolder([15 /* Instanceof */, Ctor]);\n    }\n    /**typeof 的操作符*/\n    Operator_typeOf() { }\n    Operator_typeOfHolder() {\n        const typeName = typeof this;\n        return this.createSubHolder([14 /* Typeof */]);\n    }\n    /**delete 的操作符，支持primitive*/\n    Operator_delete() { }\n    /**... 的操作符*/\n    Operator_spread() { }\n    /**in 的操作符，支持自定义的Symbol.species*/\n    Operator_in() { }\n    /**\n     * @TIP 如果未来Emscripten支持《自定义运算符》，那么这里就需要扩展出更多的操作符了，因为这些操作都是只支持同步的。\n     */\n    /**支持自定义的Symbol.iterator，本地可用for await来进行迭代 */\n    async *iterator() {\n        const iterable = (await this.assetHolder(Symbol.iterator).apply(this.toAsyncValue(), []));\n        do {\n            const item = await iterable.next();\n            if (await item.done) {\n                break;\n            }\n            yield item.value;\n        } while (true);\n    }\n    /**支持自定义的Symbol.asyncIterator，本地可用for await来进行迭代 */\n    async *asyncIterator() {\n        const iterable = (await this.assetHolder(Symbol.asyncIterator).apply(this.toAsyncValue(), []));\n        do {\n            const item = await iterable.next();\n            if (await item.done) {\n                break;\n            }\n            yield item.value;\n        } while (true);\n    }\n    /**支持自定义的Symbol.isConcatSpreadable */\n    Array_concat() { }\n    /**支持自定义的Symbol.match */\n    String_match() { }\n    /**支持自定义的Symbol.matchAll */\n    String_matchAll() { }\n    /**支持自定义的Symbol.replace */\n    String_replace() { }\n    /**支持自定义的Symbol.search */\n    String_search() { }\n    /**支持自定义的Symbol.split */\n    String_split() { }\n    Object_assign() { }\n    Object_create() { }\n    Object_defineProperties() { }\n    Object_defineProperty() { }\n    Object_entries() { }\n    Object_freeze() { }\n    Object_fromEntries() { }\n    Object_getOwnPropertyDescriptor() { }\n    Object_getOwnPropertyDescriptors() { }\n    Object_getOwnPropertyNames() { }\n    Object_getOwnPropertySymbols() { }\n    Object_getPrototypeOf() { }\n    Object_is() { }\n    Object_isExtensible() { }\n    Object_isFrozen() { }\n    Object_isSealed() { }\n    Object_keys() { }\n    Object_preventExtensions() { }\n    Object_seal() { }\n    Object_setPrototypeOf() { }\n    Object_values() { }\n    JSON_stringify() {\n        return this.createSubHolder([16 /* JsonStringify */]);\n    }\n    JSON_parse() {\n        return this.createSubHolder([17 /* JsonParse */]);\n    }\n}\nHolderReflect.isHolder = isHolder;\nHolderReflect.getHolderReflect = getHolderReflect;\n__decorate([\n    cacheGetter,\n    __metadata(\"design:type\", Object),\n    __metadata(\"design:paramtypes\", [])\n], HolderReflect.prototype, \"toValue\", null);\n__decorate([\n    cacheGetter,\n    __metadata(\"design:type\", Object),\n    __metadata(\"design:paramtypes\", [])\n], HolderReflect.prototype, \"applyCallback\", null);\n__decorate([\n    cacheGetter,\n    __metadata(\"design:type\", Object),\n    __metadata(\"design:paramtypes\", [])\n], HolderReflect.prototype, \"apply\", null);\n__decorate([\n    cacheGetter,\n    __metadata(\"design:type\", Object),\n    __metadata(\"design:paramtypes\", [])\n], HolderReflect.prototype, \"constructCallback\", null);\n__decorate([\n    cacheGetter,\n    __metadata(\"design:type\", Object),\n    __metadata(\"design:paramtypes\", [])\n], HolderReflect.prototype, \"construct\", null);\n__decorate([\n    cacheGetter,\n    __metadata(\"design:type\", Object),\n    __metadata(\"design:paramtypes\", [])\n], HolderReflect.prototype, \"defineProperty\", null);\n__decorate([\n    cacheGetter,\n    __metadata(\"design:type\", Object),\n    __metadata(\"design:paramtypes\", [])\n], HolderReflect.prototype, \"deleteProperty\", null);\n__decorate([\n    cacheGetter,\n    __metadata(\"design:type\", Object),\n    __metadata(\"design:paramtypes\", [])\n], HolderReflect.prototype, \"get\", null);\n__decorate([\n    cacheGetter,\n    __metadata(\"design:type\", Object),\n    __metadata(\"design:paramtypes\", [])\n], HolderReflect.prototype, \"getPrototypeOf\", null);\n__decorate([\n    cacheGetter,\n    __metadata(\"design:type\", Object),\n    __metadata(\"design:paramtypes\", [])\n], HolderReflect.prototype, \"has\", null);\n__decorate([\n    cacheGetter,\n    __metadata(\"design:type\", Object),\n    __metadata(\"design:paramtypes\", [])\n], HolderReflect.prototype, \"isExtensible\", null);\n__decorate([\n    cacheGetter,\n    __metadata(\"design:type\", Object),\n    __metadata(\"design:paramtypes\", [])\n], HolderReflect.prototype, \"ownKeys\", null);\n__decorate([\n    cacheGetter,\n    __metadata(\"design:type\", Object),\n    __metadata(\"design:paramtypes\", [])\n], HolderReflect.prototype, \"preventExtensionsCallback\", null);\n__decorate([\n    cacheGetter,\n    __metadata(\"design:type\", Object),\n    __metadata(\"design:paramtypes\", [])\n], HolderReflect.prototype, \"preventExtensions\", null);\n__decorate([\n    cacheGetter,\n    __metadata(\"design:type\", Object),\n    __metadata(\"design:paramtypes\", [])\n], HolderReflect.prototype, \"set\", null);\n__decorate([\n    cacheGetter,\n    __metadata(\"design:type\", Object),\n    __metadata(\"design:paramtypes\", [])\n], HolderReflect.prototype, \"setPrototypeOf\", null);\n__decorate([\n    cacheGetter,\n    __metadata(\"design:type\", Object),\n    __metadata(\"design:paramtypes\", [])\n], HolderReflect.prototype, \"asset\", null);\n__decorate([\n    bindThis,\n    __metadata(\"design:type\", Function),\n    __metadata(\"design:paramtypes\", []),\n    __metadata(\"design:returntype\", void 0)\n], HolderReflect.prototype, \"iterator\", null);\n__decorate([\n    bindThis,\n    __metadata(\"design:type\", Function),\n    __metadata(\"design:paramtypes\", []),\n    __metadata(\"design:returntype\", void 0)\n], HolderReflect.prototype, \"asyncIterator\", null);\n","import { ModelTransfer, refFunctionStaticToStringFactory, } from \"@bfchain/comlink-protocol\";\nimport \"@bfchain/comlink-typings\";\nimport { helper } from \"@bfchain/comlink-core\";\nimport { HolderReflect } from \"./HolderReflect\";\nimport { getHolderReflect } from \"./Holder\";\nimport \"./const\";\nexport class AsyncModelTransfer extends ModelTransfer {\n    constructor(core) {\n        super(core);\n        /**\n         * ref fun statis toString\n         */\n        this._rfsts = refFunctionStaticToStringFactory();\n    }\n    /**这里保持使用cb风格，可以确保更好的性能\n     * @TODO 内部的函数也应该尽可能使用cb风格来实现\n     */\n    sendLinkIn(port, targetId, linkIn, hasOut) {\n        const { transfer } = this.core;\n        const doReq = (linkInIob) => {\n            port.req(async (ret) => {\n                const bin = helper.OpenArg(ret);\n                const linkObj = transfer.transferableBinary2LinkObj(bin);\n                if (linkObj.type !== 3 /* Out */) {\n                    throw new TypeError();\n                }\n                if (linkObj.isThrow) {\n                    const err_iob = linkObj.out.slice().pop();\n                    if (!err_iob) {\n                        throw new TypeError();\n                    }\n                    if (hasOut) {\n                        hasOut.bindIOB(err_iob, true);\n                    }\n                    else {\n                        /// 远端传来的异常，本地却没有可以捕捉的对象，协议不对称！\n                        throw err_iob;\n                    }\n                }\n                else if (hasOut) {\n                    const res_iob = linkObj.out.slice().pop();\n                    if (!res_iob) {\n                        throw new TypeError();\n                    }\n                    hasOut.bindIOB(res_iob);\n                }\n            }, transfer.linkObj2TransferableBinary({\n                type: 2 /* In */,\n                // reqId,\n                targetId,\n                in: linkInIob,\n                hasOut: hasOut !== undefined,\n            }));\n        };\n        /// 无参数需要解析，那么直接发送指令\n        if (linkIn.length === 0) {\n            doReq(linkIn);\n        }\n        else {\n            /**结果列表 */\n            const linkInIOB = [];\n            /**结果列表的实际长度 */\n            let linkInIOBLength = 0;\n            /**是否已经完成中断 */\n            let isRejected = false;\n            /// 解析所有的参数\n            for (let index = 0; index < linkIn.length; index++) {\n                const item = linkIn[index];\n                transfer.Any2InOutBinary((ret) => {\n                    if (isRejected) {\n                        return;\n                    }\n                    if (ret.isError) {\n                        isRejected = true;\n                        if (hasOut) {\n                            hasOut.bindIOB({\n                                type: 0 /* Clone */,\n                                data: ret.error,\n                            }, true);\n                        }\n                        else {\n                            throw ret.error;\n                            // console.error(\"uncatch error:\", ret.error);\n                        }\n                        return;\n                    }\n                    /// 保存解析结果\n                    linkInIOB[index] = ret.data;\n                    linkInIOBLength += 1;\n                    /// 完成所有任务，执行指令发送\n                    if (linkInIOBLength === linkIn.length) {\n                        doReq(linkInIOB);\n                    }\n                }, item);\n            }\n        }\n    }\n    /**\n     * 主动生成引用代理\n     * @param port\n     * @param refId\n     */\n    _createHolderByRefId(port, refId, iob) {\n        const holder = this._getHolder(port, refId, iob);\n        return holder.toAsyncValue();\n    }\n    _getHolder(port, refId, iob) {\n        const holder = new HolderReflect({\n            port,\n            refId,\n            linkIn: [],\n        }, this.core);\n        holder.bindIOB(iob);\n        return holder;\n    }\n    // linkInSenderFactory(port: ComlinkProtocol.BinaryPort, refId: number) {\n    //   return <R>(\n    //     linkIn: readonly [EmscriptenReflect, ...unknown[]],\n    //     hasOut?: BFChainComlink.HolderReflect<R> | false,\n    //   ) => this.sendLinkIn(port, refId, linkIn, hasOut);\n    // }\n    Any2InOutBinary(cb, obj) {\n        const reflectHolder = getHolderReflect(obj);\n        if (reflectHolder !== undefined) {\n            const iob = reflectHolder.getIOB();\n            if (!iob) {\n                /// 还没有绑定，那么就等待其绑定完成\n                return reflectHolder.toValueSync((valRet) => {\n                    if (valRet.isError) {\n                        return cb(valRet);\n                    }\n                    this.Any2InOutBinary(cb, obj);\n                });\n                // throw new TypeError(`reflectHolder ${reflectHolder.name} no bind iob`);\n            }\n            if (iob.type === 0 /* Clone */) {\n                obj = iob.data;\n            }\n        }\n        return super.Any2InOutBinary(cb, obj);\n    }\n    InOutBinary2Any(bin) {\n        const { port, importStore, exportStore } = this.core;\n        switch (bin.type) {\n            //   case LinkItemType.Default:\n            //     return defaultCtx;\n            case 3 /* Locale */:\n                const loc = exportStore.getObjById(bin.locId) || exportStore.getSymById(bin.locId);\n                if (!loc) {\n                    throw new ReferenceError();\n                }\n                return loc;\n            case 2 /* Ref */:\n            case 1 /* RemoteSymbol */:\n                /// 读取缓存中的应用对象\n                let cachedHolder = importStore.getProxyById(bin.refId);\n                if (cachedHolder === undefined) {\n                    /// 使用导入功能生成对象\n                    cachedHolder = this._createHolderByRefId(port, bin.refId, bin);\n                }\n                return cachedHolder;\n            case 0 /* Clone */:\n                return bin.data;\n        }\n        throw new TypeError();\n    }\n}\n","import { ComlinkCore } from \"@bfchain/comlink-core\";\nimport \"@bfchain/comlink-typings\";\nimport \"./HolderReflect\";\nimport { CallbackToAsync } from \"./helper\";\nimport { IOB_EFT_Factory_Map, getFunctionType, getFunctionExportDescription, } from \"@bfchain/comlink-protocol\";\nimport { AsyncModelTransfer } from \"./AsyncModelTransfer\";\nexport class ComlinkAsync extends ComlinkCore {\n    constructor(port, name) {\n        super(port, name);\n        this.transfer = new AsyncModelTransfer(this);\n    }\n    wrap(val) {\n        throw new Error(\"Method not implemented.\");\n    }\n    // readonly holderStore = new HolderStore(this.name);\n    $getEsmReflectHanlder(opeartor) {\n        const hanlder = super.$getEsmReflectHanlder(opeartor);\n        if (opeartor === 11 /* Apply */ || opeartor === 19 /* SyncApply */) {\n            const applyHanlder = (target, args) => {\n                if (target === Function.prototype.toString) {\n                    const ctx = args[0];\n                    const exportDescriptor = getFunctionExportDescription(ctx);\n                    /// 保护源码\n                    if (!exportDescriptor.showSourceCode) {\n                        // console.log(\"get to string from remote\");\n                        return IOB_EFT_Factory_Map.get(getFunctionType(ctx)).toString({ name: ctx.name });\n                    }\n                }\n                return hanlder.fun(target, args);\n            };\n            return { type: hanlder.type, fun: applyHanlder };\n        }\n        return hanlder;\n    }\n    async import(key = \"default\") {\n        const importModule = await CallbackToAsync(this.$getImportModule, [], this);\n        return Reflect.get(importModule, key);\n    }\n}\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nimport { cacheGetter, cleanGetterCache } from \"@bfchain/util-decorator\";\nimport \"./const\";\nexport class AtomicsNotifyer {\n    constructor(_port) {\n        this._port = _port;\n        this._icbs = new Map();\n        this._remoteMode = 3 /* UNKNOWN */;\n        this._port.onMessage((data) => {\n            if (data instanceof Array) {\n                for (const index of data) {\n                    const cbs = this._icbs.get(index);\n                    if (cbs !== undefined) {\n                        this._icbs.delete(index);\n                        for (const cb of cbs) {\n                            cb();\n                        }\n                    }\n                }\n            }\n        });\n    }\n    waitAsync(si32, index, value) {\n        return new Promise((resolve) => {\n            this.waitCallback(si32, index, value, resolve);\n        });\n    }\n    waitCallback(si32, index, value, cb) {\n        if (Atomics.load(si32, index) !== value) {\n            return cb();\n        }\n        let cbs = this._icbs.get(index);\n        if (cbs === undefined) {\n            cbs = [cb];\n            this._icbs.set(index, cbs);\n        }\n        else {\n            cbs.push(cb);\n        }\n    }\n    set remoteMode(mode) {\n        if (this._remoteMode !== mode) {\n            this._remoteMode = mode;\n            cleanGetterCache(this, \"notify\");\n        }\n    }\n    get remoteMode() {\n        return this._remoteMode;\n    }\n    get notify() {\n        if (this._remoteMode === 2 /* ASYNC */) {\n            return this._notify_async;\n        }\n        if (this._remoteMode === 1 /* SYNC */) {\n            return this._notify_sync;\n        }\n        return this._notify_unknow;\n    }\n    _notify_unknow(si32, indexs) {\n        this._notify_async(si32, indexs);\n        this._notify_sync(si32, indexs);\n    }\n    _notify_async(si32, indexs) {\n        this._port.postMessage(indexs);\n    }\n    _notify_sync(si32, indexs) {\n        for (const index of indexs) {\n            Atomics.notify(si32, index);\n        }\n    }\n}\n__decorate([\n    cacheGetter,\n    __metadata(\"design:type\", Object),\n    __metadata(\"design:paramtypes\", [])\n], AtomicsNotifyer.prototype, \"notify\", null);\n","export function u8Concat(ABC, u8s) {\n    let totalLen = 0;\n    for (const u8 of u8s) {\n        totalLen += u8.length;\n    }\n    const u8a = new Uint8Array(new ABC(totalLen));\n    let offsetLen = 0;\n    for (const u8 of u8s) {\n        u8a.set(u8, offsetLen);\n        offsetLen += u8.length;\n    }\n    return u8a;\n}\n","export class DataPkg {\n    constructor(name, sab) {\n        this.name = name;\n        this.sab = sab;\n        this.si32 = new Int32Array(this.sab);\n        this.su8 = new Uint8Array(this.sab);\n        this.su16 = new Uint16Array(this.sab);\n    }\n}\n","class U32Reader {\n    constructor() {\n        this._u32 = new Uint32Array(1);\n        this._u8 = new Uint8Array(this._u32.buffer);\n    }\n    setByU8(u8) {\n        this._u8.set(u8);\n        return this;\n    }\n    getU32() {\n        return this._u32[0];\n    }\n}\nexport const u32 = new U32Reader();\n","import \"./const\";\n// import { serialize, deserialize } from \"v8\";\nconst serialize = (data) => {\n    const json = JSON.stringify(data);\n    const u8 = new Uint8Array(json.length);\n    for (let i = 0; i < json.length; i++) {\n        const code = json.charCodeAt(i);\n        if (code > 256) {\n            throw new RangeError(\"\");\n        }\n        u8[i] = code;\n    }\n    return u8;\n};\nconst deserialize = (u8) => {\n    let json = \"\";\n    for (const code of u8) {\n        json += String.fromCharCode(code);\n    }\n    return JSON.parse(json);\n};\nimport { AtomicsNotifyer } from \"./AtomicsNotifyer\";\nimport { u8Concat } from \"./helper\";\nimport { DataPkg } from \"./DataPkg\";\nimport { u32 } from \"./u32\";\nexport class Duplex {\n    constructor(_port, sabs) {\n        this._port = _port;\n        this._notifyer = new AtomicsNotifyer(this._port);\n        this._eventId = new Uint32Array(1);\n        this._chunkCollection = new Map();\n        this.supportModes = new Set();\n        this._cbs = [];\n        // Reflect.set(globalThis, \"duplex\", this);\n        this.supportModes.add(\"async\");\n        this.supportModes.add(\"sync\");\n        const localeDataPkg = new DataPkg(\"locale\", sabs.locale);\n        const remoteDataPkg = new DataPkg(\"remote\", sabs.remote);\n        this._sync = {\n            sabs,\n            localeDataPkg,\n            remoteDataPkg,\n        };\n        _port.onMessage((data) => {\n            if (data instanceof Array) {\n                this._checkRemote();\n            }\n        });\n    }\n    static getPort(duplex) {\n        return duplex._port;\n    }\n    /**发送异步消息 */\n    postAsyncMessage(msg) {\n        this._postMessageCallback((hook) => {\n            this._notifyer.waitCallback(hook.si32, 0 /* SI32_MSG_TYPE */, hook.curMsgType, hook.next);\n        }, (hook) => {\n            this._notifyer.waitCallback(hook.si32, 0 /* SI32_MSG_TYPE */, hook.msgType, hook.next);\n        }, msg);\n    }\n    postSyncMessage(msg) {\n        this._postMessageCallback((hook) => {\n            this._checkRemoteAtomics();\n            // console.debug(threadId, \"+openSAB\");\n            Atomics.wait(hook.si32, 0 /* SI32_MSG_TYPE */, hook.curMsgType);\n            // console.debug(threadId, \"-openSAB\");\n            hook.next();\n        }, (hook) => {\n            this._checkRemoteAtomics();\n            // console.debug(threadId, \"+waitSAB\");\n            // 进入等待\n            Atomics.wait(hook.si32, 0 /* SI32_MSG_TYPE */, hook.msgType);\n            // console.debug(threadId, \"-waitSAB\");\n            hook.next();\n        }, msg);\n    }\n    waitMessage() {\n        do {\n            // 等待对方开始响应\n            Atomics.wait(this._sync.remoteDataPkg.si32, 0 /* SI32_MSG_TYPE */, 0 /* FREE */);\n            // 处理响应的内容\n            const msg = this._checkRemoteAtomics();\n            if (msg) {\n                return msg;\n            }\n        } while (true);\n    }\n    _postMessageCallback(onApplyWrite, onChunkReady, msg) {\n        // console.debug(\"postMessage\", threadId, msg);\n        const msgBinary = this._serializeMsg(msg);\n        const sync = this._sync;\n        const { su8, si32, su16 } = sync.localeDataPkg;\n        // 数据id，用于将数据包和事件进行关联的ID\n        const eventId = this._eventId[0]++;\n        //#region 首先传输数据包\n        {\n            /// 自动分包模式\n            const MSG_MAX_BYTELENGTH = su8.byteLength - 20 /* U8_MSG_DATA_OFFSET */;\n            const chunkCount = Math.ceil(msgBinary.byteLength / MSG_MAX_BYTELENGTH);\n            let chunkId = 0;\n            let msgOffset = 0; // msgBinary.byteLength\n            /**尝试写入 */\n            const tryWriteChunk = () => {\n                if (chunkId >= chunkCount) {\n                    return;\n                }\n                // 申请写入权\n                checkAndApplyWrite();\n            };\n            /**申请写入权 */\n            const checkAndApplyWrite = () => {\n                // 直接申请\n                const cur_msg_type = Atomics.compareExchange(si32, 0 /* SI32_MSG_TYPE */, 0 /* FREE */, 1 /* EVENT */);\n                /// 申请成功\n                if (cur_msg_type === 0 /* FREE */) {\n                    // 开始写入状态\n                    Atomics.store(si32, 1 /* SI32_MSG_STATUS */, 0 /* WRITING */);\n                    doWriteChunk();\n                    return;\n                }\n                // 直接申请失败，转交给外部，让外部去申请\n                onApplyWrite({\n                    si32,\n                    msgType: 1 /* EVENT */,\n                    curMsgType: cur_msg_type,\n                    next: checkAndApplyWrite,\n                });\n            };\n            /**获取写入权后，写入数据 */\n            const doWriteChunk = () => {\n                // 写入消息ID\n                si32[2 /* U32_EVENT_ID_INDEX */] = eventId;\n                // 写入总包数\n                su16[5 /* U16_CHUNK_COUNT_INDEX */] = chunkCount;\n                // 写入包编号\n                su16[6 /* U16_CHUNK_ID_INDEX */] = chunkId;\n                // 取出可以用于发送的数据包\n                const msgChunk = msgBinary.subarray(msgOffset, \n                // 累加偏移量\n                Math.max(msgBinary.byteLength, (msgOffset += MSG_MAX_BYTELENGTH)));\n                // 写入数据包的大小\n                si32[4 /* U32_MSG_CHUNK_SIZE_INDEX */] = msgChunk.byteLength;\n                // 写入数据\n                su8.set(msgChunk, 20 /* U8_MSG_DATA_OFFSET */);\n                // 写入完成\n                Atomics.store(si32, 1 /* SI32_MSG_STATUS */, 1 /* FINISH */);\n                // 广播变更\n                this._notifyer.notify(si32, [0 /* SI32_MSG_TYPE */, 1 /* SI32_MSG_STATUS */]);\n                // 钩子参数\n                const hook = {\n                    msgType: 1 /* EVENT */,\n                    si32,\n                    chunkId,\n                    chunkCount,\n                    next: tryWriteChunk,\n                };\n                // 累加分包ID\n                chunkId++;\n                // 告知外部，写入完成了\n                onChunkReady(hook);\n            };\n            // 开始尝试写入\n            tryWriteChunk();\n        }\n        //#endregion\n    }\n    /**主动检测远端是否发来消息 */\n    _checkRemoteAtomics() {\n        const { remoteDataPkg } = this._sync;\n        /// 如果本地还未收到消息，而且远端的堆栈信息不为空，那么就可以开始处理\n        if (this._needOnMessageAtomics(remoteDataPkg)) {\n            return this._onMessage(remoteDataPkg);\n        }\n    }\n    _checkRemote() {\n        const { remoteDataPkg } = this._sync;\n        /// 如果本地还未收到消息，而且远端的堆栈信息不为空，那么就可以开始处理\n        if (this._needOnMessage(remoteDataPkg)) {\n            return this._onMessage(remoteDataPkg);\n        }\n    }\n    /**是否需要处理消息 */\n    _needOnMessageAtomics(dataPkg) {\n        if (dataPkg.si32[0 /* SI32_MSG_TYPE */] !== 0 /* FREE */) {\n            do {\n                const cur_msg_status = dataPkg.si32[1 /* SI32_MSG_STATUS */];\n                if (cur_msg_status === 1 /* FINISH */) {\n                    break;\n                }\n                // console.debug(threadId, \"+needOnMessage\");\n                Atomics.wait(dataPkg.si32, 1 /* SI32_MSG_STATUS */, cur_msg_status);\n                // console.debug(threadId, \"-needOnMessage\");\n            } while (true);\n            return true;\n        }\n        return false;\n    }\n    /**是否需要处理消息 */\n    _needOnMessage(dataPkg) {\n        return (dataPkg.si32[0 /* SI32_MSG_TYPE */] !== 0 /* FREE */ &&\n            dataPkg.si32[1 /* SI32_MSG_STATUS */] === 1 /* FINISH */);\n    }\n    /**处理消息指令 */\n    _onMessage(dataPkg) {\n        const { si32, su8, su16 } = dataPkg;\n        switch (si32[0 /* SI32_MSG_TYPE */]) {\n            case 1 /* EVENT */:\n                {\n                    /**事件ID */\n                    const eventId = si32[2 /* U32_EVENT_ID_INDEX */];\n                    /**分包的数量 */\n                    const chunkCount = su16[5 /* U16_CHUNK_COUNT_INDEX */];\n                    /**数据包编号*/\n                    const chunkId = su16[6 /* U16_CHUNK_ID_INDEX */];\n                    /**数据包大小 */\n                    const chunkSize = si32[4 /* U32_MSG_CHUNK_SIZE_INDEX */];\n                    /**数据包 */\n                    const chunk = su8.subarray(20 /* U8_MSG_DATA_OFFSET */, 20 /* U8_MSG_DATA_OFFSET */ + chunkSize);\n                    let cachedChunkInfo;\n                    let msgBinary;\n                    /// 单包\n                    if (1 === chunkCount) {\n                        msgBinary = new Uint8Array(chunk);\n                    }\n                    else {\n                        /// 分包\n                        cachedChunkInfo = this._chunkCollection.get(eventId);\n                        if (cachedChunkInfo) {\n                            cachedChunkInfo.set(chunkId, chunk);\n                            /// 如果数据包已经完整了，那么整理出完整的数据包\n                            if (cachedChunkInfo.size === chunkCount) {\n                                // 删除缓存\n                                this._chunkCollection.delete(eventId);\n                                /// 合并分包\n                                const chunkList = [];\n                                /**\n                                 * 这里支持无序传输，如果底层使用WebRTC，可以更节省设备资源\n                                 */\n                                for (const chunkItem of cachedChunkInfo) {\n                                    chunkList[chunkItem[0]] = chunkItem[1];\n                                }\n                                msgBinary = u8Concat(ArrayBuffer, chunkList);\n                            }\n                        }\n                        else {\n                            cachedChunkInfo = new Map();\n                            cachedChunkInfo.set(chunkId, new Uint8Array(chunk));\n                        }\n                    }\n                    // 释放调度\n                    // this._closeSAB(si32);\n                    Atomics.store(si32, 0 /* SI32_MSG_TYPE */, 0 /* FREE */);\n                    this._notifyer.notify(si32, [0 /* SI32_MSG_TYPE */]);\n                    /// 如果有完整的数据包，那么触发事件\n                    if (msgBinary) {\n                        // 触发事件\n                        return this._msgBinaryHandler(msgBinary);\n                    }\n                }\n                break;\n        }\n    }\n    _msgBinaryHandler(msgBinary) {\n        // console.debug(\"onMessage\", threadId, msgBinary);\n        let msg;\n        try {\n            switch (msgBinary[0]) {\n                case 1 /* REQ */:\n                    msg = {\n                        msgType: \"REQ\",\n                        msgId: u32\n                            .setByU8(msgBinary.subarray(1, 5 /* Uint32Array.BYTES_PER_ELEMENT+1 */))\n                            .getU32(),\n                        msgContent: deserialize(msgBinary.subarray(5)),\n                    };\n                    break;\n                case 2 /* RES */:\n                    msg = {\n                        msgType: \"RES\",\n                        msgId: u32\n                            .setByU8(msgBinary.subarray(1, 5 /* Uint32Array.BYTES_PER_ELEMENT+1 */))\n                            .getU32(),\n                        msgContent: deserialize(msgBinary.subarray(5)),\n                    };\n                    break;\n                case 0 /* SIM */:\n                    msg = {\n                        msgType: \"SIM\",\n                        msgId: undefined,\n                        msgContent: deserialize(msgBinary.subarray(1)),\n                    };\n                    break;\n                default:\n                    throw new TypeError(`unknown msgType:'${msgBinary[0]}'`);\n            }\n        }\n        catch (err) {\n            debugger;\n            throw err;\n        }\n        for (const cb of this._cbs) {\n            cb(msg);\n        }\n        return msg;\n    }\n    onMessage(cb) {\n        this._cbs.push(cb);\n    }\n    /// 消息序列化\n    // private _msg_ABC: typeof SharedArrayBuffer | typeof ArrayBuffer = ArrayBuffer;\n    _serializeMsg(msg) {\n        let msgBinary;\n        if (msg.msgType === \"SIM\") {\n            msgBinary = u8Concat(ArrayBuffer, [[0 /* SIM */], serialize(msg.msgContent)]);\n        }\n        else {\n            msgBinary = u8Concat(ArrayBuffer, [\n                [msg.msgType === \"REQ\" ? 1 /* REQ */ : 2 /* RES */],\n                new Uint8Array(new Uint32Array([msg.msgId]).buffer),\n                serialize(msg.msgContent),\n            ]);\n        }\n        return msgBinary;\n    }\n}\n","import { helper } from \"@bfchain/comlink-core\";\nexport class MagicBinaryPort {\n    constructor(_duplex) {\n        this._duplex = _duplex;\n        this._reqId = new Uint32Array(1);\n        this._resMap = new Map();\n        _duplex.onMessage((msg) => {\n            if (msg.msgType === \"RES\") {\n                const resId = msg.msgId;\n                const output = this._resMap.get(resId);\n                if (!output) {\n                    throw new TypeError(\"no found responser\");\n                    // return;\n                }\n                this._resMap.delete(resId);\n                const ret = msg.msgContent;\n                helper.SyncForCallback(output, () => {\n                    const resBin = helper.OpenArg(ret);\n                    if (!resBin) {\n                        throw new TypeError();\n                    }\n                    return resBin;\n                });\n            }\n            else {\n                const reqId = msg.msgId;\n                this._reqHandler((ret) => {\n                    if (reqId === undefined) {\n                        return;\n                    }\n                    this._postModeMessage({\n                        msgType: \"RES\",\n                        msgId: reqId,\n                        msgContent: ret,\n                    });\n                }, msg.msgContent);\n            }\n        });\n    }\n    onMessage(listener) {\n        this._reqHandler = listener;\n    }\n    send(bin) {\n        this._duplex.postAsyncMessage({\n            msgType: \"SIM\",\n            msgId: undefined,\n            msgContent: bin,\n        });\n    }\n}\nexport class SyncBinaryPort extends MagicBinaryPort {\n    _postModeMessage(msg) {\n        this._duplex.postSyncMessage(msg);\n    }\n    req(output, bin) {\n        const reqId = this._reqId[0]++;\n        let hasOutput = false;\n        const reqOutput = (ret) => {\n            hasOutput = true;\n            output(ret);\n        };\n        // 先存放回调\n        this._resMap.set(reqId, reqOutput);\n        // 发送，同步模式会直接触发回调\n        this._postModeMessage({\n            msgType: \"REQ\",\n            msgId: reqId,\n            msgContent: bin,\n        });\n        /// 同步模式：发送完成后，马上就需要对方有响应才意味着 postMessage 完成\n        while (hasOutput === false) {\n            this._duplex.waitMessage();\n        }\n    }\n}\nexport class AsyncBinaryPort extends MagicBinaryPort {\n    _postModeMessage(msg) {\n        this._duplex.postAsyncMessage(msg);\n    }\n    req(output, bin) {\n        const reqId = this._reqId[0]++;\n        this._resMap.set(reqId, output);\n        this._postModeMessage({\n            msgType: \"REQ\",\n            msgId: reqId,\n            msgContent: bin,\n        });\n    }\n}\n","import { AsyncBinaryPort, SyncBinaryPort } from \"./MagicBinaryPort\";\nclass MagicBinaryChannel {\n    constructor(_duplex, localSab = new SharedArrayBuffer(1024), remoteSab = new SharedArrayBuffer(1024)) {\n        this._duplex = _duplex;\n        this.localSab = localSab;\n        this.remoteSab = remoteSab;\n    }\n}\nexport class SyncBinaryChannel extends MagicBinaryChannel {\n    constructor() {\n        super(...arguments);\n        this.port = new SyncBinaryPort(this._duplex);\n    }\n}\nexport class AsyncBinaryChannel extends MagicBinaryChannel {\n    constructor() {\n        super(...arguments);\n        this.port = new AsyncBinaryPort(this._duplex);\n    }\n}\n","import \"./@types\";\nexport * from \"@bfchain/comlink-core\";\nexport * from \"@bfchain/comlink-protocol\";\nexport * from \"@bfchain/comlink-sync\";\nexport * from \"@bfchain/comlink-async\";\nexport * from \"@bfchain/comlink-duplex-core\";\nimport { AsyncBinaryChannel, SyncBinaryChannel } from \"@bfchain/comlink-channel\";\nimport { ComlinkAsync } from \"@bfchain/comlink-async\";\nimport { ComlinkSync } from \"@bfchain/comlink-sync\";\nexport class Comlink {\n    constructor(options) { }\n    asyncModule(moduleName, duplex) {\n        if (!duplex.supportModes.has(\"async\")) {\n            throw new TypeError(\"duplex no support async mode\");\n        }\n        const binaryChannel = new AsyncBinaryChannel(duplex);\n        return new ComlinkAsync(binaryChannel.port, moduleName);\n    }\n    syncModule(moduleName, duplex) {\n        if (!duplex.supportModes.has(\"sync\")) {\n            throw new TypeError(\"duplex no support sync mode\");\n        }\n        const binaryChannel = new SyncBinaryChannel(duplex);\n        return new ComlinkSync(binaryChannel.port, moduleName);\n    }\n}\n","export class Endpoint {\n    constructor(_port) {\n        this._port = _port;\n        this.postMessage = this._port.postMessage.bind(this._port);\n    }\n    onMessage(listener) {\n        this._port.start();\n        this._port.addEventListener(\"message\", (e) => listener(e.data));\n    }\n}\n// export const EndpointFactory: BFChainComlink.Duplex.EndpointFactory = (port: MessagePort) => {\n//   return new Endpoint(port);\n// };\n","import { Duplex } from \"@bfchain/comlink-duplex-core\";\nimport { Endpoint } from \"./Endpoint\";\nconst PORT_SABS_WM = new WeakMap();\nexport class DuplexFactory {\n    constructor(_mc = new MessageChannel()) {\n        this._mc = _mc;\n    }\n    /**作为子线程运作 */\n    static async asCluster(workerSelf) {\n        let sabs;\n        const port2 = await new Promise((resolve, reject) => {\n            const onMessage = (me) => {\n                const { data } = me;\n                if (data instanceof MessagePort) {\n                    resolve(data);\n                    workerSelf.removeEventListener(\"message\", onMessage);\n                }\n                else if (data instanceof Array &&\n                    data[0] instanceof SharedArrayBuffer &&\n                    data[1] instanceof SharedArrayBuffer) {\n                    sabs = { locale: data[0], remote: data[1] };\n                }\n            };\n            workerSelf.addEventListener(\"message\", onMessage);\n        });\n        if (!sabs) {\n            throw new TypeError();\n        }\n        PORT_SABS_WM.set(port2, sabs);\n        const duplex = new Duplex(new Endpoint(port2), sabs);\n        return duplex;\n    }\n    _getSabs(port) {\n        let sabs = PORT_SABS_WM.get(port);\n        if (undefined === sabs) {\n            try {\n                sabs = {\n                    locale: new SharedArrayBuffer(1024),\n                    remote: new SharedArrayBuffer(1024),\n                };\n                PORT_SABS_WM.set(port, sabs);\n            }\n            catch (err) {\n                console.error(err);\n                throw new SyntaxError(\"no support use SharedArrayBuffer\");\n            }\n        }\n        return sabs;\n    }\n    /**创建出专门用于传输协议数据的双工通道 */\n    getDuplex() {\n        let duplex = this._duplex;\n        if (!duplex) {\n            const sabs = this._getSabs(this._mc.port1);\n            duplex = new Duplex(new Endpoint(this._mc.port1), sabs);\n            this._duplex = duplex;\n        }\n        return duplex;\n    }\n    /**作为主线程运作 */\n    asMain(workerIns) {\n        const sabs = this._getSabs(this._mc.port1);\n        try {\n            workerIns.postMessage([sabs.remote, sabs.locale]);\n        }\n        catch (err) {\n            console.error(err);\n            throw new SyntaxError(\"no support use transfer SharedArrayBuffer in channel\");\n        }\n        workerIns.postMessage(this._mc.port2, [this._mc.port2]);\n    }\n}\n","export class TaskLog {\n    constructor(groupName) {\n        this.groupName = groupName;\n        this._fails = [];\n        this.log = console.log;\n        this.warn = console.warn;\n        this.error = console.error;\n        this.info = console.info;\n        this.debug = console.debug;\n    }\n    assert(isTrue, msg) {\n        if (!isTrue) {\n            this._fails.push(msg);\n        }\n        console.assert(isTrue, msg);\n    }\n    finish() {\n        if (this._fails.length === 0) {\n            console.log(`✅ ~ all [${this.groupName}] test passed!`);\n        }\n        else {\n            console.error(`⛔ [${this.groupName}] has ${this._fails.length} test failed.`);\n        }\n    }\n}\n","import { Comlink } from \"@bfchain/comlink\";\nimport { DuplexFactory } from \"@bfchain/comlink-duplex-browser\";\n// import {} from \"../innerComlink/index\";\nimport { TaskLog } from \"./TaskLog\";\nconst comlink = new Comlink();\nexport async function installWebEnv(scriptUrl, mainThreadCallback, workerThreadCallback, workerThreadCallback2) {\n    var _a, _b;\n    if (scriptUrl) {\n        console.log(\"main started\");\n        /// 模拟A模块作为服务模块\n        try {\n            {\n                const duplexFactory = new DuplexFactory();\n                /**模块控制器 */\n                const moduleA = comlink.asyncModule(\"A\", duplexFactory.getDuplex());\n                // 执行回调\n                await mainThreadCallback(moduleA);\n                {\n                    /// 启动子线程，并将messagechannel发送给子线程\n                    const worker = new Worker(scriptUrl, {\n                        name: \"async\",\n                    });\n                    worker.onmessage = (e) => e.data === \"exit\" && worker.terminate();\n                    // 执行发送\n                    duplexFactory.asMain(worker);\n                }\n            }\n            {\n                const duplexFactory2 = new DuplexFactory();\n                const moduleA2 = comlink.asyncModule(\"A\", duplexFactory2.getDuplex());\n                // 执行回调\n                await mainThreadCallback(moduleA2);\n                {\n                    /// 启动子线程，并将messagechannel发送给子线程\n                    const worker = new Worker(scriptUrl, {\n                        name: \"sync\",\n                    });\n                    worker.onmessage = (e) => e.data === \"exit\" && worker.terminate();\n                    // 执行发送\n                    duplexFactory2.asMain(worker);\n                }\n            }\n        }\n        catch (err) {\n            console.error(\"❌ Main Error\", (_a = err === null || err === void 0 ? void 0 : err.stack) !== null && _a !== void 0 ? _a : err);\n            return;\n        }\n    }\n    else {\n        const mode = self.name;\n        const console = new TaskLog(`mix-${mode}`);\n        console.log(`worker ${mode} started`);\n        try {\n            /// 等待通道连接到位\n            const duplex = await DuplexFactory.asCluster(self);\n            if (mode === \"async\") {\n                /// 模拟B模块作为调用模块\n                /**模块控制器 */\n                const moduleB = comlink.asyncModule(\"B\", duplex);\n                // 回调\n                await workerThreadCallback(moduleB, console);\n            }\n            else {\n                /**模块控制器 */\n                const moduleB2 = comlink.syncModule(\"B2\", duplex);\n                // 回调\n                await workerThreadCallback2(moduleB2, console);\n            }\n            console.finish();\n        }\n        catch (err) {\n            console.error(\"❌ Worker Error\", (_b = err === null || err === void 0 ? void 0 : err.stack) !== null && _b !== void 0 ? _b : err);\n        }\n        // 退出子线程\n        setTimeout(() => {\n            self.postMessage(\"exit\");\n        }, 10);\n    }\n}\n","import { HolderReflect } from \"@bfchain/comlink\";\nimport { installWebEnv } from \"./envWrapper/webEnv\";\nfunction testRunner(scriptUrl) {\n    const A = \"~aAa~\";\n    installWebEnv(scriptUrl, (moduleA) => {\n        /**随便一个常量 */\n        const a = A;\n        moduleA.export(a, \"a\");\n        moduleA.export(document, \"document\");\n    }, async (moduleB, console) => {\n        const a = await moduleB.import(\"a\");\n        Reflect.set(globalThis, \"a\", a);\n        console.assert(a === A, \"import\");\n        const document = await moduleB.import(\"document\");\n        Reflect.set(globalThis, \"document\", document);\n        const div = await document.createElement(\"div\");\n        const id = `id-${self.name}-${Math.random().toString(36).slice(2)}`;\n        const textContent = `T~${self.name}~#${id}~T`;\n        div.id = id;\n        div.textContent = textContent;\n        document.body.appendChild(div);\n        console.log(await div.textContent);\n        console.assert((await div.textContent) === textContent, \"textContent\");\n        const div2 = await document.querySelector(\"#\" + id);\n        console.assert(JSON.stringify(HolderReflect.getHolderReflect(div).getIOB()) ===\n            JSON.stringify(HolderReflect.getHolderReflect(div2).getIOB()), \"ref\");\n    }, (moduleB, console) => {\n        /// test import\n        const a = moduleB.import(\"a\");\n        Reflect.set(self, \"a\", a);\n        console.assert(a === A, \"import\");\n        const document = moduleB.import(\"document\");\n        Reflect.set(self, \"document\", document);\n        const div = document.createElement(\"div\");\n        const id = `id-${self.name}-${Math.random().toString(36).slice(2)}`;\n        const textContent = `T~${self.name}~#${id}~T`;\n        div.id = id;\n        div.textContent = textContent;\n        document.body.appendChild(div);\n        console.assert(div.textContent === textContent, \"textContent\");\n        const div2 = document.querySelector(\"#\" + id);\n        console.assert(div2 === div, \"ref\");\n    });\n}\nReflect.set(self, \"testRunner\", testRunner);\nif (typeof document !== \"object\") {\n    testRunner();\n}\nelse {\n    testRunner(document.querySelector(\"script\").src);\n}\n"],"names":["isObj","obj","targetType","checkUnregisterToken","unregisterToken","TypeError","checkTarget","target","WeakRef","wr","WeakMap","set","deref","get","Object","defineProperty","globalThis","value","FinalizationRegistry","FinalizationGroup","cleanupCallback","fg","heldValueIter","heldValue","register","unregister","undefined","body","recover","result","e","then","ESM_REFLECT_FUN_MAP","Map","_SyncToCallback","Reflect","getPrototypeOf","proto","setPrototypeOf","isExtensible","preventExtensions","prop","getOwnPropertyDescriptor","has","deleteProperty","attr","ownKeys","ctx","args","apply","type","fun","resolve","reject","queueMicrotask","res","err","newTarget","construct","ctor","JSON","stringify","parse","handler","SyncForCallback","cb","isError","data","error","resolveCallback","rejectCallback","SyncPiperFactory","output","transformer","OpenArg","arg","ExportStore","name","accId","objIdStore","getObjById","id","cache","getSymById","sym","getId","saveObjId","saveSymId","releaseById","exportSymbol","source","_a","exportObject","ImportStore","idExtendsStore","proxyIdStore","proxyIdWM","_fr","releaseProxyId","getProxy","proxy","isProxy","getProxyById","pwr","saveProxyId","backupProxyId","_onReleaseCallback","onRelease","pact","state","s","v","o","bind","observer","prototype","onFulfilled","onRejected","callback","_this","thenable","test","update","stage","shouldContinue","updateValue","_resumeAfterTest","_resumeAfterBody","_resumeAfterUpdate","ComlinkCore","port","exportStore","importStore","_exportModule","scope","create","isExported","_listen","$destroy","Error","_getInitedExportScope","$getEsmReflectHanlder","operator","SyntaxError","onMessage","bin","out_void","linkObj","transfer","transferableBinary2LinkObj","targetId","ReferenceError","linkOut","out","isThrow","out_linkOut","anyRes","Any2InOutBinary","iobRet","push","linkObj2TransferableBinary","hasOut","InOutBinary2Any","paramList","slice","map","iob","i","length","len","$operator","$paramList","$handler","scopeRet","module","locId","refId","send","$getImportModule","_importModule","req","ret","IOB_EFT_Factory_Map","factory","Function","toString","refExtends","factoryCode","funType","getFunctionType","constructor","ctorName","str","call","startsWith","EXPORT_FUN_DESCRIPTOR_SYMBOL","Symbol","getFunctionExportDescription","IMPORT_FUN_EXTENDS_SYMBOL","refFunctionStaticToStringFactory","self","mode","code","configurable","writable","getObjectStatus","isFrozen","isSealed","globalSymbolStore","forEach","ModelTransfer","core","canClone","_getRemoteSymbolItemExtends","_b","globalSymInfo","global","description","unique","keyFor","_getRefItemExtends","status","exportDescriptor","isStatic","instanceOfFunction","canConstruct","showSourceCode","helper","needClone","item","imp","CB_TO_SYNC_ERROR","CallbackToSync","cbCaller","_ret","IS_ASYNC_APPLY_FUN_MARKER","IS_SYNC_APPLY_FUN_MARKER","PROTOCAL_SENDER","SENDER_MARKER","SyncModelTransfer","_rfsts","_genLinkInSender","linkIn","_reqLinkIn","_sendLinkIn","__marker__","_getDefaultProxyHanlder","sender","proxyHandler","_target","_reciver","_receiver","thisArg","argArray","_pkgLinkIn","a","tb","err_iob","pop","res_iob","_createImportByRefId","refHook","_createImportRefHook","getSource","proxyHanlder","getProxyHanlder","Proxy","getLinkInSenderByProxy","ref","sourceFun","funRef","defaultProxyHanlder","functionProxyHanlder","receiver","sourceObj","objRef","sourceSym","symRef","loc","cachedProxy","ComlinkSync","_syncWM","_asyncWM","opeartor","hanlder","applyHanlder","key","importModule","importAsSync","asyncToSync","syncFun","r","importAsAsync","syncToAsync","asyncFun","Promise","bindThis","propertyKey","descriptor","bound","CACHE_KEYS_SYMBOL","getCacheKeys","protoTarget","CACHE_KEYS","keyGenerator","symbol","String","cacheGetter","propTarget","source_fun","CACHE_VALUE_SYMBOL","getter","cacheValue","enumerable","console","cleanGetterCache","_cleanGetterCache","cleanAllGetterCache","__decorate","this","decorators","desc","c","arguments","d","decorate","__metadata","k","metadata","PropArrayHelper","pid","Math","random","substr","CLASS_PROTO_ARRAYDATA_POOL","PA_ID_KEY","PA_ID_VALUE","Set","CLASS_PROTO_ARRAYDATA","hasOwnProperty","arr_data","add","pa_id","remove","index","indexOf","splice","THROTTLE_WRAP_PLOT","NO_ALLOW_PROP","toPrimitive","toStringTag","hasInstance","species","iterator","isConcatSpreadable","match","matchAll","replace","search","split","__THEN_DISABLED__","WeakSet","createHolderProxyHanlder","holderReflect","toValueSync","isHolder","thenFun","assetHolder","Operator_typeOfHolder","typeNameRet","applyHolder","toHolder","asyncIterator","toAsyncValue","setHolderReflect","setHolder","deletePropertyHolder","applyHolderReflect","constructHolderReflect","constructHolder","__HOLDER_REFLECT_WM__","__REFLECT_HOLDER_WM__","getHolder","holder","getHolderReflect","CallbackToAsync","syncRet","syncResolve","syncReject","CallbackToAsyncBind","isNil","ReflectForbidenMethods","_factory_NoObject","_factory","nilGet","method","errorMessage","ID_ACC","reflectForbidenMethods","refFunctionStaticToString","alwaysTrueCallbackCaller","alwaysFalseCallbackCaller","alwaysUndefinedCallbackCaller","end","iobCacher","HolderReflect","linkSenderArgs","staticMode","_iobCacher","needSend","waitter","sendLinkIn","_getCatchedReflect","_catched","_catchedReflect","bindIOB","cacher","remoteIob","newIobCacher","getIOB","isBindedIOB","waitIOB","createSubHolder","subHolderLinkIn","_getSubHolderPrimitiveSync","throw_binded","apply_local","thisArgument","argumentsList","apply_remote","construct_local","construct_remote","defineProperty_local","attributes","definePropertyHolder","defineProperty_remote","deleteProperty_localObject","deleteProperty_remote","get_remoteFunction","iobExtends","get_remote","get_local","getOwnPropertyDescriptor_remoteFunction","getOwnPropertyDescriptor_remote","getOwnPropertyDescriptor_local","getOwnPropertyDescriptorHolder","getOwnPropertyDescriptorCallback","getPrototypeOf_local","getPrototypeOfHolder","getPrototypeOf_remote","has_remoteFunction","has_remote","has_local","hasHolder","isExtensible_local","isExtensibleHolder","isExtensible_remote","ownKeys_local","ownKeysHolder","ownKeys_remote","preventExtensions_local","preventExtensionsHolder","preventExtensions_remote","preventExtensions_onceRemote","set_local","set_remote","setPrototypeOf_local","setPrototypeOfHolder","setPrototypeOf_remote","asset_value","asset_remote","hint","Operator_instanceOf","Ctor","Operator_instanceOfHolder","Operator_typeOf","Operator_delete","Operator_spread","Operator_in","iterable","next","done","Array_concat","String_match","String_matchAll","String_replace","String_search","String_split","Object_assign","Object_create","Object_defineProperties","Object_defineProperty","Object_entries","Object_freeze","Object_fromEntries","Object_getOwnPropertyDescriptor","Object_getOwnPropertyDescriptors","Object_getOwnPropertyNames","Object_getOwnPropertySymbols","Object_getPrototypeOf","Object_is","Object_isExtensible","Object_isFrozen","Object_isSealed","Object_keys","Object_preventExtensions","Object_seal","Object_setPrototypeOf","Object_values","JSON_stringify","JSON_parse","applyCallback","constructCallback","definePropertyCallback","deletePropertyCallback","getCallback","getPrototypeOfCallback","hasCallback","isExtensibleCallback","ownKeysCallback","preventExtensionsCallback","setCallback","setPrototypeOfCallback","assetCallback","AsyncModelTransfer","doReq","linkInIob","linkInIOB","linkInIOBLength","isRejected","_createHolderByRefId","_getHolder","reflectHolder","valRet","cachedHolder","ComlinkAsync","wrap","val","AtomicsNotifyer","_port","_icbs","_remoteMode","Array","cbs","waitAsync","si32","waitCallback","Atomics","load","_notify_unknow","indexs","_notify_async","_notify_sync","postMessage","notify","u8Concat","ABC","u8s","totalLen","u8","u8a","Uint8Array","offsetLen","DataPkg","sab","Int32Array","su8","su16","Uint16Array","U32Reader","_u32","Uint32Array","_u8","buffer","setByU8","getU32","u32","serialize","json","charCodeAt","RangeError","deserialize","fromCharCode","Duplex","sabs","_notifyer","_eventId","_chunkCollection","supportModes","_cbs","localeDataPkg","locale","remoteDataPkg","remote","_sync","_checkRemote","getPort","duplex","postAsyncMessage","msg","_postMessageCallback","hook","curMsgType","msgType","postSyncMessage","_checkRemoteAtomics","wait","waitMessage","onApplyWrite","onChunkReady","msgBinary","_serializeMsg","sync","eventId","MSG_MAX_BYTELENGTH","byteLength","chunkCount","ceil","chunkId","msgOffset","tryWriteChunk","checkAndApplyWrite","cur_msg_type","compareExchange","store","doWriteChunk","msgChunk","subarray","max","_needOnMessageAtomics","_onMessage","_needOnMessage","dataPkg","cur_msg_status","chunkSize","chunk","cachedChunkInfo","size","chunkList","chunkItem","ArrayBuffer","_msgBinaryHandler","msgId","msgContent","MagicBinaryPort","_duplex","_reqId","_resMap","resId","resBin","reqId","_reqHandler","_postModeMessage","listener","SyncBinaryPort","hasOutput","reqOutput","AsyncBinaryPort","MagicBinaryChannel","localSab","remoteSab","SharedArrayBuffer","SyncBinaryChannel","AsyncBinaryChannel","Comlink","options","asyncModule","moduleName","binaryChannel","syncModule","Endpoint","start","addEventListener","PORT_SABS_WM","DuplexFactory","_mc","MessageChannel","asCluster","workerSelf","me","MessagePort","removeEventListener","port2","_getSabs","getDuplex","port1","asMain","workerIns","TaskLog","groupName","_fails","log","warn","info","debug","assert","isTrue","finish","installWebEnv","scriptUrl","mainThreadCallback","workerThreadCallback","workerThreadCallback2","duplexFactory","moduleA","comlink","worker","Worker","onmessage","terminate","duplexFactory2","moduleA2","stack","setTimeout","moduleB","moduleB2","testRunner","A","document","createElement","div","textContent","appendChild","querySelector","div2","src"],"mappings":"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"}